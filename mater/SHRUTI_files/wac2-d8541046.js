define("registernamespace",[],function(){!function(){function e(e){for(var n=0,r=arguments.length;r>n;n++)for(var i=this,o=arguments[n].split("."),a=0,s=o.length;s>a;a++){var c=o[a],l=i[c];l||(l=i[c]={}),l.__namespace||(0===a&&"Sys"!==arguments[n]&&(t.Sys.__rootNamespaces[Sys.__rootNamespaces.length]=l),l.__namespace=!0,l.__typeName=o.slice(0,a+1).join("."),l.getName=function(){return this.__typeName}),i=l}return i}var t=window;t.registerNamespace=e,e("Sys"),t.Sys.__rootNamespaces||(t.Sys.__rootNamespaces=[t.Sys])}()}),define("dependancies",["jquery-1.7.2","debug","validateconfig"],function(){!function(e){var t,n=window;n.Debug;t=n.wLive?n.wLive:n.wLive={},t.Core={},t.Controls={};var r=n.$Config;if(r.handlerBaseUrl=r.handlerBaseUrl||"",!r.sd){var i=document.domain,o=i.split(".");r.sd=1===o.length?"":"."+o[o.length-2]+".com"}r.mkt=r.mkt||"na",r.prop=r.prop||"X","undefined"!=typeof window.SymRealWinOpen&&(window.open=window.SymRealWinOpen)}(window.originaljQuery||jQuery)}),define("truncateellipsis",["dependancies","lightstring"],function(){!function(){var e=window,t=e.wLive;t.truncateEllipsis=function(e,t){return t=Math.max(parseInt(t,10)||1e5,4),e?e.length>t?e.substring(0,t-3)+"...":e:""}}()}),define("bsi",["validateconfig","jquery-1.7.2","cookie"],function(){!function(e){function t(){var t=e(document),r=e(L);t.bind("click",o),t.bind("mousedown",i),t.bind("mouseup",s),t.bind("keydown",c),t.bind("keyup",l),t.bind("touchstart",u),t.bind("touchend",d),le&&le.suppressBrowserRightClickMenu&&t.bind("contextmenu",a),ge=1,ce.ignoreWindowOnload||(ce.useJQueryReady?r.ready(function(){setTimeout(C,0)}):r.bind("load",C)),r.bind("unload",w),le&&le.capture&&(te=n())}function n(){var e={sw:screen.width,sh:screen.height,c:screen.colorDepth};return document.documentElement.clientWidth&&(e.bw=document.documentElement.clientWidth,e.bh=document.documentElement.clientHeight),e}function r(){W&&W.href!=O&&(W.href=O,e(W).unbind("mouseout",r),W=0)}function i(e){r(),f(e)}function o(e){2==e.which||N||B||(g(e),ae=!N&&!D&&!F,A=1,p(e.target,null,e),ae=1)}function a(t){if(t.shiftKey)return!0;if(t.target){var n=e(t.target),r=n.closest("a");if(r.length>0){var i=r.attr("href");if(i&&"#"!==i)return!0}var o=n.closest("input");if(o.length>0){var a=o.attr("type");if(a&&"text"==a.toLowerCase())return!0}var s=n.closest("textarea");if(s.length>0)return!0}return!1}function s(e){f(e),(1!=A||N)&&(ae=0,p(e.target,3==A,e),ae=1)}function c(e){93==e.keyCode&&(A=3,p(e.target,1,e))}function l(e){var t=e.keyCode;27!=t&&18!=t&&13!=t||r()}function u(e){r(),R=$()}function d(e){$()-R>1e3&&(ae=0,A=3,p(e.target,null,e),ae=1)}function f(e){A=e.which,g(e)}function g(e){D=e.shiftKey,N=e.ctrlKey,F=e.altKey,B=e.metaKey}function p(e,t,n){for(r();e;){if("A"==e.tagName){var i;try{i=e.href}catch(o){}if(i){if(se.AjaxHistory&&se.AjaxHistory.fullAjax&&-1==i.indexOf("#")){var a;L.$PF&&(a=L.$PF.getAppFrameDocument());var s=a?a.location.href:document.location.href,c=s.indexOf("#");c>-1&&(s=s.substr(0,c));var l=s.indexOf("?");l>-1&&(s=s.substr(0,l)),s+="?",0==i.toLowerCase().indexOf(s)&&(i=e.href="#"+i.substr(s.length))}var u=!1;if($U.isLinkABookmark(i)){var d=$U.getUrlFragment(i);d.indexOf("=")>-1&&(u=!0)}else u=!0;u&&E.informNav(i,0,e,t,null,n)}break}e=e.parentNode}}function h(e){for(var t=J;e&&e.getAttribute;){var n=e.getAttribute("lid");if(n){t=n;break}e=e.parentNode}return t}function v(e){var t=J;if(e)for(var n in e){var r=e[n];r=r.encodeUrl?r.encodeUrl():r,t+=G+n+K+r}return t}function m(){ge&&!ce.ignoreWindowOnload&&E.informLoaded(1,1)}function _(){var e="U";return 3==A?e="R":1==A?e="L":2==A&&(e="M"),N&&(e+="C"),F&&(e+="A"),D&&(e+="S"),e}function y(e,t){for(var n in t)e[n]=t[n]}function C(e){fe=1,b()}function b(){fe&&0==de.length&&E.informLoaded()}function w(){S(),r();var t=e(document);t.unbind("click",o),t.unbind("mousedown",i),t.unbind("mouseup",s),t.unbind("keydown",c),t.unbind("keyup",l),t.unbind("touchstart",u),t.unbind("touchend",d);var n=e(L);ce.ignoreWindowOnload||n.unbind("load",C),n.unbind("unload",w)}function S(){m(),j||k("U")}function $(){return(new Date).getTime()}function I(e){return(e?e:$())-E.headTime}function k(e,t,n,r){if(le&&le.enableLD){var i=e+I(n)+(t?t:J),o=P.getCookie(V,1);if(!o&&!r){var a=P.getCookie(q,1);if(a){var s=parseInt(a);if(!isNaN(s)){ie-1>s&&(s=ie-1),s>oe&&(s=oe),s>=ie&&(re.splice(0,s+1-ie),ie=s+1);var c=oe-s;if(c>0){for(oe=s;c-- >0;){var l=oe+1-ie;if(l<re.length){var u=re[l];if(!k(u.logKey,u.logValue,u.logTime,!0)){E.flush();k(u.logKey,u.logValue,u.logTime,!0)}}oe++}o=P.getCookie(V,1)}}}}var d=M.deserialize(o,z,0,1),f=[ce.xid,ce.rid,se.di,E.headTime].join("_"),g=d[f];if(g?g+="|"+i:g=i,d[f]=g,o=M.serialize(d,z,1),o.length>512)return 0;r||(re.push({logKey:e,logValue:t,logTime:n?n:$()}),oe++,P.setCookie(q,oe,$Config.sd,0,new Date(2020,1,1),1)),P.setCookie(V,o,$Config.sd,0,new Date(2020,1,1),1)}return 1}function x(e,t){var n=0,r=e.clone(),i=r.length,o=!1,a=L.$WebWatson;if(a)for(;i>n;n++)o=a.wrapCallback(r[n],0,Array.prototype.slice.call(arguments,1))()||o;return o}var L=window,T=(L.Debug,L.$Beacon),P=L.$Cookie,M=L.$Utility,E=window.$BSI;E.headTime||(E.headTime=(new Date).getTime());var A,N,D,F,B,R,H,j,W,O,U=[],Q=[],V="LD",q="LDH",z="&",X="?",G="~",K=":",J="",Y=".com",Z="-int.com",ee={},te={},ne=!0,re=[],ie=-1,oe=-1,ae=1,se=L.$Config,ce=se.BSI,le=ce.BICI,ue=se.sd.endsWith(Z)?Z:Y,de=[],fe=ce.ignoreWindowOnload,ge=0;E.informLoaded=function(e,t){if(se=L.$Config,ce=se.BSI,le=ce.BICI,document.body.id=ce.pn?ce.pn.encodeHtmlAttribute():J,E.headTime!=H){var n=$();H=E.headTime,ge=0,de=[],t&&E.addLogParams({x:"1"}),x(U,t),k("L",v(te),n),te={},le&&le.beaconUrl&&ne&&T.fire(le.beaconUrl,ee),ee={}}},E.sendToIdss=function(e){return"undefined"!=typeof e&&(ne=e),ne},E.informPVHead=function(){S(),E.headTime=$(),ge=1},E.addBeaconParams=function(e){y(ee,e)},E.addLogParams=function(e){y(te,e)},E.addLoadedCallback=function(e){U.push(e)},E.removeLoadedCallback=function(e){setTimeout(function(){for(var t=0,n=U.length;n>t;t++)if(U[t]==e)return void U.splice(t,1)},0)},E.isLoading=function(){return ge},E.addNavCallback=function(e){Q.push(e)},E.navigateTo=function(e,t,n){if(n&&(E.currentScenarioObject=n),!E.informNav(e,0,0,0,0,0,0,t))try{t?window.open(e,t):window.location.href=e}catch(r){}},E.addLoadEvent=function(e){ge&&de.push(e)},E.eventLoaded=function(e){for(var t=0,n=de.length;n>t;t++)if(de[t]==e){de.splice(t,1),b();break}},E.addHandlerDPs=function(e){return e.biciPrevious=ce.biciPrevious,e.mmn=se.mmn,e},E.addLDToHash=function(e){return e.bicild=P.getCookie(V,1),P.deleteCookie(V,$Config.sd),e},E.informNav=function(t,n,i,o,a,s,c,l){ae=ae&&!a&&(!i||"_blank"!=i.getAttribute("target"));var u=$(),d=i?i.href:0;r(),m(),n=n||h(i),t=t||J;var f=$U.doesMatchHost(t,"live"+ue),g=$U.isAbsoluteUrl(t)&&$U.doesMatchHost(t,"g.live"+ue);k("N",G+G+n.encodeUrl()+G+_(),u),j=j||ae;var p=x(Q,t,i,o,ae,f,s,c,l);!p&&$B.IE&&$B.V<8&&"function"==typeof ieImgAnchorFix&&i&&ieImgAnchorFix(i);var v=["WLXID=",ce.xid,"&RID=",ce.rid,"&TID=",E.headTime,"&lid=",n].join(J);if(g){if(i&&le&&le.enableGlinkExtra){var y;y=d.indexOf(X)<0?X+X:d.indexOf(X+X)<0&&d.indexOf(z+z)<0?z+z:z,i.href=d+y+v}}else f||le&&le.enableGlinkCall&&T.fireAndHold("//g.live"+Y+"/_9uxp9en-us/mike?"+t.encodeUrl()+z+z+v);return i&&d!=i.href&&(W=i,O=d,3==A?$B.Safari||$B.Firefox||e(i).bind("mouseout",r):setTimeout(r,100)),p},E.reportEvent=function(e,t){var n=G+e+v(t);if(!k("E",n)){E.flush();k("E",n)}},E.flush=function(){re.splice(0,oe-ie+1),ie=oe,P.setCookie(q,oe,$Config.sd,0,new Date(2020,1,1),1),T.fire(se.handlerBaseUrl+"/Handlers/NoOp.mvc",E.addLDToHash({}))},t(),$Do.register("$BSI.addNavCallback",E.addNavCallback),$Do.register("$BSI")}(window.originaljQuery||jQuery)}),define("css",["validateconfig","jquery-1.7.2"],function(){!function(e){function t(e){var t=r[e];return t||(r[e]=t=new RegExp("\\b"+e+"\\b","ig")),t}var n=window,r={},i=n.$css={has:function(e,n){var r=!1;if(e&&e.className){var i=t(n);i.lastIndex=0;try{r=i.test(e.className)}catch(o){}}return r},remove:function(e,t){i.swap(e,t)},swap:function(e,n,r){r=r||"",i.has(e,n)&&(e.className=e.className.replace(t(n),r).replace(/^\s|\s\s|\s$/g,function(e){return e.substr(1)}))},add:function(e,t){e&&(e.className?i.has(e,t)||(e.className+=" "+t):e.className=t)}}}(window.originaljQuery||jQuery)}),define("sutra",["validateconfig","jquery-1.7.2","debug"],function(){!function(e){function t(e){for(var t=e.split("."),r=n,i=0,o=t.length;o>i;i++)r=r[t[i]];return r}var n=window;n.sutra=function(r,i,o){if(n.$Sutra){var a=e(r);a.attr("sutra")&&o||a.attr("sutra",t(i))}},n.sutra.load=function(t,r){n.$Sutra&&(e(document.body).attr(t,r),e(document.body).removeAttr("sutravisited"))},n.unsutra=function(t){n.$Sutra&&e(t).removeAttr("sutra")}}(window.originaljQuery||jQuery)}),define("setup",["jquery-1.7.2","lightobject","lightstring","debug","validateconfig","dependancies","truncateellipsis","utilityextensions","beacon","lightfunction","lightarray","watson","do","cookie","bsi","css","sutra"],function(){!function(e){function t(){var e=document.title,t=document.location.hash;e!=o&&t&&e.indexOf(t)==e.length-t.length&&(document.title=o),o=document.title}var n=window,r=n.wLive;n.$Version="9.090519.0",n.CompatVersion="9.100709.0",n.$Debug||(n.$Debug={enabled:!1,trace:function(e){}});var i=n.document;n._d=i,n._ce=function(e){return i.createElement(e)},n._ge=function(e){return i.getElementById(e)},n._$ge=function(t){return e(n._ge(t))},n._get=function(e){return i.getElementsByTagName(e)},n._dh=i.head=i.head||n._get("head")[0],r.dh=e("#head")[0]||n._dh;var o;e(document).bind("propertychange",t)}(window.originaljQuery||jQuery)}),define("lightenums",["setup"],function(){!function(){function e(e){return function(){for(var t=arguments.length,n=0;t>n;n+=e)this[arguments[n]]=arguments[n+e-1]}}var t=window;t.jQuery;t.$Flags=e(2),t.$Enum=e(1)}()}),define("settimeout",["lightenums"],function(){!function(e){function t(){var e=i.length;if(e>0){try{i.pop()()}catch(o){var a=n.$WebWatson;a&&a.submitFromException(o)}e>1&&r(t,0)}}var n=window,r=window.setTimeout,i=[];window.smartSetTimeout=function o(e,n,a){function s(){o(e,0,a)}n?r(s,n):(a?i.splice(0,0,e):i.push(e),1==i.length&&r(t,0))}}(window.originaljQuery||jQuery)}),define("helpcontext",["settimeout"],function(){!function(e){var t=window,n=t.$HelpContext={},r=t.$Config;n.attachContextTo=function(e,t,n){t&&e.length>0&&(e[0].href=r.hc.url+"&errorCode="+(t+"").encodeUrl()+(n?"&errorMessage="+n.encodeUrl():""))},$Do.register("$HelpContext")}(window.originaljQuery||jQuery)}),define("lightnetwork",["helpcontext"],function(){!function(e){function t(){function t(e){if(e.indexOf("window.")<0)return!1;for(var t=e.split("."),n=window,r=1;r<t.length;r++)if(n=n[t[r]],void 0===n)return!1;return!0}function l(e,t){function n(){var e=!1;try{var t=o.contentWindow||o.contentDocument.parentWindow;t&&t.fetchXML&&(p.Proxy._registerProxy(t),e=!0)}catch(n){}return e}function r(){var r,i=m[e];if(i.attempts=(i.attempts||0)+1,i.attempts>2&&!i.fail&&!i.ready){if(!n())for(i.fail=!0;r=i.pop();)r.cb&&r.cb({status:5e3},r.c)}else i.ready||n()||l(e,t)}function i(){m[e].ready||m[e].fail||r()}u();var o=document.createElement("iframe");if(o.style.display="none",e.endsWith(f)||e.indexOf(":")>0&&e.substring(0,e.indexOf(":")).endsWith(f)){document.body.insertBefore(o,document.body.firstChild);var s=c.xmlProxyTimeout||3e4;setTimeout(i,s),_[e]=o,o.src=location.protocol+"//"+e+"/xmlProxy.htm?vn="+a+"&domain="+f}else t.cb&&t.cb({status:5e3},t.c)}function u(){if(!y)return void(f=document.domain);if(f=S,f.indexOf(":")>0&&(f=f.substring(0,f.indexOf(":"))),$Config.domain&&!$Config.domain.endsWith("."))document.domain=$Config.domain;else{if(!f.endsWith(".com"))throw new Error("Invalid $Config.domain");var e=f.indexOf(".");if(e>0){document.domain=f;try{for(;e>=0;)f=f.substring(e+1),"com"!=f?(document.domain=f,e=f.indexOf(".")):e=-1}catch(t){}}}f=document.domain,u=function(){}}function d(e,t){return e=p.resolveUrl(e).toLowerCase(),String(e).search(t?b:C)<0?"":RegExp.$1}var f,g,p=this,h=$B.IE,v=[],m={},_={},y=!!$Config.d;p.requiresDomainLowering=function(e){y=e},p.getCookie=function(e){return i.getCookie(e,1)},p.fetchXML=function(t,n,r,i,o,a,s){function c(e){if(o)for(var t in o)e.setRequestHeader(t,o[t])}function u(e,t){n&&n(e,a)}var f,g,p=d(t);if(r=r||"GET",n=n||function(){},p===S)f=e.ajax({url:t,type:r,data:i,beforeSend:c,complete:u});else{var h=m[p]=m[p]||[],v={url:t,cb:n,v:r,verb:r,postString:i,headers:o,c:a,cbp:s};if(g=_[p]){if(h.ready)return g.contentWindow.fetchXML(v,null,null,n,s),f;if(h.fail)return n&&n({status:5e3},a),f;h.push(v)}else h.push(v),l(p,v)}return f},p.fetchCSS=function(e,t,i,o,a){function c(){var r;clearTimeout(u);var c=!h||$B.IE&&$B.V>=10;if(c&&(l.readyState="complete"),l.onreadystatechange=function(){l&&l.onreadystatechange&&("loaded"===l.readyState||"complete"===l.readyState)&&(t&&t(l),l.onreadystatechange=null)},o&&n.Css_Start&&(r=Css_Start(o,a),l.onload=function(){Css_Load(this,r)},l.onerror=function(){Css_Error(this,r)}),l.href=e,!i){var d=s.dh;d.appendChild(l)}c&&l.onreadystatechange()}var l=i||document.createElement("link"),u=setTimeout(c,9e3);return i||(l.rel="stylesheet",l.type="text/css"),r.fire(e,0,c,c,1),l},p.fetchScript=function(r,i,a,c,l){function u(){if(!m.handled&&("complete"===m.readyState||"loaded"===m.readyState))try{m.handled=!0,e(m).unbind(".fetch"),!a||v[a]||t(a)?i&&i(m):(f&&(f.errorCode=f.errorCode||"ParseFailure"),g.removeChild(m),p.fetchScript(r,i,void 0,c,l))}catch(o){throw o}finally{f&&n.$Static&&n.$Static.logQos(f)}}function d(e){f&&(f.errorCode="DownloadFailure"),u(),a&&e.stopPropagation()}var f,g=s.dh,m=document.createElement("script");return c&&(f={apiId:c,propertyId:l,startTime:(new Date).getTime()}),(!h||$B.IE&&$B.V>=10)&&(m.readyState="loaded"),m.async=!0,m.type="text/javascript",e(m).bind("readystatechange.fetch",u).bind("load.fetch",u).bind("error.fetch",d),o(function(){m.src=r,g.appendChild(m)}),m},p.registerScript=function(e){v[e]=!0},p.Proxy={_registerProxy:function(e){window.NextNetworkRegisterProxy&&window.NextNetworkRegisterProxy(e);var t,n=d(e.location.href,!1),r=_[n],i=m[n],o=e.frameElement;if(i)for(i.ready||(r!=o&&(r=_[n]=o),i.fail=!1,i.ready=!0);t=i.pop();)r.contentWindow.fetchXML(t,null,null,t.cb,t.cbp)}},$Config.applyAppDomain&&u();var C=/^(?:http|https|ftp):\/\/([-.a-z0-9]+(?::[0-9]+)?)(?:\/|$)/i,b=/^((?:http|https|ftp):\/\/[-.a-z0-9]+(?::[0-9]+)?)(?:\/|$)/i,w=/\/[^\/]*\/\.\./;p.extractHost=d,p.resolveUrl=function(e,t){function r(e){for(;w.test(e);)e=e.replace(w,"");return e}if(e=e?e.toString():"",t)t=t.substring(0,t.toString().lastIndexOf("/")+1);else if(g)t=g;else{var i=n._ge("base");if(i&&""!=i.href)t=g=i.href;else{var o=location.protocol+"//"+location.host+location.pathname;t=g=o.substring(0,o.lastIndexOf("file:"===location.protocol?"\\":"/")+1)}}return e.startsWith("/")&&(e=location.protocol+"//"+location.host+e),-1===e.indexOf("//")&&(e=t+e),r(e)};var S=d(document.location.href);p.currentDomain=S}var n=window,r=n.$Beacon,i=n.$Cookie,o=(n.Debug,n.smartSetTimeout),a=n.$Version,s=n.wLive,c=n.$Network=new t;n.$LightNetwork=c}(window.originaljQuery||jQuery)}),define("scenarioqos",["lightnetwork"],function(){!function(e){function t(e,t){p.deferPosting?(p.deferredPosts=p.deferredPosts||[],p.deferredPosts.push({url:e,postString:t})):u.fetchXML(e,null,"POST",t)}function n(){if(p.enabled)if(p.ids&&p.guids&&p.startTimes&&p.propertyIds){for(var e=p.ids.split(m),t=p.guids.split(m),n=p.startTimes.split(m),i=p.propertyIds.split(m),a=e.length,s=g.xid,c=[],d=[],v=[],_=[],y=a-1;y>=0;y--){var C=e[y],w=n[y],S=i[y],$=t[y];y>=a-b&&(c.push(C),d.push($),v.push(w),_.push(S));var I=o(C,$);if(0!=I.apiArray.length){var k={sc:C,ppd:S,api:I.apiArray.join(m),dur:I.durationArray.join(m),err:I.errArray.join(m),errtp:I.errTypeArray.join(m),st:I.stackTraceArray.join(m),dep:I.dependentArray.join(m),stt:I.startTimeArray.join(m),ac:I.actionIdArray.join(m),pac:I.parentActionIdArray.join(m),xp:s},x=$Utility.serialize(k);u.fetchXML(f.handlerBaseUrl+p.handlerPath,null,"POST",x)}}var L=c.join(m)+"&"+v.join(m)+"&"+_.join(m)+"&"+d.join(m);$BSI.currentScenarioObject&&(L=$BSI.currentScenarioObject.id+"&"+$BSI.currentScenarioObject.startTime+"&"+$BSI.currentScenarioObject.propertyId+"&"+$BSI.currentScenarioObject.guid);var T=new Date;T.setSeconds(T.getSeconds()+5),l.setCookie(h,L.encodeUrl(),f.sd,null,T,1),setTimeout(r,500)}else l.deleteCookie(h,f.sd)}function r(){l&&l.deleteCookie(h,f.sd)}function i(e,t){for(var n=w.d,r=n.length,i=0;r>i;i++){var o=n[i];o.scenarioId===e&&o.transactionGuid===t&&(n.splice(i,1),i--,r--)}}function o(e,t){for(var n=[],r=[],i=[],o=[],a=[],s=[],c=[],l=[],u=[],d=w.d,f=d.length,g=0;f>g;g++){var p=d[g];if(p.scenarioId===e&&p.transactionGuid===t){var h=p.api||v,m=p.clientStart,b=p.error||_,S=p.errorType||(p.error?y:C),$=p.stackTrace||v,I=p.actionId||0,k=p.parentActionId||0;n.push(h),r.push(p.clientLength),i.push(b),o.push(S),a.push($),s.push(p.dependent||v),c.push(m),l.push(I),u.push(k)}}return{apiArray:n,durationArray:r,errArray:i,errTypeArray:o,stackTraceArray:a,dependentArray:s,startTimeArray:c,actionIdArray:l,parentActionIdArray:u}}function a(e,t){return e=e?e+m+t.toString():t.toString()}function s(e,t,n,r){var i={id:e,propertyId:n,guid:t,startTime:r};return i}var c=window,l=(c.$Beacon,c.$Cookie),u=c.$Network,d=c.$ScenarioQoS={},f=$Config,g=f.BSI||{},p=g.Scenario||{},h="Sce",v="na",m="#",_="ok",y="f",C="s",b=3;c.wLive.ScenarioQoSStats={d:[],add:function(e,t,n,r){if(e&&t&&n&&p.ids&&p.guids){var i=p.ids.split(m),o=p.guids.split(m),a=i.length;e.scenarioId=n.id,e.transactionGuid=n.guid;for(var s=0;a>s;s++)if(i[s]===e.scenarioId&&o[s]===e.transactionGuid){var l=c.wLive.ScenarioQoSStats;void 0===r&&(r=(new Date).valueOf()-t),e.clientStart=t,e.clientLength=r,l.d.push(e);break}}}};var w=c.wLive.ScenarioQoSStats;d.addScenarioToHttpHeader=function(e,t){t&&(e.scenarioid=t.id||v,e.transactionguid=t.guid||v,e.scenariopropertyid=t.propertyId||v)},d.getScenarioObject=function(e){if(p.enabled&&p.ids&&p.guids&&p.startTimes&&p.propertyIds)for(var t=p.ids.split(m),n=p.guids.split(m),r=p.startTimes.split(m),i=p.propertyIds.split(m),o=t.length,a=0;o>a;a++)if(n[a]===e)return s(t[a],n[a],i[a],r[a]);return null},d.startScenario=function(e,t){var n=(new Date).valueOf(),r=$Utility.generateGuid();return p.ids=a(p.ids,e),p.propertyIds=a(p.propertyIds,t),p.startTimes=a(p.startTimes,n),p.guids=a(p.guids,r),s(e,r,t,n)},d.stopScenario=function(e,n,r,a,s){if(p.enabled&&p.ids&&p.guids&&p.startTimes&&p.propertyIds)for(var c=n!==!1,l=e.id,u=g.xid,d=e.guid,h=p.ids.split(m),b=p.guids.split(m),w=p.startTimes.split(m),S=p.propertyIds.split(m),$=h.length,I=0;$>I;I++)if(h[I]===l&&b[I]===d){var k=o(l,d),x=(new Date).valueOf()-w[I],L=c?_:r||v,T=c?C:a||y;k.apiArray.push(l),k.durationArray.push(x),k.errArray.push(L),k.errTypeArray.push(T),k.stackTraceArray.push(s||v),k.dependentArray.push(v),k.startTimeArray.push(w[I]),k.actionIdArray.push(0),k.parentActionIdArray.push(0);var P={sc:l,ppd:S[I],api:k.apiArray.join(m),dur:k.durationArray.join(m),err:k.errArray.join(m),errtp:k.errTypeArray.join(m),st:k.stackTraceArray.join(m),dep:k.dependentArray.join(m),stt:k.startTimeArray.join(m),ac:k.actionIdArray.join(m),pac:k.parentActionIdArray.join(m),ctx:d,xp:u},M=$Utility.serialize(P);t(f.handlerBaseUrl+p.handlerPath,M),h.splice(I,1),b.splice(I,1),w.splice(I,1),S.splice(I,1),p.ids=h.join(m),p.guids=b.join(m),p.startTimes=w.join(m),p.propertyIds=S.join(m),i(l,d);break}},d.stopAllScenarios=function(e,t,n,r){if(p.enabled&&p.ids&&p.guids)for(var i=p.ids.split(m),o=p.guids.split(m),a=i.length,s=t!==!1,c=0;a>c;c++)e!==v&&e!==i[c]||d.stopScenario({id:i[c],guid:o[c]},s,n,null,r)},d.postDeferredScenarios=function(){if(p.deferPosting=!1,p.deferredPosts){for(var e=0;e<p.deferredPosts.length;e++){var n=p.deferredPosts[e];t(n.url,n.postString)}delete p.deferredPosts}},$BSI.addNavCallback(n)}(window.originaljQuery||jQuery)}),define("pagestats",["scenarioqos"],function(){!function(e){var t=window;t.wLive.PageStats={d:[],o:$BSI.headTime,add:function(n,r){var i=t.wLive.PageStats;r=r||i.o,n=n||{url:"Missing page stats.",tasks:[],executionTimeMs:0,schedulerTimeMs:0};var o=new Date;n.clientStart=r,n.clientLength=o.getTime()-r,n.clientTime=o,i.d.push(n),e(i).trigger("go")}}}(window.originaljQuery||jQuery)}),define("baseutil",["validateconfig","jquery-1.7.2","do","lightstring"],function(){!function(e){var t=window;t.$f={cancelEvent:function(e){return e=e||t.event,e.stopPropagation?(e.preventDefault(),e.stopPropagation()):e.returnValue=!1,!1},getSelectedText:function(){if(document.selection)return document.selection.createRange();var e;try{e=t.getSelection().rangeCount>0?t.getSelection().getRangeAt(0):t.document.createRange()}catch(n){e=t.document.createRange()}return e},createIframe:function(){var e=document.createElement("IFRAME");return e.frameBorder="no",e.src="javascript:''",e.scrolling="no",e},px:function(e){return e+"px"},updateTitle:function(e){try{top.document.title=top.document.title.replace(/.*?( PLT: [0-9]+ms)?$/i,e+"$1")}catch(t){}},replaceQs:function(e,t,n){var r="([?|&])"+t+"=([^&]+)",i=new RegExp(r,"i"),o=e,a="",s=e.indexOf("#");return s>-1&&(o=e.substr(0,s),a=e.substr(s)),o.replace(i,"$1"+t+"="+n)+a},doc:document,docEl:document.documentElement,getDocType:function(){var e,t=$f.doc,n=t.doctype,r=t.all;return n?e=n.publicId:r&&r.length&&(e=r[0].nodeValue),e||""},createLoading:function(t,n,r,i,o,a,s){var c,l=t;"object"==typeof t&&(l=t.returnMarkup,n=t.type,r=t.width,i=t.height,o=t.size,a=t.color,s=t.text,c=t.useTransparentFallback),n=n||$f.loadingType.spinning,r=r||"20px",i=i||r,o=o||"3px",a=a&&a.toLowerCase()||"#666";var u,d="c_spinningDots",f=$Config.imgsBase+"common/";n==$f.loadingType.flying?(d="c_flyingDots",u="flyingdots.gif"):(u="spinner_",u+="#fff"==a?"white_":"grey_","60px"==r?u+="120":"30px"==r?u+="60":(u+="40",c&&"#fff"!=a&&(u+="_transparent")),u+=".gif");var g=f+u,p=document.createElement("div");e(p).css({width:r,height:i,"font-size":o}),p.className=d+" c_loadingDots c_dotsPlaying";var h='<div class="c_loadingFallback"><img src="'+g+'" alt="" width="'+r+'" height="'+i+'" /></div>';h+='<div class="c_loadingTracks">';for(var v=5;v>0;v--)h+='<div class="c_loadingTrack c_loadingTrack'+v+'"><div class="c_loadingDot" style="background-color:'+a+";width:"+o+";height:"+o+'"></div></div>';h+="</div>",p.innerHTML=h;var m=e("<div></div>").append(p);if(n==$f.loadingType.flying&&m.css({width:r}),s&&m.append('<span class="c_loadingText">'+s.encodeHtml()+"</span>"),l){var _=e("<span></span>").append(m),y=_.html();return _.remove(),y}return m[0]},loadingType:{spinning:0,flying:1},hideLoading:function(e){e&&(e.hide(),e.removeClass("c_dotsPlaying"))},showLoading:function(e){e&&(e.show(),e.addClass("c_dotsPlaying"))}},$Do.register("$f")}(window.originaljQuery||jQuery)}),define("domutils",["validateconfig","jquery-1.7.2","lightstring","baseutil","css"],function(){!function(e){function t(){l.bind(d,r),l.bind(f,n)}function n(){clearTimeout(s),l.unbind(f,n),l.unbind(d,r)}function r(){clearTimeout(s),s=setTimeout(i,100)}function i(){o=a=null}var o,a,s,c=window,l=e(c),u=c.$f,d="resize",f="unload";u.dockIt=function(e,t,n,r,i,o,a,s,c,l){var d=0;i=i||!1,n="undefined"==typeof n?0:n,r=r||{x:0,y:0},s=s||{},"object"!=typeof r&&(d=r,r={x:0,y:0}),s.top=s.top||0,s.bottom=s.bottom||0,s.left=s.left||0,s.right=s.right||0;var f=e.offsetParent,g=f==document.body||f==u.docEl||c,p=u.getLocation(e,i);l=l||u.getLocation(t,i,g);var h,v,m=r.x*($B.rtl?-1:1),_={x:p.bodyX+m,y:p.bodyY+r.y,width:p.width,height:p.height,targetLoc:l,spaceY:0};if(!a){var y=u.clientHeight(),C=u.clientWidth(),b=-1!=l.addScrollTop?u.scrollTop():0,w=u.scrollLeft(),S=p.width+m,$=p.height+r.y,I=y+b-l.bottom-s.bottom,k=l.top-b-s.top,x=C+w-l.right-s.right,L=l.left-w-s.left,T=I>$,P=k>$,M=x>S,E=L>S;!T&&P?(2>n?(n+=2,v=1):4!=n&&6!=n||(n+=1,v=1),_.spaceY=k):!P&&T?(n>=2&&4>n?(n-=2,v=1):5!=n&&7!=n||(n-=1,v=1),_.spaceY=I):2>n||4==n||6==n?_.spaceY=I:_.spaceY=k,!M&&E?$B.rtl?n>=4&&6>n?(n+=2,h=1):1!=n&&3!=n||(n-=1,h=1):n>5?(n-=2,h=1):0!=n&&2!=n||(n+=1,h=1):!E&&M&&($B.rtl?n>5?(n-=2,h=1):0!=n&&2!=n||(n+=1,h=1):n>=4&&6>n?(n+=2,h=1):1!=n&&3!=n||(n-=1,h=1))}var A=n%2;return o?(_.x=r.x,_.y=r.y+l.bottom):n>=0&&(4>n?(_.x+=A?$B.rtl?l.left:l.right-p.width:$B.rtl?l.right-p.width:l.left,_.y+=2>n?l.bottom+d:l.top-p.height-d):($B.rtl&&(6>n?n+=2:n-=2),_.x+=6>n?l.left-p.width-d:l.right+d,_.y+=A?l.bottom-p.height:l.top)),!$B.Mobile||P||T||(_.y=u.scrollTop()),h&&(_.x+=-2*r.x),v&&(_.y+=-2*r.y),e.style.left=_.x+"px",e.style.top=_.y+"px",_},u.getLocation=function(e,t,n){for(var r=!1,i=u.getStyle,o="offsetTop",a="offsetLeft",s="position",c={x:e[a],y:e[o],top:0,right:0,bottom:0,left:0,bodyX:0,bodyY:0,width:e.offsetWidth,height:e.offsetHeight},l=e;l=l.offsetParent;){if(r="relative"==i(l,s),2!=t&&(c.bodyX-=l[a],c.bodyY-=l[o]),r){var d=u.toInt(i(l,"padding-left")),f=u.toInt(i(l,"padding-top"));c.x=1==t?c.x:d,c.y=1==t?c.y:f}c.x+=l[a],c.y+=l[o]}e=e.parentNode;for(var g=0,p=0;e&&e!=document.body;){var h=i(e,s);"relative"!=h?("fixed"==h&&n&&(g=1),n||!p&&"absolute"!=h?c.y-=u.toInt(e.scrollTop):"fixed"==h&&(g=-1),e=e.parentNode):(p=1,e=e.parentNode)}return 1==g&&(c.y+=u.toInt(u.scrollTop())),c.left=c.x,c.top=c.y,c.right=c.x+c.width,c.bottom=c.y+c.height,c.addScrollTop=g,c},u.toInt=function(e){return e=parseInt(e),isNaN(e)?0:e},u.locCompare=function(e,t){return e.bodyX!=t.bodyX||e.bodyY!=t.bodyY||e.top!=t.top||e.left!=t.left||e.bottom!=t.bottom||e.right!=t.right?1:0},u.getStyle=function(e,t){var n="";if(u.doc.defaultView&&u.doc.defaultView.getComputedStyle&&e.nodeType){var r=u.doc.defaultView.getComputedStyle(e,"");n=r?r.getPropertyValue(t):""}else if(e.currentStyle){if(t.indexOf("-")>=0){var i=t.split("-");i[1]=i[1].substr(0,1).toUpperCase()+i[1].substr(1),t=i.join("")}n=e.currentStyle[t]}return n},u.isChildOf=function(e,t,n){try{for(n||(n=window.document);t&&t!==e&&t!=n;)t=t.parentNode;return t===e}catch(r){return!1}},u.pn=function(e,t){for(var n=$css.has(e,t),r=n?e:null;!r&&(e=e.parentNode)&&"undefined"!=typeof e;)$css.has(e,t)&&(r=e);return r},u.docHeight=function(e){if(e||!o){var t=u.doc.documentElement.clientHeight,n=u.doc.body.clientHeight,r=void 0!=n?n:window.innerHeight+window.scrollMaxY;o=Math.max(r,t)}return o},u.docWidth=function(){if(!a){var e=u.doc.body.clientWidth;a=void 0!=e?e:document.width}return a},u.scrollTop=function(){var e=u.toInt(u.docEl.scrollTop),t=u.toInt(window.scrollY);return Math.max(e,t)},u.scrollLeft=function(){var e=u.toInt(u.docEl.scrollLeft),t=u.toInt(window.scrollX);return Math.max(e,t)},u.clientHeight=function(){return u.docEl.clientHeight-($B.IE?16:0)},u.clientWidth=function(){return u.docEl.clientWidth-($B.IE?16:0)},t()}(window.originaljQuery||jQuery)}),define("wlivecss",["validateconfig","jquery-1.7.2","css","debug"],function(){!function(e){var t=window,n=(t.Debug,t.$css);n.getCN=function(e,t,r){var i=[];if(r&&r.getElementsByTagName)for(var o=r.getElementsByTagName(t),a=0;a<o.length;a++)n.has(o[a],e)&&(i[i.length]=o[a]);return i},n.addHideBorder=function(t,n){n=n||this,e(n).addClass("c_nobdr")},n.removeHideBorder=function(t,n){n=n||this,e(n).removeClass("c_nobdr")},n.addPressedState=function(t,n){n=n||this,e(n).addClass("t_prs")},n.removePressedState=function(t,n){n=n||this,e(n).removeClass("t_prs")};t.$edh={e:function(e,t){var n=t||"inline";if("span"==e.nodeName.toLowerCase()&&-1!=e.className.indexOf("c_ld")){var r=e.lastChild;r&&(e.parentNode.insertBefore(r,e),r.style.display=n,e.parentNode.removeChild(e))}},d:function(e){if("a"==e.nodeName.toLowerCase()&&("span"!=e.parentNode.nodeName.toLowerCase()||-1==e.parentNode.className.indexOf("c_ld"))){var t=document.createElement("span");t.innerHTML=e.innerHTML,t.className=e.className?e.className+" c_ld":"c_ld";var n=e.getAttribute("title");n&&t.setAttribute("title",n),e.style.display="none",e.parentNode.insertBefore(t,e),t.appendChild(e)}}};$B&&$B.SF_iPhone&&e(function(){e(".sc").length>0&&e(t.document).bind("touchmove",function(t){0===e(t.target).closest(".sc").length&&t.preventDefault()})})}(window.originaljQuery||jQuery)}),define("wliveimagestrip",["validateconfig","jquery-1.7.2","lightstring","do","wlivecss","utilityextensions"],function(){!function(e){function t(e,t,n,r,i,o){o?(e[w][h]=n+y,e[w][v]=t+y,c()||(e[w][m]=p(n)+r+y,e[w][_]=p(t)+i+y)):e[w][C]=t+y+" "+n+y}function n(e,t,n,r,i,o,a,s,c){s=s||""==s?s:a;var l='<span class="{0}"><img class="{1}" src="{2}" onload="this.onload=null;$Do.when(\'$IS.Init\',0,this);" style="width:{3};height:{4};background-position:{5};background-image:{6};" alt="{7}" title="{8}"/></span>',u=l.format(k,"is_img",i+"is/invis.gif",n+y,r+y,"-"+e+y+" -"+t+y,"url('"+o+"')",a?a.encodeHtmlAttribute():"",s?s.encodeHtmlAttribute():"");if(c)return u;var d=document.createElement("span");return d.innerHTML=u,d.firstChild}function r(e,t,n,r){e=i(e.split(",")),t=i(t.split(",")),n=n?n.trim():n;var o=$B.rtl&&e[1]?e[1]:e[0];return f.Create(t[0],t[1],t[2],t[3],n,n+o,t[4],null,r)}function i(e){for(var t=0;t<e.length;t++){var n=e[t];n&&(e[t]=n.trim())}return e}function o(e){if(e&&e.getElementsByTagName)for(var t,n=e.getElementsByTagName("span"),r=n.length,i=-1;r>i&&!t;i++){var o=-1==i?e:n[i],a=g(o,k),s=g(o,x);if(a||s)return o}return null}function a(e){var t=o(e);if(e.tagName!=I&&t&&t.getElementsByTagName&&(e=t.getElementsByTagName(I)[0]),e&&g(e,"is_img")){var n=e[w],r=e[S];if(r){r.dir=$B.ltr?"ltr":"rtl";var i=c();if(L||!i){var a='"style="width:{2}px;height:{3}px;"',s='<span class="',d='<img src="{6}"',f="</span>",h=[s,"is_o",a,">",s,"is_i",a,">",d,'class="is_hcimg {11}"alt="{1}"{10}style="left:-{4}px;top:-{5}px;width:{7};height:{8};{9}"/>',f,f,d,'class="is_p',a,"/>"].join(""),v=r[S];if(v)for(var m=v.getElementsByTagName("span"),_=0;_<m.length;_++)m[_][w].zoom=1;var y=n[b],C=y.indexOf("http");-1===C&&(C=y.indexOf('url("')+5),y=y.substr(C,y.length-C-(y.endsWith('")')?2:1));var T,P,M=u(e),E=l(e),A=p(E.x),N=p(E.y);i||(T=A+M.w,P=N+M.h);var D=e.title,F=h.format(e.src.encodeHtmlAttribute(),e.alt.encodeHtmlAttribute(),M.w,M.h,A,N,(i?y:e.src).encodeHtmlAttribute(),i?$:T+"px",i?$:P+"px",i?"":"filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+y.encodeHtmlAttribute()+"',sizingMethod='crop');",D||""==D?'title="'+D.encodeHtmlAttribute()+'"':"",e.className.replace("is_img",""));$css.swap(r,k,x),r.innerHTML=F}}}}function s(e){for(var t=e.getElementsByTagName(I),n=0,r=t.length;r>n;n++){var i=t[n],o=i.className;"is_img"!=o&&"is_hcimg"!=o&&"is_p"!=o||(i.onload=null,i[w][b]="")}}function c(){return!$B.IE_M6||$B.IEM_M8}function l(t){var n=e(t),r=t[w],i=(r[C]||n.css(C)||"").split(" "),o=parseInt(r[C+"X"]||n.css(C+"X")||i[0]),a=parseInt(r[C+"Y"]||n.css(C+"Y")||i[1]);return{x:o,y:a}}function u(t){var n=e(t),r=t[w],i=t.currentStyle||window.getComputedStyle&&window.getComputedStyle(t,0)||{},o=parseInt(r[_]||i[_]||n.css(_)),a=parseInt(r[m]||i[m])||n.css(m);return{w:o,h:a}}var d=window;d.Debug;d.$IS={};var f=d.$IS,g=$css.has,p=Math.abs,h="top",v="left",m="height",_="width",y="px",C="backgroundPosition",b="backgroundImage",w="style",S="parentNode",$="auto",I="IMG",k="is_c",x="is_hc",L=d.$Utility.isHighContrast();f.setClass=function(n,r){if(n){var i=o(n);if(i){var a=i.getElementsByTagName(I)[0],s=g(i,x);if(a.className=(s?"is_hcimg ":"is_img ")+r,s){var d=a[S],f=(e(a),l(a));c()||(a[w][_]="",a[w][m]="");var p=u(d);t(a,f.x,f.y,p.h,p.w,s)}}}},f.toggle=function(n,r,i){if(n&&0!=r){var a=o(n);if(a){var s=a.getElementsByTagName(I)[0],c=g(a,k),d=s;c||(d=s[S]),i&&(s.alt=i,null!=s.title&&(s.title=i));var f=e(s),p=f.css(v)||s[w][v],m=f.css(h)||s[w][h];if(c){var _=l(s);p=_.x,m=_.y}p=parseInt(p),m=parseInt(m);var y=u(d),C=m-y.h*r;t(s,p,C,y.h,y.w,!c)}}},f.Create=n,f.CreateFromConfig=r,f.Init=a,f.disposeAll=s,$Do.register("$IS.Init",a),$Do.register("$IS.disposeAll",s)}(window.originaljQuery||jQuery)}),define("wlivemenu",["validateconfig","jquery-1.7.2","css","debug","baseutil","domutils","sutra"],function(){!function(e){function t(n,p,b,S,$,I,k,x,L,T,P,M,E,A,N,D,F,B,R,H,j,W,O,U,Q){function V(){Ie=!0,n.binding=nn,r(o,l,nn.dispose),r(n,st,_e),r(p,st,_e),
r(p,lt,be),r(p,at,fe),r(w,pt,pe),r(w,at,pe),r(w,"touchend",ge),r(w,ct,he),r(w,mt,pe),$B.Firefox&&r(w,_t,pe),Be=p.tagName==g,nn.isHoverMenu=("mouseover"===k||"mousemove"===k||"focus"===k)&&!Be,T||(T=250,Oe=1e3),P=P||200,nn.isHoverMenu?(r(p,gt,nn.menuOnmouseout),r(p,c,nn.menuOnmouseover),r(n,gt,nn.menuOnmouseout),r(n,c,nn.menuOnmouseover),r(p,ut,nn.menuOnmouseover)):k&&!F&&(!Q||"keyup"!==k&&"mousedown"!==k&&"click"!==k?o.setTimeout(function(){r(p,k,nn.toggleState)},0):o.setTimeout(function(){e(p).bind("keyup"+h,function(e){13===e.which&&nn.toggleState(e)}).bind("mousedown"+h,function(e){nn.toggleState(e)})},0)),!C||$B.IE&&$B.V<7||(Ee=w.createElement("div"),Ee[Ge]="c_m_sbox",Se(Ee,50),(tn||$B.S60_Symbian)&&o.$Config&&$Config.ImagesBaseUrl&&(Ee[u].background="url("+$Config.ImagesBaseUrl+"/imgs/black_50.png)"),w.body.insertBefore(Ee,w.body.firstChild),$B.SF_iPhone&&r(Ee,at,pe)),Pt[Ke]=Ye,q(),G(),r(o,ht,X)}function q(){var t,a=n.getElementsByTagName("*");We=0,Ue=null,Pe=[];for(var s=null,c=0,l=a.length;l>c;c++){var d=a[c],p=e(d),h="SPAN"==d.tagName&&$css.has(d,"c-NavLinkDisabled"),v="SPAN"==d.tagName&&$css.has(d,"c-InformationRow");if("UL"===d.tagName&&$css.has(d,"c_m")&&"absolute"===p.css("position")&&(s&&$f.isChildOf(s,d,n)||(s=d)),("A"==d.tagName||d.tagName==g||h||v)&&(!s||!$f.isChildOf(s,d,n))){var m=$e(d);if(m==n||m&&m.binding&&m.binding.isOpen()){v||Pe.push(d);var _,y=d[f];try{_="LI"==y.tagName||"DIV"==y.tagName}catch(b){}_&&(C||(i(d,dt,z),i(d,ft,z),i(d,vt,$f.cancelEvent),r(d,dt,z),r(d,ft,z),r(d,vt,$f.cancelEvent),!$B.RE_WebKit||d.getAttribute("tabindex")||h||v||d.setAttribute("tabindex",1),d[u].zoom="0",($css.has(d,"uxfa_ml")||$css.has(d,"c_ml"))&&(We=1),d.setAttribute("role","menuitem"),h&&d.setAttribute("aria-disabled","true"),o.$Sutra&&$Sutra.Shared&&$Sutra.Shared.MenuItemLink&&!y.getAttribute("sutra")&&sutra(y,"$Sutra.Shared.MenuItemLink")),"none"===y.style.display||$css.has(y,"NoDisplay")||(Ue=Ue||y,Qe=y),!Ne&&$css.has(d,Ct)&&(He=d),Fe&&Fe.id&&Fe.id==d.id&&(t=1,Ce(Pe.length)))}}}Nt=Pe.length,Nt>0?(Tt&&De&&ae(),Tt=0,Le=Pe[0],Te=Pe[Nt-1],r(Le,lt,be),r(Te,lt,be),Ue?(kt.removeClass($t),e(Ue).addClass("c_m_firstchild"),e(Qe).addClass("c_m_lastchild")):kt.addClass($t)):(Y(),Tt=1),!t&&He&&Ce(-1)}function z(e){if(!Be){e=e||event;var t=e.target||e.srcElement;"A"==t.nodeName&&("focusin"==e.type?setTimeout(function(){$css.add(t,yt)},0):setTimeout(function(){$css.remove(t,yt)},0))}}function X(e){if(Lt=1,!$css.has(n,"noresize")){var t=$f.docWidth();Ht!=t&&(Ht=t,se(e,1))}}function G(){if(!Tt){Pt[Je]=Ze;var t=$e(p);t&&t!=p?je=t.binding:void 0!=L&&(b=L),A&&(Ne&&(n[u][d]="auto",$css.remove(n,"c_m_maxw")),n.offsetWidth>A&&(n[u][d]=A+s,$css.add(n,"c_m_maxw")));var i=3,a=i,c=$B.rtl,l=1;if(!Me&&C&&K(),Ae||C||(Ae=$f.createIframe(),Et=Ae[u],Et[nt]=$f.getStyle(n,nt),n[f].insertBefore(Ae,n),r(Ae,ut,we)),Qt=N||p,$css.has(p,"c_m_usep")&&(Qt=p[f]),tn||(o.$WLXIM&&o.$WLXIM.isSidebarOpened()&&(qt.right=_),!S&&e(n).parents(".c_m").length>0&&(S={y:-y,x:0}),Ut=$f.dockIt(n,Qt,b,S,$,x,M,qt,zt,Xt),jt=Ut.targetLoc),C){var g=$f.docWidth(),h=$f.docHeight(),v=Dt,m=o.screen[d],w=0;if(Ee&&(Ee[u][rt]=h?h+s:"100%",Ee[u][d]=g?g+s:"100%"),(!g||g>m&&!$B.SF_iPhone)&&(g=m),c=0,g>Dt&&!tn){var I=$f.getLocation(p,$,Ot),k=$B.rtl?I.right:I.left;k>g/2&&(w=g-Dt,c=1),l=0}else v=g,a=0;Ut.x=w,n[u][it]=Ut.x+s,Pt[d]=Mt[d]=v-2+s,tn&&(n[u][ot]=Rt+s),J()}var T=function(){Ut.height+=C&&l?2*i:0,Mt[Ke]=Ye,C||(Mt[d]=Ut.width+s),Mt[rt]=Ut.height+s,Mt[it]=Ut.x+(c?-a:a)+s,Mt[ot]=Ut.y+(C&&l?-i:i)+s,Mt[Ke]=et};!C||tn||$B.S60_Symbian||setTimeout(T,0),Ae&&(Et[Ke]=Ye,Et[d]=Ut.width+s,Et[rt]=Ut.height+s,Et[it]=Ut.x+s,Et[ot]=Ut.y+s),Lt=0,De?Ne&&nn.show(0,1):Y()}}function K(){for(Me=n;Me[Ge]!=bt&&Me[Xe];)Me=Me[Xe];Me&&Me[Ge]==bt||(Me=w.createElement("div"),Mt=Me[u],Mt[nt]=$f.getStyle(n,nt),Mt[ot]=0,Mt[it]=0,Me[Ge]=bt,n[f].appendChild(Me)),Mt=Me[u],Mt[Je]=tt,Mt.backgroundColor="#000",Se(Me,20)}function J(){for(var e,t=0,r=[],i=n.getElementsByTagName("UL"),o=0;o<i.length;o++)e=i[o],$css.has(e,"c_gll")&&(r.push(e),de(e),e.offsetTop>e.previousSibling.offsetTop&&(t=1));if(t)for(var a=0;a<r.length;a++)ue(r[a])}function Y(){Ie&&(Zt&&!Jt?(It.stop(),Yt=!1,Jt=!0,clearTimeout(Kt),Kt=setTimeout(function(){ee(),oe(),It.animate({height:0},en,"linear",ne)},10)):(Z(),C||oe()),Ee&&(Ee[u][Je]=tt),Ce(-1),setTimeout(function(){e(Pe).removeClass(yt)},100),kt.attr("aria-expanded","false"),kt.removeAttr("aria-owns"))}function Z(){De||(te(),Et[Ke]=Mt[Ke]=Pt[Ke]=Ye,Et[Je]=Mt[Je]=Pt[Je]=tt,Lt&&(Pt[ot]=Mt[ot]=0,Pt[it]=Mt[it]=0)),e(wLive.Controls).trigger("aftermenudismiss",{menu:nn,parent:je})}function ee(){It.css({overflow:"hidden"}),It.removeClass("pause")}function te(){It.css({overflow:"",height:"auto"}),It.addClass("pause")}function ne(){Jt=!1,Z()}function re(){Yt=!1,te()}function ie(e){e=e||It.height();var t=Ut.spaceY;if(t>0&&e>=t&&!We&&(It.css("max-height",t+s),It.addClass(St),!It.hasClass("c_mfw")&&(!$B.IE||$B.V<=8))){var n=It.width()+16;It.css("min-width",n+s)}}function oe(){It.hasClass(St)&&(It.css({"max-height":"","min-width":""}),It.removeClass(St))}function ae(){if(e(wLive.Controls).trigger("beforemenushow",{menu:nn,parent:je}),Ee&&(Ee[u][Je]=Ze),Et[Je]=Mt[Je]=Pt[Je]=Ze,Zt&&!Yt){clearTimeout(Kt),It.stop(),Yt=!0,Jt=!1,te();var t=It.height();ee(),It.css({height:0}),It.animate({height:t},en,"linear",re),ie(t)}else C||ie();Et[Ke]=Mt[Ke]=Pt[Ke]=et,He==Le&&Ce(0),$B.IE_M7&&(It.find(".c_ms").each(function(){var t=e(this);t.css("width",t.parents("ul").width()-v+s)}),It.find(".c_ml").each(function(){var t=e(this);t.css("width",t.parents("ul").width()-m+s)})),kt.attr("aria-expanded","true"),n.id&&kt.attr("aria-owns",n.id)}function se(n,r){(r||ce()&&De)&&(rn=(new Date).getTime(),De=0,nn.closeEventSource(n&&n.srcElement),Tt||Y(),t.current=je,je&&(je.isHoverMenu&&(je.tempHoverCloseDelay=Bt),$B.IE&&ke&&p.focus(),setTimeout(function(){je.update(1)},0)),Vt.removeClass(wt),le(),$B.IE&&$B.V<=8&&(It.find(".c_ms").each(function(){e(this).css("width","")}),It.find(".c_ml").each(function(){e(this).css("width","")})))}function ce(){var e=500;return(new Date).getTime()-rn>e}function le(){for(var e=0,t=Ft.length;t>e;e++)try{Ft[e]()}catch(n){a.submitFromException(n,ze,99)}}function ue(e){e[u][Je]=tt,e.previousSibling[Ge]=""}function de(e){e[u][Je]=Ze,e.previousSibling[Ge]="c_gl"}function fe(e){if(!Be&&nn.isHoverMenu){var t=p.getAttribute("href");if((!t||t.endsWith("#"))&&De&&!I)try{Le.focus()}catch(n){}}}function ge(e){qe?(pe(e),De||(qe=!1)):qe=!0}function pe(e){e=e||event;var t=e.target||e.srcElement;De&&t&&!$f.isChildOf(n,t)&&p!=t&&!$f.isChildOf(p,t)&&nn.hide(e)}function he(e){e=e||event;var t=27,r=e.target||e.srcElement,i=e.keyCode||e.which;9==i&&(xe=!1),De&&(i==t?(Re=r.value,nn.hide(e)):ke||xt!=p&&(9!=i||$f.isChildOf(n,xt))||!Le||I||-1!==At||ye(1)),Be&&r==p&&(De||r.value==Re||ve()?De&&ve()&&nn.hide(e):nn.show())}function ve(){return!(D||!Be||""!=p.value)}function me(){return!Be||!e(p).is(":focus")}function _e(n){n=n||event;var r=n.target||n.srcElement,i=n.keyCode||n.which,o=0;if(xe=9==i,ke=n.shiftKey,xt=r,De&&(Be||U)){if(r==p||U)if(40==i)ye(1),o=1;else if(38==i)ye(-1),o=1;else if(13==i){if(""!=r.value||R)if(Fe){try{Fe.focus()}catch(a){}e(nn).trigger("EnterEvent",Fe)}else if(He){try{He.focus()}catch(a){}e(He).click(),e(nn).trigger("EnterEvent",He)}}else xe&&!ke?(e(nn).trigger("TabEvent",n),Ce(-1),t.closeCurrent(n),Be||(o=1)):27==i&&De?o=1:xe&&ke&&(Ce(-1),t.closeCurrent(n),Be||(o=1));else xe&&(ke?ke&&Ce(At-1):Ce(xt!=Te?At+1:-1));if(o)return $f.cancelEvent(n)}return!0}function ye(t){if(Nt){for(var n=At+t;Nt>n&&n>=0&&!e(Pe[n]).is(":visible");)n+=t;n>=Nt?n=Nt-1:0>n&&(n=0),Ce(n)}}function Ce(e){Nt&&(Fe&&$css.remove(Fe,yt),At=e,At>-1?(Fe=Pe[At],$css.remove(He,Ct),Fe&&($css.add(Fe,yt),setTimeout(function(){try{Fe.focus()}catch(e){}},0))):(Fe=ze,$css.add(He,Ct)))}function be(e){xe&&ke&&xt==p?(nn.hide(e),nn.menuOnmouseout()):!Tt&&(!ke&&xe&&xt==Te||ke&&xe&&xt==Le)?(nn.hide(e),nn.menuOnmouseout()):De||xt!=p||nn.menuOnmouseout()}function we(e){var t=xe&&!ke?Le:p;try{t.focus()}catch(n){}}function Se(e,t){var n="opacity";$B.IE&&$B.V<=9&&(n="filter"),e[u][n]="filter"==n?"alpha(opacity="+t+")":.01*t}function $e(e){for(var t=e.binding&&e.binding.toggleState?e:null;!t&&(e=e.parentNode)&&"undefined"!=typeof e;)e.binding&&e.binding.toggleState&&(t=e);return t}var Ie,ke,xe,Le,Te,Pe,Me,Ee,Ae,Ne,De,Fe,Be,Re,He,je,We,Oe,Ue,Qe,Ve,qe,ze=null,Xe="nextSibling",Ge="className",Ke="visibility",Je="display",Ye="hidden",Ze="block",et="visible",tt="none",nt="position",rt="height",it="left",ot="top",at="click",st="keydown",ct="keyup",lt="blur",ut="focus",dt="focusin",ft="focusout",gt="mouseout",pt="mousedown",ht="resize",vt="dragstart",mt="mousewheel",_t="DOMMouseScroll",yt="t_seli",Ct="t_hov",bt="c_shad",wt="c_mf",St="c_m_scroll",$t="c_emptymenu",It=e(n),kt=e(p),xt=ze,Lt=1,Tt=1,Pt=n[u],Mt={display:0,visibility:0},Et=Mt,At=0,Nt=0,Dt=320,Ft=[],Bt=1e3,Rt=($f.docEl,0),Ht=$f.docWidth(),jt={},Wt=n.offsetParent,Ot=Wt==document.body||Wt==$f.docEl,Ut={},Qt=p,Vt=B?e(B):kt.parent(),qt=H||{},zt=j,Xt=O,Gt="";"undefined"==typeof U&&(U=!0);var Kt,Jt,Yt,Zt=!(C||$B.IE&&$B.V<=9||$B.SF_iPhone||W),en=150,tn=$B.BlackBerry,nn=this;void 0===b&&(b=ze),nn.isHoverMenu=0,nn.tempHoverCloseDelay=0,nn.parentEl=ze,nn.keepHoverMenuOpen=0,nn.dispose=function(){if(i(n,st,_e),i(p,st,_e),i(p,lt,be),i(w,pt,pe),i(w,at,pe),i(w,ct,he),i(o,ht,X),i(w,mt,pe),$B.Firefox&&i(w,_t,pe),nn.isHoverMenu?(i(p,gt,nn.menuOnmouseout),i(p,c,nn.menuOnmouseover),i(n,gt,nn.menuOnmouseout),i(n,c,nn.menuOnmouseover),i(p,ut,nn.menuOnmouseover)):k&&(!Q||"keyup"!==k&&"mousedown"!==k&&"click"!==k?i(p,k,nn.toggleState):(e(p).unbind("keyup"+h),e(p).unbind("mousedown"+h))),Ee&&(i(Ee,at,pe),e(Ee).remove()),Ae&&(i(Ae,ut,we),e(Ae).remove()),!C)for(var r=0;r<Pe.length;r++)i(Pe[r],dt,z),i(Pe[r],ft,z);i(Le,lt,be),i(Te,lt,be),n.binding=p.menu=ze,t.current==nn&&(t.current=null),Zt&&te(),i(o,l,nn.dispose),Ft=[]},nn.update=function(t){Ne=!0,i(Le,lt,be),i(Te,lt,be);for(var n=0;n<Pe.length;n++){var r=Pe[n];i(r,dt,z),i(r,ft,z),i(r,vt,$f.cancelEvent),$css.remove(r,yt),e(r).parent().removeClass("c_m_firstchild"),e(r).parent().removeClass("c_m_lastchild")}if(q(),!t){var o=Zt;Zt=!1,G(),Zt=o}Ne=!1,je&&setTimeout(function(){je.update(t)},0)},nn.deactivate=function(){clearTimeout(Kt),te(),Ie=!1},nn.activate=function(){Ie=!0},nn.convertToSubMenu=function(e){nn.setLoc(e)},nn.convertFromSubMenu=function(e){nn.setLoc(e)},nn.updateBinding=function(e){e=e||{},qt=e.edgeOffsets||qt},nn.hide=se,nn.show=function(e,n){var r;if(Ue||It.hasClass("c_msem")){if(!n){var i=$f.scrollTop();Rt==i&&jt&&!$f.locCompare(jt,$f.getLocation(Qt,$,Ot))||(Rt=i,Lt=1),De||!Lt&&!E||(G(),r=1)}if(je||t.current==nn||t.closeAll(),De=1,Tt||ae(),je&&je.update(1),!Ne&&!e&&!nn.isHoverMenu)try{p.focus()}catch(o){}Vt.addClass(wt),le(),t.current=nn}};var rn=0;nn.toggleState=function(e){e&&e.originalEvent&&nn.triggerEventType(e.originalEvent.type),ce()&&(rn=(new Date).getTime(),De||ve()?me()&&se(e,1):nn.show())},nn.isOpen=function(){return De},nn.addStateListener=function(e){Ft.push(e)},nn.removeStateListener=function(e){for(var t=0,n=Ft.length;n>t;t++)if(Ft[t]==e)return void Ft.splice(t,1)},nn.setOffset=function(e){S=e,Lt=1},nn.invalidatePosition=function(){Lt=1},nn.setLoc=function(e){b=e,Lt=1},nn.menuOnmouseover=function(){if(p.unhover&&(clearTimeout(p.unhover),p.unhover=ze),!De&&!p.hover){var e=T;t.tempOpenDelayTimer&&Oe&&(e=1),p.hover=setTimeout(function(){De||nn.show()},e)}},t.tempOpenDelayTimer=0,nn.menuOnmouseout=function(){p.hover&&(clearTimeout(p.hover),p.hover=ze),!De||p.unhover||nn.keepHoverMenuOpen||(nn.tempHoverCloseDelay=nn.tempHoverCloseDelay||P,p.unhover=setTimeout(function(){se()},nn.tempHoverCloseDelay),nn.tempHoverCloseDelay=0,Oe&&(clearTimeout(t.tempOpenDelayTimer),t.tempOpenDelayTimer=setTimeout(function(){t.tempOpenDelayTimer=null},Oe)))},nn.getSelectedEl=function(){return Fe?Fe:He},nn.triggerEventType=function(e){return"undefined"!=typeof e&&(Gt=e),Gt},nn.closeEventSource=function(e){return"undefined"!=typeof e&&(Ve=e),Ve},V()}function n(){($B.Chrome||$B.Safari)&&(i(w,c,t.emptyFunction),i(o,l,n))}function r(t,n,r){t&&e(t).bind(n,r)}function i(t,n,r){t&&e(t).unbind(n,r)}var o=window,a=o.$WebWatson,s="px",c="mouseover",l="unload",u="style",d="width",f="parentNode",g="INPUT",p="h/c7.png,h/c7_rtl.png,",h=".wliveMenu",v=30,m=35,_=300,y=10,C=$B.Mobile,b=$B.IE_M6,w=$f.doc,S='<ul class="uxfa_m c_m t_hovl"></ul>',$='<li class="c_mcp"></li>',I='<a class="uxfa_ml c_ml"><span class="c_mlu"></span></a>',k='<span class="c_chev"></span>',x="click";t.closeCurrent=function(e){t.current&&t.current.hide(e,1)},t.current=null,t.closeAll=function(){for(;t.current;)t.closeCurrent()},t.chevronTypes={SmallLeftDark:["154,17,6,8","&#9668;"],SmallLeftLight:["154,33,6,8","&#9668;"],SmallRightDark:["192,17,6,8","&#9658;"],SmallRightLight:["192,33,6,8","&#9658;"],SmallUpDark:["67,17,8,8","&#9650;"],SmallUpLight:["67,33,8,8","&#9650;"],SmallDownDark:["114,17,8,8","&#9660;"],SmallDownLight:["114,33,8,8","&#9660;"],SmallPlusLeftDark:["145,17,8,9","&#9668;"],SmallPlusLeftLight:["145,33,8,9","&#9668;"],SmallPlusRightDark:["184,17,8,9","&#9658;"],SmallPlusRightLight:["184,33,8,9","&#9658;"],SmallPlusUpDark:["57,17,9,8","&#9650;"],SmallPlusUpLight:["57,33,9,8","&#9650;"],SmallPlusDownDark:["104,17,9,8","&#9660;"],SmallPlusDownLight:["104,33,9,8","&#9660;"],MediumLeftDark:["135,17,9,11","&#9668;"],MediumLeftLight:["135,33,9,11","&#9668;"],MediumRightDark:["175,17,9,11","&#9658;"],MediumRightLight:["175,33,9,11","&#9658;"],MediumUpDark:["45,17,11,9","&#9650;"],MediumUpLight:["45,33,11,9","&#9650;"],MediumDownDark:["92,17,11,9","&#9660;"],MediumDownLight:["92,33,11,9","&#9660;"],LargeLeftDark:["123,17,11,15","&#9668;"],LargeLeftLight:["123,33,11,15","&#9668;"],LargeRightDark:["162,17,11,15","&#9658;"],LargeRightLight:["162,33,11,15","&#9658;"],LargeUpDark:["29,17,15,11","&#9650;"],LargeUpLight:["29,33,15,11","&#9650;"],LargeDownDark:["76,17,15,11","&#9660;"],LargeDownLight:["76,33,15,11","&#9660;"],EllipsisDark:["232,1,16,4",""],EllipsisLight:["232,17,16,4",""],SmallCheckDark:["1,1,12,12",""],SmallCheckMedium:["1,17,12,11",""],SmallCheckDisabled:["1,33,12,11",""],SmallCheckLight:["1,49,12,11",""],LargeCheckDark:["14,1,14,12",""],LargeCheckMedium:["14,17,14,12",""],LargeCheckDisabled:["14,33,14,12",""],LargeCheckLight:["14,49,14,12",""],LargeDotDark:["249,1,8,8",""],LargeDotLight:["249,17,8,8",""],SquareDark:["276,1,8,8",""],SquareLight:["276,17,8,8",""]},t.createChevron=function(e,t){if(b||C)return e[1];var n=e[0]+",",r=$IS.CreateFromConfig(p,n,$Config.imgsBase,t);return r},t.emptyFunction=function(){},function(){($B.Chrome||$B.Safari)&&(r(o,l,n),r(w,c,t.emptyFunction))}(),t.bind=function(e,n,r,i,o,a,s,c,l,u,d,f,g,p){var h={offset:r,alt:void 0==i?0:i,nofocus:o,posabs:a,defaultLoc:s,hoverDelay:c,hoverCloseDelay:l,forceDispose:u,parentEl:d,menuEl:f,eventType:g,sourceEl:p};return t.create(e,n,h)},t.create=function(e,n,r){function i(){var r=!1,i=0,o=1,a=2,s=i;return S.binding?(s=o,S.binding.updateBinding({edgeOffsets:A})):S&&I&&($=$||e.type,S.binding=new t(S,I,n,l,p,h,$,v,m,_,y,k,x,L,T,P,C,M,E,A,N,D,F,B,R),s=o,"mouseover"!=$&&"focus"!=$||I.tagName==g||(s=a),I.menu=S.binding,r=!0),S.binding.triggerEventType(e.type),s==o?S.binding.toggleState():s==a&&S.binding.menuOnmouseover(),r}e=e||event,r=r||{};var o=e.target||e.srcElement,a=["c_ml","c_mcp","c_m"],c=o,l=r.offset,p=void 0==r.alt?1:r.alt,h=r.nofocus,v=r.posabs,m=r.defaultLoc,_=r.hoverDelay,y=r.hoverCloseDelay,C=r.forceDispose,w=r.parentEl,S=r.menuEl,$=r.eventType,I=r.sourceEl,k=r.skipEdgeDetection,x=r.noDockCache,L=r.maxWidth,T=r.dockEl,P=r.showOnEmptyInput,M=r.pressedStateEl,E=r.allowClickOnEmptyInput,A=r.edgeOffsets||{},N=r.sourceRelativeToBody,D=r.disableAnimations,F=r.targetLoc,B=r.arrowKeysNavigate,R=r.bindEnterKey;if(I=I||$f.pn(c,a[0]),I&&("undefined"==typeof I.menu||null===I.menu||C||r.edgeOffsets)&&(w=w||$f.pn(c,a[1])||I[f])){b&&"LI"==w.tagName&&$css.has(w[f],"c_m")&&(w[u][d]=w.offsetWidth+s);for(var H=w.childNodes,j=H.length;j--&&!S;)S=$css.has(H[j],a[2])?H[j]:null;return C&&S&&S.binding&&S.binding.dispose(),i()}return!1},t.createSubmenuContainer=function(){return e(S)},t.createSubmenuA=function(t,n){var r=e(I);return e("span",r).append(t),n&&n.length>0&&r.append(n),r},t.createSubmenuChevron=function(n){var r=n||t.chevronTypes.SmallRightDark,i=e(k);return i.append(t.createChevron(r)),i},t.createSubmenuItem=function(t,n,r){var i=e($);return t&&t.length>0&&i.append(t),n&&n.length>0&&i.append(n),r&&i.bind(x,r),i},o.$menu=t}(window.originaljQuery||jQuery)}),define("csiperf",["validateconfig","jquery-1.7.2","cookie","dependancies","bsi"],function(){!function(e){function t(e,t,s){var c=t[X]||"NA*NA*",l=o(t),u=r(l.time),d=me(pe("ANON",1)).A||J,f=j.$WebWatson,g=f&&f.foundException()?1:0,p=a(_e.latency),h=a(ye.thr),v=c+":"+n(ae.prop,20)+"*"+n(e)+"."+be,m={ANON:d,NL:p,TP:h,CL:ae.mmn||J,MA:ae.mkt,B:ae.build,TR:v,PLT:l.time,IR:!Ce||l.nostart||s?0:1,EX:g};return i(m,l.lapseReport,u),S(m),B(m,ie),m}function n(e,t){t=t||V;var n=e.length;return e=n>t?e.substr(n-t):e,e.encodeUrl()}function r(e){return ne>0&&!s(e)&&e>0?{tprs:Math.round(ne/1024*8/(e/1e3)),size:Math.round(ne/1024*10)/10}:K}function i(e,t,n){if(ye.plt&&(e.PLM=ye.plt),ye.com&&(e.PCT=ye.com),ye.req&&(e.PCD=ye.req),n&&(e.SZ=n.size,e.TPRS=n.tprs),t)for(var r=0;r<t.length;r++){var i=t[r];e[i.key]=i.val}}function o(e){Z._ttg&&Z.lapse.push({s:"ttg",t:Z._ttg});var t=fe.timeStamp;(s(t)||0==t)&&(t=I());var n=e.ST||0;0==n&&window.performance&&window.performance.timing&&(n=window.performance.timing.navigationStart,Ce=1),Z.ttxDeferred.resolve(n),Z.TTxDeferred.resolve(n),Z.addCsd("st",n);var r=t-n,i=d(n,t,Z.lapse);return{nostart:0==n,time:r>0?r:0,lapseReport:i}}function a(e){var t=parseInt(e);return isNaN(t)?0:t}function s(e){return"undefined"==typeof e||!e||J==e}function c(){var e={latency:_e.latency,throughput:_e.throughput};P(e),_e=e}function l(){p(),c(),O.deleteCookie(Q,ae.sd)}function u(){try{var e=window.location;return e.hostname+e.pathname}catch(t){return document.domain}}function d(e,t,n){var r=[];if(n&&n.length>1&&t-e>0){n[0]={s:"Start",t:e};for(var i=0;i<n.length-1;i++){var o=(n[i],n[i+1]);if(!s(o)){var a=o.t-e;if(a>0){r[r.length]={key:"L."+o.s,val:a}}}}}return r}function f(e,n,r,i){e=e||u(),ne=a(r.p),(s(ne)||0>=ne)&&(ne=s(n)?0:a(n));var o=_e[G],l=_e[X];l&&o&&(r[X]="0*"+l+"*",r[G]=o,Ce=1,c()),Z.GT1Param=t(e,r,i),Z.payloadHash=H(Z.GT1Param)}function g(e){e[X]=J,e[G]=J,L(e)}function p(){ne=0,fe.timeStamp=0,re={},ie={},Z.csd={},Z.lapse=[{}],Z._ttg=0,Z.payloadLength=0,ce.rt=0}function h(e,t){if(!le.enabled)return void l();!$BSI.sendToIdss()&&Z.payloadHash.ANON&&Z.fireCsiPerfBeacon(),s(e)&&(e=u());var n=x();n[X]=e+"."+be,n[G]=I(),n.p=s(t)?0:a(t),L(n)}function v(){var e=window.performance;if(e){var t=e.timing;if(t){var n=t.navigationStart;m("jsPlt",n,t.loadEventEnd),m("1Pnt",n,t.msFirstPaint),m("domIn",n,t.domInteractive),m("rdir",t.redirectStart,t.redirectEnd),m("dns",t.domainLookupStart,t.domainLookupEnd),m("tcp",t.connectStart,t.connectEnd),m("req",t.requestStart,t.responseEnd),m("resp",t.responseStart,t.responseEnd)}var r=e.navigation;r&&($CSIPerf.addNtd("navType",r.type),$CSIPerf.addNtd("redirectCount",r.redirectCount))}}function m(e,t,n){t&&n&&n>t&&$CSIPerf.addNtd(e,n-t)}function _(e){if(!le.enabled)return void l();var t=x();v(),f(se.pn,Z.payloadLength,t,e)}function y(){if(le.enabled){var e=Z.GT1Param,t=$(e)||!e.IR?"nostart":ve(e);ue.enabled&&$BSI.addBeaconParams({csiperf:t})}}function C(){if(le.enabled){var e=Z.GT1Param;ge.enabled&&ce.enabled&&e&&Z.fireOnLoad&&(delete e.ANON,delete e.MA,delete e.CL,e.RT=ce.rt,e.bicild="",W.fire(ae.handlerBaseUrl+"/Handlers/PerfMonitor.mvc",$BSI.addHandlerDPs(e),ce.render?w:0,0,1))}Z.GT1Param=null}function b(e,t){if(e){var n=e.indexOf(" PLT: ");n>-1&&(e=e.substr(0,n)),e+=t}else e=t;return e}function w(){var e=pe("SBSPLT");if(e){var t=" PLT: "+parseInt(e)+"ms";try{window.top.document.title=b(window.top.document.title,t)}catch(n){document.title=b(document.title,t)}}}function S(e){$(Z.csd)||F(e,Z.csd),$(re)||F(e,re)}function $(e){if(e)for(var t in e)return!1;return!0}function I(){return(new Date).getTime()}function k(e){if(ae=$Config,se=ae.BSI||{},ce=se.SBSPLT||{},le=se.CSIPerf||{},ue=le.IDSS||{},de=le.Trace||{},fe=le.page||{},ge=le.WLXFD||{},_csiPerfConfigOmniture=le.Omniture||{},!le.disableTimers){if(!le.skipStopTimer&&(_(e),y(),C(),le.enabled&&!le.pltDetectionDisabled)){var t=x(),n=ae.prop;t.l!=n&&(t.l=n,L(t),setTimeout(T,Y))}g(x()),$BSI.sendToIdss()&&p(),ee=(new Date).getTime()}}function x(){var e=pe(Q,1);return e==te?oe:(te=e,oe=me(e))}function L(e){oe=e,te=ve(e),he(Q,te,ae.sd,K,K,1)}function T(){function e(){var e=(new Date).getTime()-t;"1"==pe("pltmode",1)&&(_e.latency=e,P(_e),O.deleteCookie("pltmode",ae.sd,"/"))}var t=(new Date).getTime(),n={bicild:"",v:ae.build};W.fire(ae.handlerBaseUrl+"/Handlers/Plt.mvc",n,e,e,1)}function P(e){var t=new Date;he(q,ve(e),ae.sd,K,new Date(t.getUTCFullYear()+1,t.getUTCMonth(),t.getUTCDay()),1)}function M(e,t,r,i,o){if(!r&&o&&!le.disableTimers){var a=s(se.pn)?u():se.pn;Z.setPerformanceId(be||E(t));var c=n(ae.prop,20)+"*"+n(a);h(c,Z.payloadLength),Ce=1}}function E(e){for(var t=J;e&&e.getAttribute;){var n=e.getAttribute("pid");if(n){t=n;break}e=e.parentNode}return t}function A(e){le.enabled&&de.enabled&&ce.enabled&&W.fire(ae.handlerBaseUrl+"/Handlers/Bandwidth.mvc",$BSI.addLDToHash($BSI.addHandlerDPs(e)))}function N(e,t,n){var r,i=this,o=(new Date).getTime(),a={};i.lapse=[],i.addCsd=function(e,t){D(a,e,t)},i.addLapse=function(e){i.lapse.push({s:e,t:(new Date).getTime()})},i.endTrace=function(){if(!r&&(r=1,le.enabled&&de.enabled&&ce.enabled)){var s=(new Date).getTime(),c={tc:e,tcs:t,ti:s-o,th:o-$BSI.headTime,to:ee?o-ee:-1};R(c,i.lapse,o,s),F(c,a);var l=ae.handlerBaseUrl+"/Handlers/Trace.mvc";n&&(c.wli="csi",l=se.BICI.beaconUrl),W.fire(l,$BSI.addLDToHash($BSI.addHandlerDPs(c)))}}}function D(e,t,n){e[t]=n}function F(e,t){for(var n in t)e["C."+n]=t[n]}function B(e,t){for(var n in t)e["N."+n]=t[n]}function R(e,t,n,r){for(var i=t.length,o=0;i>o;o++){var a=t[o];e["L."+a.s]=a.t-n}}function H(e){var t={};for(var n in e)0!==n.indexOf("C.")&&0!==n.indexOf("N.")&&"ANON"!==n&&"CL"!==n&&"B"!==n&&"TR"!==n&&"IR"!==n&&"PLT"!==n||(t[n]=e[n]);if(t["C.TR"]&&0==t["C.TR"].indexOf("0-")&&t.TR){var r=t.TR.substring(0,t.TR.indexOf(":"));t["C.TR"]=t["C.TR"].replace("0-",r+".")}return e["L.ttg"]&&(t[Z.timingPrefix+"g"]=e["L.ttg"]),t}var j=window,W=j.$Beacon,O=j.$Cookie,U=j.$Utility,Q=(j.Debug,"BP"),V=40,q="wlidperf",z="wl_preperf",X="FR",G="ST",K=null,J="",Y=5e3,Z=$CSIPerf;Z.GT1Param=null,Z.payloadLength=0,Z.TTxDeferred=e.Deferred(),Z.ttxDeferred=e.Deferred(),Z.payloadHash={},Z.fireOnLoad=!0,Z.timingPrefix="T.";var ee,te,ne=0,re={},ie={},oe={},ae=j.$Config,se=ae.BSI||{},ce=se.SBSPLT||{},le=se.CSIPerf||{},ue=le.IDSS||{},de=le.Trace||{},fe=le.page||{},ge=le.WLXFD||{},pe=O.getCookie,he=O.setCookie,ve=U.serialize,me=U.deserialize,_e=me(pe(q,1)),ye=me(pe(z,1)),Ce=se.ir,be=J;Z.lapseTimer=function(e,t){var n;n=t&&t>0?t:a(I()),Z.lapse.push({s:e,t:n})},Z.setUploadTP=function(e,t,n,r){var i={dir:"up",sz:e,ti:t,d:r,pn:se.pn,ext:n};A(i)},Z.setDownloadTP=function(e){var t={dir:"down",pn:se.pn,rate:e};A(t)},Z.startTrace=function(e,t,n){return new N(e,t,n)},Z.endTrace=function(e,t){},Z.setPerformanceId=function(e){be=n(e,20)},Z.addCsd=function(e,t){D(re,e,t)},Z.csdContains=function(e){return re[e]},Z.addNtd=function(e,t){D(ie,e,t)},Z.clearTTxDeferred=function(){Z.TTxDeferred=null},Z.fireCsiPerfBeacon=function(){W.fire(se.BICI.beaconUrl,Z.payloadHash),p(),Z.ttxDeferred=e.Deferred(),Z.payloadHash={}},Z.addTTxEvent=function(e,t){Z.ttxDeferred&&Z.ttxDeferred.done(function(n){Z.payloadHash[Z.timingPrefix+e]=t-n})},Z.dontFireOnLoad=function(){Z.fireOnLoad=!1,$BSI.sendToIdss(!1)},$BSI.addLoadedCallback(k),$BSI.addNavCallback(M)}(window.originaljQuery||jQuery)}),define("date",[],function(){!function(){Date.now||(Date.now=function(){return(new Date).getTime()})}()}),define("reporter",["jquery-1.7.2","pagestats"],function(){!function(){function e(e){var t=e.error;t&&(e.errorCode=e.errorCode||m.getErrorCode(t),e.stackTrace=e.stackTrace||t.stack,e.resultDetails=e.resultDetails||{},t.name&&(e.resultDetails.name=t.name),t.message&&(e.resultDetails.message=t.message))}function t(){i&&(o.clearTimeout(i),i=null);var e=o.$Config,t=e.ContactCache;if(t&&t.logEnabled){var n=JSON.stringify({actions:m.actionHistory});m.actionHistory=[],$Network.fetchXML(e.handlerBaseUrl+"/Handlers/PeopleApi/log.mvc?canary="+t.canary.encodeURIComponent(),function(){},"POST",n)}}function n(e){var n=window.$Config.ContactCache;if(n){var a=n.logVerbose;a&&r(e),m.actionHistory.length>=n.actionHistoryMaxLength?(n&&n.logVerbose&&t(),m.actionHistory.shift()):n.logVerbose&&n.logEnabled&&!i&&(i=o.setTimeout(t,5e3)),m.actionHistory.push(e)}}function r(e){if(o[d]&&o[d][p]){var t=[e.eventType];if(e.message&&t.push(e.message),e.resultCode&&t.push(e.resultCode),e.stackTrace&&t.push(e.stackTrace),e.resultDetails)for(var n in e.resultDetails)t.push(n+":"+e.resultDetails[n]);o[d][p]("People: "+t.join(" - "))}}var i,o=window,a=o.wLive,s=a.People={},c=o.$ScenarioQoS,l=a.ScenarioQoSStats,u="WL_People_Cache",d="console",f="error",g="errorType",p="log",h="undefined",v={MissingTicket:{type:"c"},PassportAuthFail:{type:"c"},InvalidPassportUser:{type:"c"},401:{type:"c"},5000:{type:"f",name:"ProxyLoadFailure"},CantAccessIframeStorage:{type:"c"},15:{type:"c"},18:{type:"c"},22:{type:"c",name:"StorageExceededOrDisabled"},NoStorage:{type:"c"}},m=s.Reporter={isQosEnabled:!1,lastError:null,actionHistory:[],logAction:function(e){m.log({eventType:e})},logError:function(e,t,n){m.log({eventType:e,error:t},n)},logDetails:function(e,t,n){m.log({eventType:e,resultDetails:t},n)},log:function(r,i){r&&r.eventType&&(e(r),n(r),i&&t())},verbose:function(){for(var e=0;e<m.actionHistory.length;e++)r(m.actionHistory[e]);var t=window.$Config.ContactCache;t&&(t.logVerbose=!0)},handleError:function(e,t,n,r,i,o,a,s,c,l){m.log({eventType:"PageError",resultCode:r,stackTrace:a,resultDetails:{message:e,jsUrl:t,jsLine:n,data:c,hostname:i,action:s,isHidden:l}},!0)},startScenario:function(e){var t=u+"_"+e;return m.isQosEnabled?c.startScenario(t,u):null},stopScenario:function(e,t,n){if(n&&!m.lastError&&(m.lastError=n),m.isQosEnabled){var r=void 0,i=!1;if(!t&&n){var o=v[n];o&&o.type&&(r=o.type,i="f"===r)}if(e.id){var a=!t,s=t?null:n;m.log({eventType:e.id,resultCode:s,success:t,isQosImpacting:i},a)}c.stopScenario(e,t,n,r)}},addStats:function(e,t,n,r){var i=u+"_"+e,o=n?v[n]:null,a=o&&o.name?o.name:n;a&&(this.lastError=a);var s=o?"f"==o.type:!1,c=r?r.id:null;if(m.log({eventType:i,resultCode:a,success:!!n,isQosImpacting:s,resultDetails:{api:i,property:u,scenario:c}}),m.isQosEnabled&&r){var d={api:i,dependent:u};o&&(d[g]=o.type),a&&(d[f]=a),l.add(d,t,r)}},getErrorCode:function(e,t){return t=t||"Unknown",e.errorCode?e.errorCode:e.code?e.code:t},isNullOrUndefined:function(e){return typeof e===h||null==e}}}()}),define("idletimer",["reporter"],function(){!function(e){function t(t,c){function l(){s.clearTimeout(g),g=s.setTimeout(f,n)}function d(){_&&(c&&c(),_=!1),l()}function f(){_||(t&&t(),_=!0)}var g,p=this,h=u.IE?"MSPointerDown":"touchstart",v=u.IE?"MSPointerMove":"touchmove",m=u.IE?"MSPointerUp":"touchend",_=!1,y=e(s.document);y.bind(a,d),y.bind(i,d),y.bind(o,d),y.bind(h,d),y.bind(v,d),y.bind(m,d),d(),p.dispose=function(){s.clearTimeout(g),e(s).unbind(r,p.dispose);try{y.unbind(a,d),y.unbind(i,d),y.unbind(o,d),y.unbind(h,d),y.unbind(v,d),y.unbind(m,d)}catch(n){}t=null,c=null},e(s).bind(r,p.dispose)}var n=3e5,r="unload",i="mousedown",o="mousewheel",a="keydown",s=window,c=s.wLive,l=c.People,u=(l.Reporter,s.$B);l.IdleTimer=t}(window.originaljQuery||jQuery)}),define("names",["idletimer"],function(){!function(){function e(e,t,n,o,a){function c(e){return u(e,["personal","work","other"])}function l(e){return u(e,["mobile","home","home2","work","work2","pager","homeFax","workFax","mobile2","companyPhone","other"])}function u(e,t,n){var r={};if(e)for(var i=0;i<t.length;i++)s.Reporter.isNullOrUndefined(e[i])||(n?r[t[i]]=u(e[i],n):r[t[i]]=e[i]);return r}function d(){return t||"0"}function f(e){var t=m[e];return t||(t=g(e),m[e]=t),t}function g(e){for(var t=e.split("|"),n=["if (!firstName && !lastName) { return null }; var n = [], s = '';"],r=0,o=t.length;o>r;r+=2){var a=i[t[r]];n.push("if ("+a+") {"),n.push(" if (n.length) { n.push(s); } "),n.push(" n.push("+a+"); "),n.push("s = '"+t[r+1]+"';"),n.push("} else {s = s || '"+t[r+1]+"';}")}return n.push("return n.join('').trim();"),new Function("title","firstName","middleName","lastName","suffix",n.join(""))}function p(e,t,n,r,i){return h(e,t,null,r,i)}function h(e,t,n,r,i){var o=[];return t||r?(r&&o.push(r),i&&r&&(o.push(" "),o.push(i)),t&&(r&&o.push(", "),e&&(o.push(e),o.push(" ")),o.push(t)),n&&(!t&&r?o.push(", "):o.push(" "),o.push(n)),o.join("").trim()):null}for(var v=this,m=[],_=0;11>=_;_++){var y=r[_+""];y.fullName=f(y.fn),y.fullNameReverse=y.lnf?y.fullName:h,y.displayName=f(y.dn),y.displayNameReverse=y.lnf?y.displayName:p,y.sortName=f(y.sn),y.sortNameReverse=y.snr?f(y.snr):y.sortName}v.noNameString=n||"",v.profileUrl=o||"",v.photosUrl=a||"",v.isLastNameFirst=function(){return e},v.formatName=function(e,t,n,i,o,a,s){var c=e||d(),l=r[c][t];return l(n,i,o,a,s)},v.getDefaultNameType=d,v._isLastNameFirstForNameType=function(e){e=e||d();var t=r[e];return t&&t.lnf},v._buildDate=function(e){var t=null;return e&&(t=u(e,["year","month","day"]),1900!=t.year&&1904!=t.year||(t.year=null)),t},v._buildEmails=c,v._buildEmailFlags=function(e){return c(e)},v._buildEmailCapabilities=function(e){return c(e)},v._buildPhones=l,v._buildPhoneFlags=function(e){return l(e)},v._buildAddresses=function(e){return u(e,["home","work","other"],["street","city","state","zipCode","country"])}}var t="F| |L",n="L| |F",r={0:{fn:"T| |F| |M| |L| |S",dn:"T| |F| |L| |S",sn:t,snr:n,lnf:!1},1:{fn:"F| |L| |M| |T| |S",dn:"F| |L| |T| |S",sn:t,snr:n,lnf:!1},2:{fn:"F| |L| |M| |T| |S",dn:"F| |L| |T| |S",sn:t,snr:n,lnf:!1},3:{fn:"F| |M| |L| |T| |S",dn:"F| |L| |T| |S",sn:t,snr:n,lnf:!1},4:{fn:"F| |M| |L| |T| |S",dn:"F| |L| |T| |S",sn:t,snr:n,lnf:!1},5:{fn:"L| |F| |M| |T| |S",dn:"L| |F| |T| |S",sn:"L| |F",lnf:!0},6:{fn:"T| |F| |M| |L| |S",dn:"T| |F| |L| |S",sn:t,snr:n,lnf:!1},7:{fn:"T| |F| |L| |M| |S",dn:"T| |F| |L| |S",sn:t,snr:n,lnf:!1},8:{fn:"T| |L||F| |M| |S",dn:"T| |L||F| |S",sn:"L||F",lnf:!0},9:{fn:"T| |L| |F| |M| |S",dn:"T| |L| |F| |S",sn:"L| |F",lnf:!0},10:{fn:"T| |L| |F| |M| |S",dn:"T| |L| |F| |S",sn:"L| |F",lnf:!0},11:{fn:"T| |L| |M| |F| |S",dn:"T| |L| |F| |S",sn:"L| |F",lnf:!0}},i={T:"title",F:"firstName",M:"middleName",L:"lastName",S:"suffix"},o=window,a=o.wLive,s=a.People;s.Names=e}()}),define("messagingaddress",["names"],function(){!function(e){function t(e,t){var n=this;n._c=e,n._mri=t,n._aa=!1,n._p=0,n._ccl=!1,n._cch=!1,n._cgch=!1}var n="changed";window.wLive.People.MessagingAddress=t;var r=t.prototype;r.isActiveAddress=function(){return this._aa},r.getPresence=function(){return this._p},r.canCall=function(){return this._ccl},r.canChat=function(){return this._cch},r.canGroupChat=function(){return this._cgch},r.getDifferentiator=function(){var e=this,t=e._c,n=t.getSourceId();return"GOOG"==n?e._getMri():"SCD"==n||"SKYPE"==n?t.getNickname():t.getDisplayNameWithFallback()},r._getContact=function(){return this._c},r._getMri=function(){return this._mri},r._setProperty=function(t,r,i,o,a){this._aa==t&&this._p==r&&this._ccl==i&&this._cch==o&&this._cgch==a||(this._aa=t,this._p=r,this._ccl=i,this._cch=o,this._cgch=a,e(this._getContact().getPerson()).triggerHandler(n))}}(window.originaljQuery||jQuery)}),define("peoplecontactdetails",["messagingaddress"],function(){!function(){function e(e,t,n){var r=this;r._d=e,r._pd=t,r._n=n,r._b=e[2],r._a=null,r._an=null}var t=window.wLive.People;t.ContactDetails=e;var n=e.prototype;n.getAddresses=function(){var e=this;if(!e._a){var t=e._b,n=e._pd[24]||[],r=e._d[25]||[],i=[65536&t?n[0]:r[0],t&1<<17?n[1]:r[1],t&1<<18?n[2]:r[2]];
e._a=e._n._buildAddresses(i)}return e._a},n.getSignificantOther=function(){var e=this;return e._b&1<<20?e._pd[25]:e._d[26]},n.getAnniversary=function(){var e=this;if(!e._an){var t=e._b&1<<20?e._pd[26]:e._d[27];e._an=e._n._buildDate(t)}return e._an},n.getWebsite=function(){var e=this;return e._b&1<<21?e._pd[27]:e._d[28]},n.getJobTitle=function(){var e=this;return 16&e._b?e._pd[28]:e._d[29]},n.getNotes=function(){var e=this;return e._b&1<<22?e._pd[29]:e._d[30]}}()}),define("peoplecontact",["peoplecontactdetails"],function(){!function(){function e(e,t,n,r){var i=this;i._d=e,i._p=t,i._pd=n,i._n=r,i._b=e[2],i._cd=null,i._bd=null,i._e=null,i._eie=null,i._ec=null,i._ph=null,i._m=null,i._pie=null}var t=8,n=window.wLive.People;n.ContactState={deleted:-1,shell:0,meContact:1,pending:2,follower:3,twoWay:4,rolodex:5,nonFriend:6,declined:7,implicitContact:8,shellContactFanPage:9,enhancedShellContact:10,implicitShellContact:11,invitationShellContact:12},n.Contact=e;var r=e.prototype;r.getPerson=function(){return this._p},r.getId=function(){var e=this;return 1&e._b?e._pd[0]:e._d[0]},r.getPassportMemberName=function(){var e=this;return"WL"===e._d[4]?e._p.getPassportMemberName():null},r.getMessagingAddresses=function(){var e=this;if(!e._m){e._m=[];for(var t=e.getMris(),r=0;r<t.length;r++)t[r]&&e._m.push(new n.MessagingAddress(e,t[r]))}return e._m},r.getDisplayName=function(){var e=this;return e._n.formatName(e.getNameType(),"displayName",e.getTitle(),e.getFirstName(),e.getMiddleName(),e.getLastName(),e.getSuffix())},r.getFullName=function(){var e=this;return e.getOrderedName()||e._n.formatName(e.getNameType(),"fullName",e.getTitle(),e.getFirstName(),e.getMiddleName(),e.getLastName(),e.getSuffix())},r.getDisplayNameWithFallback=function(){var e=this,t=e.getDisplayName();if(t=t||e.getNickname(),t=t||e.getCompanyName(),t=t||e.getPassportMemberName(),!t){var n=e.getEmails();t=t||n.personal,t=t||n.work,t=t||n.other}if(!t){var r=e.getPhones();t=t||r.mobile,t=t||r.home,t=t||r.home2,t=t||r.work,t=t||r.work2,t=t||r.other}return t||e._n.noNameString},r.getContactState=function(){return this._d[1]},r.getPromotionBitmap=function(){return this._b},r.getMris=function(){return this.getPerson().isMe()?["1:"+this.getPerson().getPassportMemberName()]:this._props()[0]||[]},r.getIsHidden=function(){return this._props()[1]},r.getOfflineImEnabled=function(){return this._props()[2]},r.getSourceId=function(){return this._d[4]},r.getObjectId=function(){return this._d[5]},r.getDomainTag=function(){return this._d[6]},r.getFirstName=function(){var e=this;return e._b&t?e._pd[2]:e._d[7]},r.getMiddleName=function(){var e=this;return e._b&t?e._pd[18]:e._d[18]},r.getLastName=function(){var e=this;return e._b&t?e._pd[3]:e._d[8]},r.getTitle=function(){var e=this;return e._b&t?e._pd[19]:e._d[20]},r.getSuffix=function(){var e=this;return e._b&t?e._pd[20]:e._d[21]},r.getEmails=function(){var e=this;if(!e._e){var t=e._b,n=e._pd[4],r=e._d[9]||[],i=[32&t?n[0]:r[0],64&t?n[1]:r[1],128&t?n[2]:r[2]];e._e=e._n._buildEmails(i)}return e._e},r.getPrimaryEmail=function(){var e=this,t=e.getEmails(),n=t.personal||t.work||t.other||e.getPassportMemberName();return n},r.getPhones=function(){var e=this;if(!e._ph){var t=e._b,n=e._pd[5],r=e._d[10]||[],i=[256&t?n[0]:r[0],512&t?n[1]:r[1],1024&t?n[2]:r[2],2048&t?n[3]:r[3],4096&t?n[4]:r[4],8192&t?n[5]:r[5],16384&t?n[6]:r[6],32768&t?n[7]:r[7],t&1<<23?n[8]:r[8],t&1<<24?n[9]:r[9],t&1<<25?n[10]:r[10]];e._ph=e._n._buildPhones(i)}return e._ph},r.getCompanyName=function(){var e=this;return 16&e._b?e._pd[10]:e._d[11]},r.getUserTile=function(){var e=this;return 4&e._b?e._pd[11]:e._d[12]},r.getEmailImEnabled=function(){var e=this;return e._eie||(e._eie=e._n._buildEmailFlags(e._d[13])),e._eie},r.getEmailCapabilities=function(){var e=this;return e._ec||(e._ec=e._n._buildEmailCapabilities(e._d[14])),e._ec},r.getPhoneImEnabled=function(){var e=this;return e._pie||(e._pie=e._n._buildPhoneFlags(e._d[15])),e._pie},r.getFavoriteOrder=function(){return this._d[16]},r.getBirthday=function(){var e=this;if(!e._bd){var t=e._bd&1<<19?e._pd[16]:e._d[17];e._bd=e._n._buildDate(t)}return e._bd},r.getNickname=function(){var e=this,n=e._b&t?e._pd[17]:e._d[19],r=e.getSourceId();return r&&"TWITR"===r.toUpperCase()&&n&&!n.startsWith("@")&&(n="@"+n),n},r.getYomiFirstName=function(){var e=this;return e._b&t?e._pd[21]:e._d[22]},r.getYomiLastName=function(){var e=this;return e._b&t?e._pd[22]:e._d[23]},r.getYomiCompanyName=function(){var e=this;return e._b&t?e._pd[23]:e._d[24]},r.getOrderedName=function(){var e=this;return e._b&t?e._pd[30]:e._d[31]},r.getNameType=function(){var e=this;return e._b&t?e._pd[31]:e._d[32]},r.getSkypeId=function(){return this._d[34]},r.getIsAnonymous=function(){return this._d[35]},r.getLinkedMsa=function(){return this._d[36]},r.getLinkedFacebookId=function(){return this._d[37]},r.getIsBidirectional=function(){return this._d[38]},r.getSkypePendingOutbound=function(){return this._d[39]},r.getIsBlocked=function(){return this._d[40]},r.getDetails=function(){var e=this;return e._cd||(e._cd=new n.ContactDetails(e._d,e._pd,e._n)),e._cd},r._props=function(){return this._d[3]||[]}}()}),define("persondetails",["peoplecontact"],function(){!function(){function e(e,t){var n=this;n._d=e,n._n=t,n._a=null,n._an=null}var t=window.wLive.People;t.PersonDetails=e;var n=e.prototype;n.getAddresses=function(){var e=this;return e._a||(e._a=e._n._buildAddresses(e._d[24])),e._a},n.getSignificantOther=function(){return this._d[25]},n.getAnniversary=function(){var e=this;return e._an||(e._an=e._n._buildDate(e._d[26])),e._an},n.getWebsite=function(){return this._d[27]},n.getJobTitle=function(){return this._d[28]},n.getNotes=function(){return this._d[29]},n.getAntilinks=function(){return this._d[32]}}()}),define("person",["persondetails"],function(){!function(e){function t(t,n){var r=this;r._d=t,r._n=n,r.$changes=e(this),r._c=null,r._e=null,r._p=null,r._b=null,r._ce=null,r._pd=null,r._m=null}var n=window,r=n.wLive.People;r.Person=t;var i=t.prototype;i.getId=function(){return this._d[0]},i.getContacts=function(){var e=this;if(!e._c){e._c=[];var t=this._d[1];if(t)for(var n=0;n<t.length;n++)e._c.push(new r.Contact(t[n],e,e._d,e._n))}return e._c},i.getMessagingRelevance=function(){var e=parseInt(this._d[33]);return isNaN(e)&&(e=0),e},i.getPeopleRelevance=function(){var e=parseInt(this._d[34]);return isNaN(e)&&(e=0),e},i.getMessagingAddresses=function(){var e=this;if(!e._m){for(var t=e.getContacts(),n=[],r=0;r<t.length;r++)"SKYPE"==t[r].getSourceId()&&n.addRange(t[r].getMessagingAddresses());for(r=0;r<t.length;r++)"WL"==t[r].getSourceId()&&n.addRange(t[r].getMessagingAddresses());for(r=0;r<t.length;r++)"SKYPE"!=t[r].getSourceId()&&"WL"!=t[r].getSourceId()&&n.addRange(t[r].getMessagingAddresses());e._m=n}return e._m},i.isOnline=function(e){for(var t=this,n=t.getMessagingAddresses(),r=0;r<n.length;r++)if((!e||n[r].isActiveAddress())&&1==n[r].getPresence())return!0;return!1},i.canCall=function(e){for(var t=this,n=t.getMessagingAddresses(),r=0;r<n.length;r++)if((!e||n[r].isActiveAddress())&&n[r].canCall())return!0;return!1},i.canChat=function(e){for(var t=this,n=t.getMessagingAddresses(),r=0;r<n.length;r++)if((!e||n[r].isActiveAddress())&&n[r].canChat())return!0;return!1},i.canGroupChat=function(e){for(var t=this,n=t.getMessagingAddresses(),r=0;r<n.length;r++)if((!e||n[r].isActiveAddress())&&n[r].canGroupChat())return!0;return!1},i.getDisplayName=function(){var e=this;return e._n.formatName(e.getNameType(),"displayName",e.getTitle(),e.getFirstName(),e.getMiddleName(),e.getLastName(),e.getSuffix())},i.getFullName=function(){var e=this;return e.getOrderedName()||e._n.formatName(e.getNameType(),"fullName",e.getTitle(),e.getFirstName(),e.getMiddleName(),e.getLastName(),e.getSuffix())},i.getDisplayNameWithFallback=function(){var e=this,t=e.getDisplayName();if(t=t||e.getNickname(),t=t||e.getCompanyName(),t=t||e.getPassportMemberName(),!t){var n=e.getEmails();t=t||n.personal,t=t||n.work,t=t||n.other}if(!t){var r=e.getPhones();t=t||r.mobile,t=t||r.home,t=t||r.home2,t=t||r.work,t=t||r.work2,t=t||r.other}return t||e._n.noNameString},i.isLastNameFirst=function(){var e=this,t=e.getNameType();return e._n._isLastNameFirstForNameType(t)},i.getProfileUrl=function(){var e=this,t=e._d[7];return t?e._n.profileUrl.replace("{cid}",e._d[7]):""},i.getPhotosUrl=function(){var e=this,t=e._d[7];return t?e._n.photosUrl.replace("{cid}",e._d[7]):""},i.isMe=function(){var e=this._d[1][0];return e&&1===e[1]},i.isPendingInbound=function(){for(var e=this._d[1],t=!1,n=Math.min(e.length,3),r=0;n>r;r++){var i=e[r];if(i&&2===i[1]){t=!0;break}}return t},i.isHidden=function(){for(var e=this._d[1],t=!1,n=Math.min(e.length,3),r=0;n>r;r++){var i=e[r];if(i&&(6===i[1]&&i[3]&&1===i[3][1]||2===i[1])){t=!0;break}}return t},i.isFanPage=function(){var e=this._d[1][0];return e&&9===e[1]},i.getFirstName=function(){return this._d[2]},i.getLastName=function(){return this._d[3]},i.getEmails=function(){var e=this;return e._e||(e._e=e._n._buildEmails(e._d[4])),e._e},i.getPhones=function(){var e=this;return e._p||(e._p=e._n._buildPhones(e._d[5])),e._p},i.getCid=function(){return this._d[6]},i.getHexCid=function(){return this._d[7]},i.getOnHideList=function(){return this._d[8]},i.getTrustLevel=function(){return this._d[9]},i.getCompanyName=function(){return this._d[10]},i.getUserTile=function(){return this._d[11]},i.getCategoryIds=function(){return this._d[12]?this._d[12]:[]},i.getIsFavorite=function(){return this._d[13]},i.getFavoriteOrder=function(){return this._d[14]},i.getPassportMemberName=function(){return this._d[15]},i.getBirthday=function(){var e=this;return e._b||(e._b=e._n._buildDate(e._d[16])),e._b},i.getNickname=function(){return this._d[17]},i.getMiddleName=function(){return this._d[18]},i.getTitle=function(){return this._d[19]},i.getSuffix=function(){return this._d[20]},i.getYomiFirstName=function(){return this._d[21]},i.getYomiLastName=function(){return this._d[22]},i.getYomiCompanyName=function(){return this._d[23]},i.getOrderedName=function(){return this._d[30]},i.getNameType=function(){return this._d[31]||this._n.getDefaultNameType()},i.getVersion=function(){return this._d[35]},i.getContactEmails=function(){function e(e,t,n){if(n){var r=n.toLowerCase();t[r]||(t[r]=1,e.push(n))}}var t=this;if(!t._ce){for(var n=[],r={},i=t.getContacts(),o=0;o<i.length;o++){var a=i[o].getEmails();e(n,r,a.personal),e(n,r,a.work),e(n,r,a.other)}e(n,r,t.getPassportMemberName()),t._ce=n}return t._ce},i.getDetails=function(){var e=this;return e._pd||(e._pd=new r.PersonDetails(e._d,e._n)),e._pd},i._update=function(e){var t=this;t._d=e,t._c=null,t._e=null,t._p=null,t._b=null,t._ce=null,t._pd=null,t._m=null},i._getHashKeys=function(){for(var e=this,t=e._d,n=[t[0],t[6],t[7]],r=t[1]||[],i=0;i<r.length;i++)n.push(r[i][0]);return n}}(window.originaljQuery||jQuery)}),define("group",["person"],function(){!function(e){function t(t){this._d=t,this.$changes=e(this)}window.wLive.People.Group=t;var n=t.prototype;n.getId=function(){return this._d[0]},n.getName=function(){return this._d[1]},n.getCid=function(){return this._d[2]},n.getHexCid=function(){return this._d[3]},n.getEmail=function(){return this._d[4]},n._update=function(e){return this._d=e},n._getHashKeys=function(){return[this._d[0]]}}(window.originaljQuery||jQuery)}),define("category",["group"],function(){!function(e){function t(t){this._d=t,this.$changes=e(this)}window.wLive.People.Category=t;var n=t.prototype;n.getId=function(){return this._d[0]},n.getName=function(){return this._d[1]},n.getIsFavorite=function(){return this._d[2]},n._update=function(e){return this._d=e},n._getHashKeys=function(){return[this._d[0]]}}(window.originaljQuery||jQuery)}),define("service",["category"],function(){!function(e){function t(t){this._d=t,this.$changes=e(this)}window.wLive.People.Service=t;var n=t.prototype;n.getId=function(){return this._d[0]},n.getName=function(){return this._d[1]},n.getTokenState=function(){return this._d[2]},n.getSupportsIm=function(){return this._d[3]},n.getSupportsContactAgg=function(){return this._d[4]},n.getIconUrlThumbnail=function(){return this._d[5]},n.getIconUrlMiniPhoto=function(){return this._d[6]},n.getIconUrlLargePhoto=function(){return this._d[7]},n.getProfileUrl=function(){return this._d[8]},n.getPhotosUrl=function(){return this._d[9]},n.getSendMessageUrl=function(){return this._d[10]},n.getReportAbuseUrl=function(){return this._d[11]},n.getRank=function(){return this._d[12]},n.getOnHideList=function(){return this._d[13]},n._getHashKeys=function(){return[this._d[0]]},n._update=function(e){this._d=e}}(window.originaljQuery||jQuery)}),define("settings",["service"],function(){!function(e){function t(t){this._d=t,this.$changes=e(this)}var n=t.prototype;n.getMessengerTrustLevel=function(){return this._d[0]},n.getImHistoryEnabled=function(){return 1==this._d[1]},n.getAbSettings=function(){return this._d[2]},n.getWebIMSettings=function(){return this._d[3]},n.getSkypePendingInboundCount=function(){return this._d[4]},window.wLive.People.Settings=t}(window.originaljQuery||jQuery)}),define("lazyhash",["settings"],function(){!function(){function e(e){function t(e,t){t=t||!1;for(var r=e.length,o=0;r>o;o++)for(var a=e[o],s=a._getHashKeys(),c=s.length,l=0;c>l;l++)t?n(s[l]):i(s[l],e[o])}function n(e){e&&s[e]&&delete s[e]}function i(e,t){r.Reporter.isNullOrUndefined(e)||(s[e]=t)}var o=this,a=!1,s=[];o.get=function(t){return a||(a=!0,o.update(e)),s[t]||null},o.clear=function(){a=!1,s=[]},o.update=function(n,r){!a&&r&&(a=!0,o.update(e)),a&&t(n,!1)},o.removeItemByKey=function(e){a&&n(e)},o.remove=function(e){a&&t(e,!0)}}var t=window,n=t.wLive,r=n.People;r.LazyHash=e}()}),define("crossdomainproxy",["lazyhash"],function(){!function(){function e(e,o,a){function c(e){s.logAction("Pwc_XmlProxyCallback");var t=e.status,i=null;200==t?(p.window=l(),p.window||(s.logAction("Pwc_XmlProxyIframeNotFound"),i=r.document.domain!=v.domain?"HostDomainInvalid":g?g:"UnknownProxyFailure")):i=t,s.addStats(n,h,i,o),a&&a()}function l(){for(var e=null,t=r.document.getElementsByTagName("iframe"),n=0,i=t.length;i>n;n++)try{var o=t[n],a=o.contentDocument?o.contentDocument:o.contentWindow.document;if(a&&a.location.href==d){e=o.contentWindow||o.contentDocument.parentWindow;break}}catch(c){s.logError("Pwc_FindProxyIframeFailure",c)}return e}function u(t){t.origin==r.location.protocol+"//"+e&&t.data&&t.data.startsWith&&t.data.startsWith("pwc:")&&(g=t.data.substring(4))}var d,f,g,p=this,h=(new Date).getTime(),v=r.$Config;if(p.window=null,r.addEventListener)try{r.addEventListener(t,u,0),f=!0}catch(m){}d=r.location.protocol+"//"+e+"/xmlProxy.htm?vn="+r.$Version.encodeURIComponent()+"&domain="+(v.d||v.domain).encodeURIComponent(),(window.FilesConfig&&window.FilesConfig.lightweightEmbedPage||window.Flight&&window.Flight.Ramps&&window.Flight.Ramps.lightweightEmbedPage)&&i.requiresDomainLowering(!1),i.fetchXML(d,c,"GET",null,null),p.dispose=function(){f&&r.removeEventListener&&r.removeEventListener(t,u,0)}}var t="message",n="LoadXmlProxy",r=window,i=r.$Network,o=r.wLive,a=o.People,s=a.Reporter;o.People.CrossDomainProxy=e}()}),define("storageproxy",["crossdomainproxy"],function(){!function(){function e(){var e=this,n=[],r=null;e.errorCode=null,e.setProxyWindow=function(n,a){try{var s=a?a:t,c=n?s.localStorage:s.sessionStorage;if(c){var l="st_"+Math.round(1e5*Math.random());c.setItem(l,l),c.getItem(l)==l?(c.removeItem(l),r=c):e.errorCode="GetTestValueFailed"}else e.errorCode=a?"CantAccessIframeStorage":"NoStorage"}catch(u){i.logError("Pwc_RestoreAbError",u),e.errorCode=o(u)}a&&e.errorCode&&e.setProxyWindow(!1)},e.remove=function(t){if(r)try{r.removeItem(t)}catch(a){i.logError("Pwc_StorageRemove",a),e.errorCode=o(a)}else delete n[t]},e.get=function(t,a){var s;if(r)try{s=r.getItem(t)}catch(c){i.logError("Pwc_StorageGet",c),e.errorCode=o(c)}else s=n[t];return i.isNullOrUndefined(s)&&(s=a),s},e.getDate=function(t){var n=e.get(t);if(n)try{var r=parseInt(n);return new Date(r)}catch(a){i.logError("Pwc_StorageGetDate",a),e.errorCode=o(a)}return new Date(1)},e.getInt=function(t,n){var r=e.get(t);if(r)try{return parseInt(r)}catch(a){i.logError("Pwc_StorageGetInt",a),e.errorCode=o(a)}return n||0},e.set=function(t,a){if(r)try{r.setItem(t,a)}catch(s){i.logError("Pwc_StorageSet",s),e.errorCode=o(s)}else n[t]=a},e.setDate=function(t,n){n&&e.set(t,n.getTime())},e.dispose=function(){n=null,r=null}}var t=window,n=t.wLive,r=n.People,i=r.Reporter,o=i.getErrorCode;r.StorageProxy=e}()}),define("store",["storageproxy"],function(){!function(){function e(e,v,C,b,w){function S(e,t,n){for(var r=e.getInt(t+f,-1),i=n.length,o=[],a=0;r>=a;a++){for(var s={},c=0;i>c;c++){var l=e.get(t+n[c]+a,null);if(null==l)return y.logAction("Pwc_GetIncrementalResponsesMissingKey"),[];s[n[c]]=l}o[a]=s}return o}function $(){y.logAction("Pwc_ClearAb"),T.remove(i),T.remove(r),T.remove(n),T.remove(o),T.remove(a),T.remove(s),T.remove(l),T.remove(c),k(T,u,[g,p])}function I(e,t,n){var r=e.getInt(t+f,-1)+1;e.set(t+f,r);for(var i in n)"string"==typeof i&&e.set(t+i+r,n[i])}function k(e,t,n){if(e){for(var r=e.getInt(t+f,-1),i=n.length,o=0;r>=o;o++)for(var a=0;i>a;a++)e.remove(t+n[a]+o);e.remove(t+f)}}var x=this,L=null,T=new _,P=new _;x.init=function(t){function n(){var e=L&&L.window?L.window:h;e&&(T.setProxyWindow(v,e),P.setProxyWindow(!0,e),T.get(i)===C&&T.get(r)===b||$()),w&&w()}L=new m.CrossDomainProxy(e,t,n)},x.setFullSyncRequired=function(e){T.set(l,e)},x.getFullSyncRequired=function(){return T.get(l)},x.setFullAb=function(e,d,f){var h,v=(new Date).getTime();try{T.errorCode=null,k(T,u,[g,p]),T.remove(c),T.set(i,C),T.set(n,e),T.set(r,b),T.setDate(o,f),T.setDate(a,f),T.remove(s),T.remove(l),h=T.errorCode}catch(m){y.logError("Pwc_SetFullAb",m),h=y.getErrorCode(m)}y.addStats(t,v,h,d)},x.clearAbErrorCode=function(){var e=T.errorCode;return T.errorCode=null,e},x.getFullAb=function(){return T.get(n,null)},x.setLastFullSync=function(e){T.setDate(o,e)},x.getLastFullSync=function(){return T.getDate(o)},x.setDeltaSyncRequired=function(e){T.set(s,e)},x.getDeltaSyncRequired=function(){return T.get(s)},x.removeDeltaSyncRequired=function(){T.remove(s)},x.setAbDelta=function(e,t){I(T,u,{json:e,syncKey:t})},x.getAbDeltas=function(){return S(T,u,[g,p])},x.setLastDeltaSync=function(e){T.setDate(a,e)},x.getLastDeltaSync=function(){return T.getDate(a)},x.setDeltaSyncCount=function(e){T.set(c,e)},x.getDeltaSyncCount=function(){return T.getInt(c)},x.setHost=function(e){P.set(d,e)},x.getHost=function(e){return P.get(d,e)},x.clearHost=function(){P.remove(d)},x.clearAb=$,x.dispose=function(){L&&(L.dispose(),L=null),T&&(T.dispose(),T=null),P&&(P.dispose(),P=null)}}var t="PersistAB",n="fullSyncResponse",r="mkt",i="abCid",o="lastFullSync",a="lastDeltaSync",s="deltaSyncRequired",c="deltaSyncCount",l="fullSyncRequired",u="deltaSyncResponse",d="preferredHostName",f="_e",g="json",p="syncKey",h=window,v=h.wLive,m=v.People,_=m.StorageProxy,y=m.Reporter;m.Store=e}()}),define("serviceproxy",["store"],function(){!function(){function ServiceProxy(store,market,peopleApiHostName,peopleApiAppId,handlersBaseUrl,canary){function PwcError(e,t){this.errorCode=t,this.message=e}function buildDefaultHeaders(e){var t={};return t.Pragma="no-cache",t["Cache-Control"]="no-cache",t.Expires="-1",Reporter.isQosEnabled&&e&&w.$ScenarioQoS.addScenarioToHttpHeader(t,e),t}function buildPeopleApiUrl(e,t){var n=store.getHost(peopleApiHostName),r="&cbus="+Math.random();if(!Reporter.isNullOrUndefined(t))for(var i in t)r+="&"+i+"="+t[i].encodeURIComponent();return w.location.protocol+"//"+n+"/people/"+e+"?SerializeAs=compact"+c_marketParam+market.encodeURIComponent()+"&appid="+peopleApiAppId.encodeURIComponent()+"&version="+c_schemaVersion.encodeURIComponent()+r}function buildHandlerUrl(e){return handlersBaseUrl+"/Handlers/PeopleApi/"+e+".mvc"}function parseGetProfilesResponse(e){var t=parseJson(e);if(t&&t.length>0&&t[0]==c_schemaVersion){var n=t[1];return n}return[]}function processPeopleResponse(e,t,n,r,i,o,a){var s=null,c=null,l=[];hasRequestSucceeded(e)||(s=getResponseStatusCode(e));try{c=stripJsonPrefix(e.responseText),l=parsePeopleResponse(c,a)}catch(u){Reporter.logError("Pwc_PeopleParseError",u,!0);var d=s;s=Reporter.getErrorCode(u,s?s:c_parseError),"MissingTicket"==s||"PassportAuthFail"==s||s==c_errorInvalidPassportUser||Reporter.isNullOrUndefined(d)||"200"==d||(s=d+"_"+s)}Reporter.addStats(t,i,getQosErrorCode(e,s),o),null==s?(updatePreferredHostName(e),n(e,c,l)):(store.clearHost(),r(e,s))}function parsePeopleResponse(e,t){var n,r=null,i=parseJson(e);if(i&&i.length){var o=i[1];if(o)o.length>=2?(r=o[0]||"EmptyEvalOrAbError",n=o[1]||"Unspecified error returned",r!=c_errorInvalidPassportUser&&("BadArgument"!=r||-1==n.toLowerCase().indexOf("resolve the caller")&&-1==n.toLowerCase().indexOf("ticket"))||(n="Invalid passport user",r=c_errorInvalidPassportUser)):(n="Invalid error response",r="InvalidErrorResponse");else{var a=i[0];a?t||a[2]==c_schemaVersion||(n="Schema mismatch (expected: {0}, returned: {1})".format(c_schemaVersion,a[2]||""),r="SchemaMismatch"):(n="Data is missing in the response",r="EmptyResponseArray")}}else n="Invalid response format",r="InvalidResponse";if(n)throw new PwcError(n,r);return i}function parseJson(rawResponse){var result;try{result=eval(rawResponse)}catch(ex){Reporter.logError("Pwc_ParseJsonFailure",ex),result=[,[ex.name,"Syntax error: "+ex.message]]}return result}function stripJsonPrefix(e){if(!e)throw new PwcError("Empty PWC response","EmptyResponse");if(e.indexOf("<json>")<0)throw new PwcError("JSON prefix not found on PWC response","JsonPrefixNotFound");return e.substring(6,e.length)}function getResponseStatusCode(e){var t=e?e.status:null;return null!==t&&"undefined"!==t?t:c_hostUnreachableError}function hasRequestSucceeded(e){return 200==getResponseStatusCode(e)}function getQosErrorCode(e,t){return hasRequestSucceeded(e)?t:t?t:getResponseStatusCode(e)}function updatePreferredHostName(e){try{var t=Boolean(e)&&Boolean(e.getResponseHeader)?e.getResponseHeader("PreferredHostName"):null;t&&store.setHost(t)}catch(n){Reporter.logError("Pwc_UpdatePreferredHost",n)}}PwcError.prototype=new Error,PwcError.prototype.constructor=PwcError;var _this=this;_this.fullSync=function(e,t,n){function r(r){processPeopleResponse(r,c_WL_People_Cache_Rest_FullSync_ApiId,e,t,i,n)}var i=(new Date).getTime(),o=buildPeopleApiUrl(c_abCore),a=buildDefaultHeaders(n);$Network.fetchXML(o,r,c_get,null,a)},_this.deltaSync=function(e,t,n,r){function i(e){processPeopleResponse(e,c_WL_People_Cache_Rest_DeltaSync_ApiId,t,n,o,r)}var o=(new Date).getTime(),a=buildPeopleApiUrl(c_abCore,{syncKey:e}),s=buildDefaultHeaders(r);$Network.fetchXML(a,i,c_get,null,s)},_this.loadPersonDetails=function(e,t,n,r){function i(e){processPeopleResponse(e,c_WL_People_Cache_Rest_PersonDetails_ApiId,t,n,o,r,!0)}var o=(new Date).getTime(),a=buildPeopleApiUrl(c_personDetails,{contactId:e}),s=buildDefaultHeaders(r);$Network.fetchXML(a,i,c_get,null,s)},_this.loadAllPersonDetails=function(e,t,n,r){function i(e){processPeopleResponse(e,c_WL_People_Cache_Rest_AllPersonDetails_ApiId,t,n,o,r,!0)}var o=(new Date).getTime(),a=null;e&&(a={filter:e});var s=buildPeopleApiUrl(c_allPersonDetails,a),c=buildDefaultHeaders(r);$Network.fetchXML(s,i,c_get,null,c)},_this.loadProfiles=function(e,t,n,r){function i(e){var i=null,a=[];if(hasRequestSucceeded(e))try{a=parseGetProfilesResponse(e.responseText)}catch(s){Reporter.logError("Pwc_ProfilesParseError",s,!0),i=Reporter.getErrorCode(s,c_parseError)}else i=getResponseStatusCode(e);Reporter.addStats(c_WL_People_Cache_Rest_GetProfiles,o,getQosErrorCode(e,i),r),i?n(e,i):t(e,a)}var o=(new Date).getTime(),a=e.join(","),s=buildHandlerUrl(c_getProfilesHandler),c="canary="+canary.encodeURIComponent()+"&cids="+a.encodeURIComponent()+c_marketParam+market.encodeURIComponent(),l=buildDefaultHeaders(r);$Network.fetchXML(s,i,c_post,c,l)},_this.parseProfiles=parseGetProfilesResponse,_this.parseAb=parsePeopleResponse,_this.blockOrUnblockMessenger=function(e,t,n,r){var i=e.getCid();if(i){var o=(t?"Hide":"Unhide")+"Contact";$Network.fetchXML(buildHandlerUrl(o),function(e){var t=e&&"200"===e.responseText,i=t?n:r;i&&i(e.responseText)},"POST","canary="+canary.encodeURIComponent()+"&cid="+encodeURIComponent(i))}}}var c_WL_People_Cache_Rest_GetProfiles="Rest_GetProfiles",c_WL_People_Cache_Rest_FullSync_ApiId="Rest_FullSync",c_WL_People_Cache_Rest_DeltaSync_ApiId="Rest_DeltaSync",c_WL_People_Cache_Rest_PersonDetails_ApiId="Rest_PersonDetails",c_WL_People_Cache_Rest_AllPersonDetails_ApiId="Rest_AllPersonDetails",c_errorInvalidPassportUser="InvalidPassportUser",c_hostUnreachableError="HostUnreachable",c_parseError="ParseError",c_schemaVersion="W5.M2",c_get="GET",c_post="POST",c_getProfilesHandler="GetProfiles",c_abCore="abcore",c_personDetails="PersonDetails",c_allPersonDetails="allPersonDetails",c_marketParam="&market=",w=window,$Network=w.$Network,wLive=w.wLive,People=wLive.People,Reporter=People.Reporter;People.ServiceProxy=ServiceProxy}()}),define("deltasync",["serviceproxy"],function(){!function(){function e(e,n,r){function s(e,t){var r=!1;if(e&&e.length>0){for(var i=n.settings,o=0;o<e.length;o++)e[o]&&e[o]!=i._d[o]&&(i._d[o]=e[o],r=!0);r&&t&&i.$changes.triggerHandler(n.changedEventName)}return r}function c(e,n,r,a,s,c){if(!e)return null;if(typeof e!==i){for(var l=[],u=[],d=[],f=0,g=e.length;g>f;f++){for(var p=e[f],h=-1,v=0,m=n.length;m>v;v++)if(n[v].getId()===p[o]){h=v;break}if(-1!==h){var _=n[h];1===p[s]?(u.push(_),a.remove([_]),n.splice(h,1)):(l.push(_),n[h]._update(p))}else if(1!==p[s]){var y=c(p);d.push(y),a.update([y]),n.push(y)}}if(d.length>0||l.length>0||u.length>0)return new t(r,d,l,u)}return null}function d(e){if(!e)return null;var r={},i=[],o=[],s=[],c=[];h(e,r),v(e,r,i);for(var l in r){var u=n._personHash.get(l),d=u._d;if(u){var f=d[a].length,g=n.getPersonDetails(l);g&&n._personDetailsHash.remove([g]),0===f?(n.persons.remove(u),n._personHash.remove([u]),s.push(u)):(A(d),u._update(d),n._personHash.update([u]),o.push(u))}}for(var p=0,m=i.length;m>p;p++){var _=i[p];A(_);var y=new L.Person(_,n.names);n.persons.push(y),n._personHash.update([y]),c.push(y)}return c.length>0||o.length>0||s.length>0?new t(n.$persons,c,o,s):null}function h(e,t){for(var r=0,i=e.length;i>r;r++)for(var s=e[r],c=s[a],l=0;l<c.length;){var u=c[l],d=u[g],f=n._personHash.get(d);if(f&&(u[1]===T.deleted||s[o]!==f.getId())){var p=f._d,h=p[a],v=k(p,d);-1!=v&&(n._personHash.removeItemByKey(d),t[f.getId()]=1,"WL"===h[v][4]&&(n._personHash.removeItemByKey(f.getCid()),n._personHash.removeItemByKey(f.getHexCid()),b(p)),h.splice(v,1))}u[1]===T.deleted?c.splice(l,1):l++}}function v(e,t,r){for(var i=0,s=e.length;s>i;i++){var c=e[i];if(c[a].length){var d=n._personHash.get(c[o]);if(d&&d.getId()===c[o]){for(var f=d._d,p=c[a],h=f[a],v=0,_=p.length;_>v;v++){var y=p[v],C=k(f,y[g]);t[d.getId()]=1,-1!=C?h[C]=y:h.push(y),"WL"===y[4]&&w(f,c)}m(h),f[l]=c[l],f[u]=c[u]}else r.push(c)}}}function m(e){e.sort(function(e,t){var n=$(e[4]),r=$(t[4]);if(n>r)return 1;if(r>n)return-1;var i=e[g],o=t[g];return i>o?-1:o>i?1:0})}function b(e){for(var t=0,n=_.length;n>t;t++)delete e[_[t]]}function w(e,t){for(var n,r=0,i=_.length;i>r;r++)n=_[r],e[n]=t[n]}function S(e,t){return e[a][t][g]||e[o]}function $(e){var t;if("ABCH"===e)t=-2;else{var r=n.getService(e);t=r?r.getRank():9999}return t}function I(e){var t,r,i=0;if(e[l]){for(t=0,r=e[l].length;r>t;t++){var o=n._categoryHash.get(e[l][t]);if(o&&o._d[2]){i=1;break}}e[u]=i}var s=e[a],c=s[0][16]||e[14]||0;for(t=1,r=s.length;r>t;t++){var d=s[t][16]||e[14]||0;c>d&&(c=d)}e[14]=c}function k(e,t){for(var n=-1,r=e[a],i=0,o=r.length;o>i;i++)if(S(e,i)===t){n=i;break}return n}function x(e){for(var t=e[a],n=e[o],r=0,i=y.length;i>r;r++){for(var s=y[r],c=s.mask,l=s.personFields,u=s.contactFields,d=s.arrayIndex,f=s.isArray,g=!1,h=0,v=t.length;v>h;h++){var m=t[h];if(m[p]&c){if(g=!0,f)for(var _=0,C=l.length;C>_;_++){var b=e[l[_]];b&&(m[u[_]]||(m[u[_]]=[]),m[u[_]][d]=b[d])}else for(var w=0,S=l.length;S>w;w++)m[u[w]]=e[l[w]];m[p]=m[p]&~c}}if(g)for(var $=0,I=s.personFields.length;I>$;$++)f?e[l[$]]&&(e[l[$]][d]=null):e[l[$]]=null}e[o]=n}function P(e,t,n,r,i){for(var o=!0,a=0,s=n.length;s>a;a++){var c=e[n[a]];r&&c&&(c=c[i]),c&&(t[a]=c,o=!1)}return o}function M(e,t,n,r){for(var i=0,o=t.length;o>i;i++){var a=t[i];e[a]&&(n?r<e[a].length&&(e[a][r]=null):e[a]=null)}}function E(e,t,n,r,o,a){for(var s=!0,c=0,l=n.length;l>c;c++){var u=e[n[c]];r&&u&&(u=u[o]);var d=t[c];if(a){if(!a(u,d)){s=!1;break}}else if((typeof u!==i||typeof d!==i)&&u!==d){s=!1;break}}return s}function A(e){x(e),N(e),I(e)}function N(e){for(var t=e[o],n=0,r=f;r>n;n++)C[n]&&delete e[n];e[o]=t,e[35]=(e[35]||0)+1;for(var i=0,s=y.length;s>i;i++){for(var c=y[i],l=c.mask,u=e[a],d=[],g=c.contactFields,h=c.personFields,v=c.isArray,m=c.arrayIndex,_=c.comparer,b=P(e,d,h,v,m),w=0,S=u.length;S>w;w++){var $=u[w];b&&(b=P($,d,g,v,m)),!b&&E($,d,g,v,m,_)&&($[p]=($[p]||0)|l,M($,g,v,m))}if(c.isArray&&!e[h[0]]&&(e[h[0]]=[]),!b)for(var I=0,k=Math.min(h.length,d.length);k>I;I++)c.isArray?e[h[I]][c.arrayIndex]=d[I]:e[h[I]]=d[I]}}function D(e){for(var t=e.clone(),n=0,r=t.length;r>n;n++){var i=t[n];"object"==typeof i&&i instanceof Array&&(t[n]=D(i))}return t}var F=this;F.apply=function(e){var t=[],i=r[0],o=i[3],a=i[4],l=i[5],u=i[6],f=i[7],g=s(u,e);t.push(c(f,n.services,n.$services,n._serviceHash,20,function(e){return new L.Service(e)})),t.push(c(a,n.categories,n.$categories,n._categoryHash,3,function(e){return new L.Category(e)})),t.push(c(l,n.groups,n.$groups,n._groupHash,5,function(e){return new L.Group(e)})),t.push(d(o));for(var p=0,h=t.length;h>p;p++)if(null!==t[p]){if(e){var v=t[p];if(v.$event.triggerHandler(n.changedEventName,v),null!=v.changed)for(var m=0;m<v.changed.length;m++)v.changed[m].$changes.triggerHandler(n.changedEventName)}g=!0}return g},F.flatten=function(e){var t=D(e._d);return x(t),new L.Person(t,n.names)},F.clone=function(e){var t=D(e._d);return new L.Person(t,n.names)},F.dedupe=function(e){var t=D(e._d);return N(t),new L.Person(t,n.names)},F.sortContactsByRank=function(e){m(e._d[1]),e._update(e._d)}}function t(e,t,n,r){var i=this;i.$event=e,i.added=t,i.changed=n,i.removed=r}function n(e,t,n,r,i,o){var a=this;a.mask=e,a.personFields=t,a.contactFields=n,a.isArray=r,a.arrayIndex=i,a.comparer=o}function r(e,t){var n=!1;return e&&t&&e.length===t.length&&(n=!0,e.forEach(function(e,r){t[r]!=e&&(n=!1)})),n}for(var i="undefined",o=0,a=1,s=4,c=5,l=12,u=13,d=24,f=35,g=0,p=2,h=9,v=10,m=25,_=[6,7,9,8,15],y=[new n(1,[o],[g]),new n(4,[11],[12]),new n(8,[2,3,19,20,17,18,21,22,30,31],[7,8,20,21,19,18,22,23,31,32]),new n(16,[10,23,28],[11,24,29]),new n(32,[s],[h],1,0),new n(64,[s],[h],1,1),new n(128,[s],[h],1,2),new n(256,[c],[v],1,0),new n(1<<23,[c],[v],1,8),new n(512,[c],[v],1,1),new n(1024,[c],[v],1,2),new n(2048,[c],[v],1,3),new n(4096,[c],[v],1,4),new n(16384,[c],[v],1,6),new n(8192,[c],[v],1,5),new n(32768,[c],[v],1,7),new n(1<<24,[c],[v],1,9),new n(1<<25,[c],[v],1,10),new n(65536,[d],[m],1,0,r),new n(1<<17,[d],[m],1,1,r),new n(1<<18,[d],[m],1,2,r),new n(1<<20,[25,26],[26,27]),new n(1<<21,[27],[28]),new n(1<<22,[29],[30]),new n(1<<19,[16],[17],0,0,r)],C=[],b=0,w=y.length;w>b;b++)for(var S=y[b].personFields,$=0,I=S.length;I>$;$++)C[S[$]]||(C[S[$]]=1);var k=window,x=k.wLive,L=x.People,T=L.ContactState;L.DeltaSync=e,x.People.DeltaSyncEvent=t}()}),define("syncclient",["deltasync"],function(){!function(){function e(e,_,b,w,S){function $(e,t,n,r){for(var i,o=!0,a=null,s=0,d=N.length;d>s;s++){i=N[s];var v=i[p],m=i[u];if(v===e){m||(o=!1,a=i);break}if(e===l&&v===c&&!m){o=!1,a=i;break}}o?(i={},i[p]=e,i[f]=[t],i[g]=[n],i[h]=r,i[u]=!1,N.push(i)):a&&(t||n)&&(t&&a[f].push(t),n&&a[g].push(n),r&&(a[h]=r)),I()}function I(){function t(e,t,n){b.lastFullSync=b.lastDeltaSync=new Date,A.resetTimers(!1),k(t),x(n),b._personDetailsHash.clear(),A.fullSyncRequired=!1,A.deltaSyncRequired=!1,_.setFullAb(t,w[h],b.lastFullSync),N.shift(),L(w[f],"fsSuccess"),I()}function n(e,t){C(t,!1)}function v(n,r,i){b.lastDeltaSync=new Date,_.setLastDeltaSync(b.lastDeltaSync),A.resetTimers(!1);
var o=i[0];if(o[8])t(n,r,i);else{_.removeDeltaSyncRequired();var a=new y.DeltaSync(e,b,i),c=a.apply(!0);if(c){var l=o[0];b.syncKey=l,_.setAbDelta(r,l);var u=_.getDeltaSyncCount()+1;_.setDeltaSyncCount(u),u>=s&&(A.fullSyncRequired=!0,_.setFullSyncRequired(!0))}A.deltaSyncRequired=!1,N.shift(),L(w[f],"dsSuccess"),I()}}function m(e,t){C(t,!0)}function C(e,t){if(w[d]=(w[d]||0)+1,w[d]>=a||e===r||e===i||e===o){var n=t?"dsFailure":"fsFailure";N.shift(),t?b.lastDeltaSync=new Date:(b.lastFullSync=new Date,_.setLastFullSync(b.lastFullSync)),A.resetTimers(t,!0),L(w[g],n,[e])}else w[u]=!1;I()}if(0!==N.length){var w=N[0];w[u]||w[p]===l&&F||(w[p]===c?e.fullSync(t,n,w[h]):w[p]===l&&e.deltaSync(b.syncKey,v,m,w[h]))}}function k(e){for(var t=0,n=0,r=b.persons.length;r>n;n++){var i=b.persons[n]._d[1];i&&i.length&&(t+=i.length)}var o={contactCount:t,responseLength:e.length};C.logDetails("Pwc_FullSync",o),m.reportEvent("View.WLPeopleCache.FullSync",o)}function x(e){for(var t=e[0]||[],n=t[3]||[],r=[],i=0;i<n.length;i++)r[i]=new y.Person(n[i],b.names);for(var o=t[4]||[],a=[],s=0;s<o.length;s++)a[s]=new y.Category(o[s]);for(var c=t[5]||[],l=[],u=0;u<c.length;u++)l[u]=new y.Group(c[u]);for(var d=t[7]||[],f=[],g=0;g<d.length;g++)f[g]=new y.Service(d[g]);var p=new y.Settings(t[6]||[]);b._applyFull(r,a,l,f,p),b.syncKey=t[0]}function L(e,t,n){n=n||[];for(var r=0;r<e.length;)T(e[r],t+"["+r+"]",n),r++;e.splice(0,e.length)}function T(e,t,n){if(e)try{n&&n.length>0?e.apply(null,n):e()}catch(r){C.logError("Pwc_Callback"+t+"Error",r)}}function P(){E=!0}function M(){E=!1,A.deltaSyncRequired&&A.queueDelta()}var E,A=this,N=[],D=new y.IdleTimer(P,M),F=!1,B=0,R=null,H=null;A.deltaSyncRequired=!1,A.fullSyncRequired=!1,A.applyFull=function(t){var n=e.parseAb(t);x(n)},A.applyDelta=function(t){var n=e.parseAb(t),r=new y.DeltaSync(e,b,n);r.apply()},A.queueFull=function(e,n,r){function i(){a&&C.stopScenario(r,!0),e&&e()}function o(e){a&&C.stopScenario(r,!1,e),n&&n()}C.logAction("Pwc_FullSyncQueued");var a=!r;r=r||C.startScenario(t),$(c,i,o,r)},A.queueDelta=function(e,t,r){function i(){a&&C.stopScenario(r,!0),e&&e()}function o(e){a&&C.stopScenario(r,!1,e),t&&t()}if(C.logAction("Pwc_DeltaSyncQueued"),_.setDeltaSyncRequired(!0),b.isReady&&!E){if(A.fullSyncRequired)A.queueFull(e,t,r);else{var a=!r;r=r||C.startScenario(n),$(l,i,o,r)}A.deltaSyncRequired=!1}else A.deltaSyncRequired=!0},A.pause=function(){F=!0},A.resume=function(){F=!1,I()},A.resetTimers=function(e,t){if(t){if(++B>=3)return}else B=0;var n=new Date,r=w,i=b.lastFullSync||n,o=b.lastDeltaSync||i;e=e||!1,e||(null!==R&&v.clearTimeout(R),r=Math.max(r-(n.getTime()-i.getTime()),0),R=v.setTimeout(function(){A.queueFull()},r)),null!==H&&v.clearTimeout(H);var a=Math.max(S-(n.getTime()-o.getTime()),0);r>S&&(H=v.setTimeout(function(){A.queueDelta()},a))},A.dispose=function(){D&&D.dispose(),D=null,N=[]}}var t="FullSync",n="DeltaSync",r="InvalidPassportUser",i="PassportAuthFail",o="MissingTicket",a=3,s=20,c="full",l="delta",u="inProgress",d="attempts",f="successCallbacks",g="failureCallbacks",p="requestType",h="qosScenario",v=window,m=v.$BSI,_=(v.$Cookie,v.wLive),y=_.People,C=y.Reporter;y.SyncClient=e}()}),define("client",["syncclient"],function(){!function(e){function t(t,a,s){var u=this;u.fullSync=function(e,t,n){a.queueFull(e,t,n)},u.deltaSync=function(e,t,n){a.queueDelta(e,t,n)},u.pauseDeltaSync=function(){a.pause()},u.resumeDeltaSync=function(){a.resume()},u.processABChangedEvent=function(t){l.logAction("Pwc_ProcessABChangedEvent");var n=!0;if(t)try{var r=e(e.parseXML(t)),i=r.find("LastModifiedDate");n=Date.parse(s.syncKey)!=Date.parse(i.text()),n||l.logAction("Pwc_ProcessABChangedNoDeltaSyncRequired")}catch(o){l.logError("Pwc_ProcessABChangedFailedEvent",o)}n&&a.queueDelta()};var d={};u.loadPersonDetails=function(e,n,r,o){function a(t,n,r){if(r.length<1)return void u(t,"InvalidResponseArray");var i=new c.Person(r[0],s.names);s._personDetailsHash.update([i],!0),f&&l.stopScenario(o,!0);for(var a=0;a<p.successCallbacks.length;a++)p.successCallbacks[a](i);d[e]=null}function u(t,n){l.logDetails("Pwc_DetailsData",{contactId:e,errorCode:n}),f&&l.stopScenario(o,!1,n);for(var r=0;r<p.failureCallbacks.length;r++)p.failureCallbacks[r](t,n);d[e]=null}var f=!o,g=!1;d[e]||(d[e]={successCallbacks:[],failureCallbacks:[]},g=!0);var p=d[e];n&&p.successCallbacks.push(n),r&&p.failureCallbacks.push(r),g&&(o=o||l.startScenario(i),t.loadPersonDetails(e,a,u,o))},u.loadAllPersonDetails=function(e,n,r,i){function a(e,t,r){if(r.length<1)return void u(e,"InvalidResponseArray");for(var o=r[0],a=[],f=0;f<o.length;f++)a[f]=new c.Person(o[f],s.names);s._personDetailsHash.update(a,!0),d&&l.stopScenario(i,!0),n&&n()}function u(e,t){d&&l.stopScenario(i,!1,t),r&&r()}var d=!i;i=i||l.startScenario(o),t.loadAllPersonDetails(e,a,u,i)},u.loadProfiles=function(e,i,o,a){function c(e,t,n){v++;var r=[],o=[];s._addProfiles(t);for(var c=0;c<n.length;c++)s.getPerson(n[c])?r.push(n[c]):o.push(n[c]);v>=h&&m&&l.stopScenario(a,!y,_),i&&i(r,o)}function u(e,t,n){v++,y=!0,_=t,v>=h&&m&&l.stopScenario(a,!y,_),o&&o(n)}for(var d=[],f=[],g=0,p=e.length;p>g;g++)s.getPerson(e[g])?f.push(e[g]):d.push(e[g]);var h=0,v=0,m=!1,_=null,y=!1;if(d.length>0)for(m=!a,a=a||l.startScenario(r);d.length>0;){var C=d.length>n?n:d.length,b=d.splice(0,C);t.loadProfiles(b,function(e,t){c(e,t,b)},function(e,t){u(e,t,b)},a)}(0==d.length||f.length>0)&&i&&i(f,[])},u.blockOrUnblockMessenger=function(e,n,r,i){t.blockOrUnblockMessenger(e,n,r,i)},u.dispose=function(){t=null,a=null,s=null}}var n=122,r="GetProfiles",i="PersonDetails",o="AllPersonDetails",a=window,s=a.wLive,c=s.People,l=c.Reporter;c.Client=t}(window.originaljQuery||jQuery)}),define("networkid",["client"],function(){!function(){var e=window.wLive.People.NetworkID=function(){};e.skype="SKYPE",e.windowsLive="WL",e.shortCircuit="SCD",e.facebook="FB",e.google="GOOG"}()}),define("sortorder",["networkid"],function(){!function(){var e=window.wLive.People.SortOrder=function(){};e.none=0,e.displayName=1,e.messagingRelevance=2,e.peopleRelevance=3}()}),define("cache",["sortorder"],function(){!function(e){function t(t,l,g){function p(e,t){e.splice(0,e.length),e.addRange(t||[])}function h(e,t,r){if(e)for(var i=0,o=e.length;o>i;i++){var a=e[i][t];if(typeof a!==n&&a===r)return e[i]}return null}function v(e,t){var n=[];if(e.filter)n=e.filter(t);else for(var r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n}function m(){_.profiles.splice(0,_.profiles.length),_.persons.splice(0,_.persons.length),_.categories.splice(0,_.categories.length),_.groups.splice(0,_.groups.length),_.services.splice(0,_.services.length),$.clear(),y.clear(),b.clear(),w.clear(),S.clear()}var _=this;_.readyEventName=i,_.failureEventName=r,_.disposeEventName=o,_.changedEventName=a,_.fullSyncEventName=s,_.persons=[],_.categories=[],_.groups=[],_.services=[],_.profiles=[],_.settings=new u.Settings([]);var y=new d(_.persons),C=new d([]),b=new d(_.categories),w=new d(_.groups),S=new d(_.services),$=new d(_.profiles),I=[],k=[],x=!1;_.$persons=e({}),_.$categories=e({}),_.$groups=e({}),_.$services=e({}),_.$events=e(_),_.client=null,_.names=new u.Names(t.isLastNameFirst,t.nameType,t.nns,t.profileUrl,t.photosUrl),_.isReady=!1,_.isFailed=!1,_.lastFullSync=null,_.lastDeltaSync=null,_.syncKey=null,_._personHash=y,_._personDetailsHash=C,_._categoryHash=b,_._groupHash=w,_._serviceHash=S,_.getMe=function(){return _.getPerson(c.$Config.cid)},_.getPerson=function(e){var t=y.get(e);return null===t&&(t=$.get(e)),t},_.getPersons=function(e,t){var r=_.persons.slice(0);if(e){var i;typeof e.isOnline!==n&&(i=e.isOnline?function(e){return e.isOnline()}:function(e){return!e.isOnline()},r=v(r,i)),typeof e.isIMCapable!==n&&(i=e.isIMCapable?function(e){return e.getMessagingAddresses().length>0}:function(e){return 0==e.getMessagingAddresses().length},r=v(r,i)),typeof e.hasPicture!==n&&(i=e.hasPicture?function(e){return e.getUserTile()&&!0}:function(e){return!e.getUserTile()&&!0},r=v(r,i)),!t||t!=f.messagingRelevance&&t!=f.peopleRelevance||(i=t==f.messagingRelevance?function(e){return e.getMessagingRelevance()>=0}:function(e){return e.getPeopleRelevance()>=0},r=v(r,i)),e.networks&&e.networks instanceof Array&&e.networks.length>0&&(i=function(t){for(var n=t.getContacts(),r=0;r<n.length;r++)if(e.networks.contains(n[r].getSourceId()))return!0;return!1},r=v(r,i))}var o=t?t:f.none;switch(o){case f.displayName:r.sort(function(e,t){return e.getDisplayNameWithFallback().localeCompare(t.getDisplayNameWithFallback())});break;case f.messagingRelevance:r.sort(function(e,t){return t.getMessagingRelevance()-e.getMessagingRelevance()});break;case f.peopleRelevance:r.sort(function(e,t){return t.getPeopleRelevance()-e.getPeopleRelevance()});break;case f.none:}return r},_.getFavorites=function(){for(var e=[],t=0,n=_.categories.length;n>t;t++)if(_.categories[t].getIsFavorite()){e=_.getPersonsByCategory(_.categories[t].getId());break}return e},_.getPersonsByEmail=function(e){var t=[];if(e){e=e.toLowerCase();for(var n=0,r=_.persons.length;r>n;n++)for(var i=_.persons[n].getContactEmails(),o=0,a=i.length;a>o;o++)if(i[o]&&i[o].toLowerCase()===e){t.push(_.persons[n]);break}}return t},_.getPersonsByCategory=function(e){for(var t=[],n=0,r=_.persons.length;r>n;n++){var i=_.persons[n]._d[12];i&&i.contains(e)&&t.push(_.persons[n])}return t},_.getPersonsByService=function(e){for(var t=[],n=0,r=_.persons.length;r>n;n++){var i=_.persons[n],o=h(i._d[1],4,e);o&&t.push(i)}return t},_.getPersonDetails=function(e){var t=C.get(e);return t},_.removePersonDetails=function(e){var t=C.get(e);t&&C.remove(t)},_.getContactIdsForMri=function(e){var t=[];if(e){e=e.toLowerCase();for(var n=0,r=_.persons.length;r>n;n++)for(var i=_.persons[n]._d[1],o=0,a=i.length;a>o;o++){var s=i[o];if(s[3]){var c=s[3][0];if(c)for(var l=0,u=c.length;u>l;l++)if(c[l].toLowerCase()==e){t.push(s[0]);break}}}}return t},_.getCategory=function(e){var t=b.get(e);return t},_.getService=function(e){var t=S.get(e);return t},_.reset=function(){m(),l.clearAb(),l.clearHost()},_.callWhenReady=function(e,t){function n(){_.$events.unbind(r,n);for(var e=0;e<k.length;e++)k[e]();k=[]}function o(){_.$events.unbind(i,o);for(var e=0;e<I.length;e++)I[e]();I=[]}_.isReady&&e?e():(0===I.length&&_.$events.bind(i,o),I.push(e),t&&(_.isFailed?t():(0===k.length&&_.$events.bind(r,n),k.push(t))))},_.removeWhenReadyCallback=function(e,t){if(I){var n=I.indexOf(e);-1!=n&&I.splice(n,1),t&&(n=k.indexOf(t),-1!=n&&k.splice(n,1))}},_.dispose=function(){x=!0,_.$events.triggerHandler(o),_._disposeCache()},_.processABChangedEvent=function(e){_.client.processABChangedEvent(e)},_._flatten=function(e){var t=new u.DeltaSync(g,this,null);return t.flatten(e)},_._clone=function(e){var t=new u.DeltaSync(g,this,null);return t.clone(e)},_._sortContactsByRank=function(e){var t=new u.DeltaSync(g,this,null);t.sortContactsByRank(e)},_._dedupeContacts=function(e){var t=new u.DeltaSync(g,this,null);return t.dedupe(e)},_._addProfiles=function(e){for(var t=[],n=0;n<e.length;n++){var r=new u.Person(e[n],_.names);if($.get(r.getId())){for(var i=0;i<_.profiles.length;i++)if(_.profiles[i].getId()==r.getId()){_.profiles[i]=r;break}}else _.profiles.push(r),t.push(r)}$.update(t)},_._applyFull=function(e,t,n,r,i){p(_.persons,e),p(_.categories,t),p(_.groups,n),p(_.services,r),_.settings=i,y.clear(),b.clear(),w.clear(),_.isReady&&_.$events.triggerHandler(s)},_._getProfile=function(e){var t=$.get(e);return t},_._find=function(e){function t(e,t){for(var n=0;n<e.length;n++){var r=e[n].getDisplayName();if(r&&t&&r.toLowerCase().indexOf(t.toLowerCase())>=0)return e[n]}return null}var n=t(_.persons,e);return n||t(_.profiles,e)},_._snapshot=function(){function e(t){if(t)if(t instanceof Array)for(var n=0;n<t.length;n++)e(t[n]);else{var r=[];for(var i in t)i.startsWith("get")&&"getPerson"!=i&&"function"==typeof t[i]&&r.push(i);for(var o=0;o<r.length;o++){var a=t[r[o]]();t[r[o].substr(3)]=a,a&&("function"==typeof a||a instanceof Array)&&e(a)}}}e(_.persons),e(_.profiles),e(_.categories),e(_.groups),e(_.services),e(_.settings)},_._disposeCache=function(){x||(_.$events.unbind(i),_.$events.unbind(r),_.$events.unbind(s),_.$persons.unbind(a),_.$categories.unbind(a),_.$groups.unbind(a),_.$services.unbind(a),_.profiles=null,_.services=null,_.categories=null,_.groups=null,_.persons=null,_.settings=null)}}var n="undefined",r="failure",i="ready",o="dispose",a="changed",s="fullSync",c=window,l=c.wLive,u=l.People,d=u.LazyHash,f=u.SortOrder;u.Cache=t}(window.originaljQuery||jQuery)}),define("pwcinitializer",["cache"],function(){!function(e){function t(){function t(){if(!_)if(I.isReady)d(w,!0);else{var e=S.getFullSyncRequired();if(u.logAction("Pwc_InitCacheFullSyncRequired"),!e&&o()){var t=C.deltaSyncInterval?parseInt(C.deltaSyncInterval):3e5;k.deltaSyncRequired&&(I.lastDeltaSync=new Date((new Date).getTime()-t),k.deltaSyncRequired=!1,u.logAction("Pwc_InitCacheDeltaSyncRequired")),k.resetTimers(),g()}else s()}}function o(){var e=!1,t=(new Date).getTime(),n=S.clearAbErrorCode(),i=S.getFullAb();if(n=S.clearAbErrorCode()||n,i){try{k.applyFull(i),I.lastFullSync=S.getLastFullSync(),I.lastDeltaSync=S.getLastDeltaSync();for(var o=S.getAbDeltas(),a=0;a<o.length;a++)k.applyDelta(o[a].json);e=!0,k.deltaSyncRequired=S.getDeltaSyncRequired()}catch(s){u.logError("Pwc_RestoreAbError",s),n=u.getErrorCode(s)}e||S.clearAb()}return u.addStats(r,t,n,w),e}function s(){if(C.initOnPageLoad)if(f.isLoading()){var e,t=!1;e=function(){t||(e&&(f.removeLoadedCallback(e),t=!0),c())},f.addLoadedCallback(e)}else c();else d(w,!0)}function c(){I.isReady?k.resetTimers():C.fullSyncDelay?a.setTimeout(function(){x.fullSync(g,p,w)},C.fullSyncDelay):x.fullSync(g,p,w)}function g(){I.isReady=!0,I.isFailed=!1,d(w,!0),I.$events.triggerHandler(I.readyEventName)}function p(){I.isReady=!1,I.isFailed=!0,d(w,!1,"fullSyncFailure"),I.$events.triggerHandler(I.failureEventName)}function h(){I.reset()}function v(){_=!0,a.$Logout&&C.enabled&&!C.fullyDisabled&&y.hcid&&a.$Logout.remove(h),e(a).unbind(i,v),S&&(S.dispose(),S=null),I&&(I.$events.unbind(I.disposeEventName,v),I._disposeCache(),I=null),k&&(k.dispose(),k=null)}var m=this,_=!1,y=a.$Config||{},C=y.ContactCache||{},b=y.mkt?y.mkt.toLowerCase():"";u.isQosEnabled=C.qos;var w,S=new l.Store(C.peopleApiBaseUrl,C.localStorage,y.hcid,b,t),$=new l.ServiceProxy(S,b,C.peopleApiBaseUrl,C.peopleApiAppId,y.handlerBaseUrl,C.canary),I=new l.Cache(C,S,$),k=new l.SyncClient($,S,I,C.fullSyncInterval,C.deltaSyncInterval),x=new l.Client($,k,I);I.client=x,I.$events.bind(I.disposeEventName,v),m.cache=I,C.enabled&&!C.fullyDisabled&&y.hcid&&(w=u.startScenario(n),a.$Logout&&a.$Logout.add(h),S.init(w))}var n="Init",r="RestoreAB",i="unload",o="$pwc",a=window,s=a.$Do,c=a.wLive,l=c.People,u=l.Reporter,d=u.stopScenario,f=a.$BSI,g=(a.$Cookie,new t);a[o]=g.cache,s.register(o,0,!0)}(window.originaljQuery||jQuery)}),define("iccommondata",["jquery-1.7.2","pagestats","pwcinitializer"],function(){!function(){function e(){function e(){return r||(r=t.ic_common_data),r||{}}function n(){return i||(i=t.ic_menu_data),i||{}}var r,i,o=this;o.getActionData=function(e){return n()[e]},o.getReturnUrl=function(){return e().ru||location.href},o.getActionDescription=function(e){return n()[e][0]||""}}var t=window,n=t.wLive||{};n.IC=n.IC||{};var r=n.IC;r.ICCommonData=new e}()}),define("ictemplate",["iccommondata"],function(){!function(e){function t(t,n,r){function i(e){return l>e?n[e]:null}function o(){return c++}var a,s=this,c=0,l=n.length;s.id=t,s.html=r.html(),s.getNewId=function(){return t+o()},s.getCid=function(){return i(0)},s.getShowCard=function(){return"1"==i(1)},s.getMenuActions=function(){return i(2)},s.getName=function(){return i(3)},s.getEmail=function(){return i(6)},s.getUserTileUrl=function(){return i(17)},s.getTileSize=function(){if(!a){var n=e("#{0}_{1}".format(t,"usertilecontainer"),r);if(n.length>0){var i=n.attr("class").split(" ");if(i&&i[1])return i[1].replace("c_ic_img_","")}else a="none"}return a},s.dispose=function(){r=null,n=null}}var n=window,r=n.wLive;r.IC=r.IC||{};var i=r.IC;i.ICTemplate=t}(window.originaljQuery||jQuery)}),define("ictemplates",["ictemplate"],function(){!function(e){function t(){function t(e){if(e.startsWith("icTm")){var t=e.indexOf("_template"),n=t>=0?t:e.length;return e.substring(4,n)}return e}var r=this,o={};r.init=function(){n.icPwcData&&r.addTemplates(n.icPwcData)},r.addTemplates=function(n){if(n)for(var r in n){var a=t(r);o[a]&&o[a].dispose(),o[a]=new i.ICTemplate(r,n[r],e("#{0}_template".format(r)))}},r.getTemplate=function(e){return e=t(e),o[e]?o[e]:null},r.dispose=function(){for(var e in o)o[e].dispose(),delete o[e];o=null},r.init()}var n=window,r=n.wLive;r.IC=r.IC||{};var i=r.IC;i.ICTemplates=t}(window.originaljQuery||jQuery)}),define("icaction",["ictemplates"],function(){!function(e){function t(e,n){var r=this;r.id=t.id,r.isEnabled=function(){return e&&e.getContactEmails().length>0||n},r.getAvailableOptions=function(){var t=[],r=e?e.getContactEmails():[];n&&t.push({id:n,displayName:n});for(var i=0;i<r.length;i++)n&&r[i]==n||t.push({id:r[i],displayName:r[i]});return t},r.performAction=function(e){if(p.getActionData(r.id)){var t=r.getAvailableOptions(),n=e||t.length>0&&t[0].id;if(n){var i=p.getActionData(r.id)[1].replace("$address$",n).replace("$ru$",encodeURIComponent(p.getReturnUrl())),o=l.wLive&&l.wLive.Hotmail?null:"_blank";$BSI.navigateTo(i,o)}}},r.dispose=function(){}}function n(e){var t=this;t.id=n.id,t.isEnabled=function(){return e&&!e.isMe()&&e.getId()},t.getAvailableOptions=function(){return[]},t.performAction=function(n){if(e&&p.getActionData(t.id)){var r=p.getActionData(t.id)[1].replace("$contactid$",e.getId());l.open(r,"_blank")}},t.dispose=function(){}}function r(e){var t=this;t.id=r.id,t.isEnabled=function(){return e&&e.isMe()},t.getAvailableOptions=function(){return[]},t.performAction=function(e){if(p.getActionData(t.id)){var n=p.getActionData(t.id)[1];l.open(n,"_blank")}},t.dispose=function(){}}function i(e,t,n){var r,o=this;o.id=i.id,o.setWebImContact=function(e){r=e},o.isEnabled=function(){return r&&e&&!e.isMe()&&e.canChat(t)},o.getAvailableOptions=function(){var t=[];if(e&&r)for(var n=e.getMessagingAddresses(),i=0;i<n.length;i++)n[i].canChat()&&t.push({id:n[i].get_id(),displayName:n[i].get_network().get_name()});return t},o.performAction=function(t,i){var o=s(e.getMessagingAddresses(),t);$WLXIM.startConversation(r,o?o.get_type():0,a(n),o?o.get_network():null,i)},o.dispose=function(){}}function o(e,t,n,r){var i,l=this;l.id=t?o.audioId:o.videoId,l.setWebImContact=function(e){i=e},l.isEnabled=function(){return i&&e&&!e.isMe()&&e.canCall(n)},l.getAvailableOptions=function(){var t=[];if(e&&i)for(var n=e.getMessagingAddresses(),r=0;r<n.length;r++)n[r].canCall()&&t.push({id:n[r].get_id(),displayName:n[r].get_network().get_name()});return t},l.performAction=function(n,o){var l=s(e.getMessagingAddresses());t?$WLXIM.startVideoCall(i,a(r),l,o):$WLXIM.startAudioCall(i,a(r),l,o),c()},l.dispose=function(){}}function a(e){return e=e||f,g[e]||e}function s(e,t){var n=null;if(t)for(var r=0;!n&&r<e.length;r++)e[r].get_id()==t&&(n=e[r])}function c(){function t(){e(n).unbind("pluginLoaded",t),e(n).unbind("callFinished",t),$header.hideLoading()}var n=window.Microsoft.Live.Messenger.Services.SkyJSHelper;n.skypeEnabled&&$header&&($header.showLoading(),e(n).bind("pluginLoaded",t),e(n).bind("callFinished",t))}var l=window,u=l.wLive,d=u.IC,f="identityControl",g={PeoplePane:"peoplePane"},p=d.ICCommonData;d.ICActionEmail=t,t.id="se",d.ICActionContactDetails=n,n.id="cd",d.ICActionEditProfile=r,r.id="ep",d.ICActionSendIm=i,i.id="si",d.ICActionCall=o,o.videoId="vc",o.audioId="ac"}(window.originaljQuery||jQuery)}),define("icpresence",["icaction"],function(){!function(e){function t(t,r){function s(){d=n.$WLXIM,d&&f&&!h&&!y&&(e(f).bind(o,l),v[i.ICActionEmail.id]=new i.ICActionEmail(f,g),v[i.ICActionEditProfile.id]=new i.ICActionEditProfile(f),v[i.ICActionContactDetails.id]=new i.ICActionContactDetails(f),v[i.ICActionSendIm.id]=new i.ICActionSendIm(f,t,r),v[i.ICActionCall.videoId]=new i.ICActionCall(f,!1,t,r),v[i.ICActionCall.audioId]=new i.ICActionCall(f,!0,t,r),h=!0,c(),$Do.when("$WLXIM.UserSignedIn",0,function(){!y&&f.getId()&&(u=f.isMe()?d.user.get_contact():d.user.findContactById(f.getContacts()[0].getId()),u&&(v[i.ICActionSendIm.id].setWebImContact(u),v[i.ICActionCall.videoId].setWebImContact(u),v[i.ICActionCall.audioId].setWebImContact(u),c()))}))}function c(){var t=p.isOnline(),n=m!=t;m=t;for(var r in v){var i=v[r].isEnabled();n=n||i!=_[r],_[r]=i}n&&e(p).trigger(a)}function l(e){c()}var u,d,f,g,p=this,h=!1,v={},m=!1,_={},y=!1;_[i.ICActionEmail.id]=!1,_[i.ICActionContactDetails.id]=!1,_[i.ICActionEditProfile.id]=!1,_[i.ICActionSendIm.id]=!1,_[i.ICActionCall.videoId]=!1,_[i.ICActionCall.audioId]=!1,p.actions=v,p.setPerson=function(e,t){f=e,g=t,s()},p.isOnline=function(){return f&&f.isOnline(t)},p.dispose=function(){for(var t in v)v[t].dispose(),delete v[t];v=null,e(f).unbind(o,l),u=null,y=!0},$Do.when("wlxim",0,s)}var n=window,r=n.wLive,i=r.IC,o="changed",a="presenceChanged";i.ICPresence=t}(window.originaljQuery||jQuery)}),define("iccard",["icpresence"],function(){!function(e){function t(){if(!r){var t=e("#"+s);0==t.length?(r=e("<div>").prop("id",s),e("body").prepend(r),i.$Sutra&&sutra(r,d+"ICMenuList")):r=t}return r}function n(n,r){function o(){r&&e(r).bind(u,P)}function s(r){M=e("<ul>"),M.addClass(c),M.prop("id",n.id+"_menu_ul"),M.html(C()),b(),P(),t().append(M);var i={offset:{x:0,y:5},nofocus:1,hoverDelay:l,menuEl:M[0]};if($menu.create(r,0,i),E=M[0].binding,S(),A&&!A.isMe()){var o=T();o.Template=n.template.id,o.hasContactDetails=y(a.ICActionContactDetails.id),o.hasEmail=y(a.ICActionEmail.id),o.hasIM=y(a.ICActionSendIm.id),o.hasVideoVoiceCall=y(a.ICActionCall.videoId)||y(a.ICActionCall.audioId),$BSI.reportEvent("View.IC.Nav",o)}}function y(e){return r&&r.actions[e]&&r.actions[e].isEnabled()?1:0}function C(){var e="",t=y(a.ICActionContactDetails.id)?p:g,i=t.format(n.getName().encodeHtml(),n.getEmail().encodeHtml(),a.ICActionContactDetails.id);if(r){A&&A.isMe()&&(i=p.format(n.getName().encodeHtml(),_.getActionDescription(a.ICActionEditProfile.id).encodeHtml(),a.ICActionEditProfile.id));for(var o=0;o<v.length;o++){var s=v[o],c=_.getActionDescription(s).encodeHtml();e+=f.format(s,c,w(s))}}return i+e}function b(){i.$Sutra&&M&&M.length>0&&(sutra(M,d+"ICMenu"),sutra(e("#"+a.ICActionEditProfile.id,M),d+"ICMenuEditProfile"),sutra(e("#"+a.ICActionContactDetails.id,M),d+"ICMenuContactDetails"),sutra(e("#"+a.ICActionEmail.id,M),d+"ICMenuSendEmail"),sutra(e("#"+a.ICActionSendIm.id,M),d+"ICMenuStartIM"),sutra(e("#"+a.ICActionCall.videoId,M),d+"ICMenuVideoCall"),sutra(e("#"+a.ICActionCall.audioId,M),d+"ICMenuAudioCall"),sutra(e(".c_ic_menu_name",M),d+"ICMenuName"),sutra(e(".c_ic_menu_sub",M),d+"ICMenuSub"))}function w(t){var n;switch(t){case"si":n=h.IM;break;case"se":n=h.Mail;break;case"vc":n=h.Video;break;case"ac":n=h.Audio}return n?e($IS.CreateFromConfig("ic/icmenu2_gray.png,ic/icmenu2_gray.png,",n,$Config.imgsBase)).html():""}function S(){for(var t=0;t<v.length;t++)x(v[t]);e("#ep a",M).bind("click",function(){r.actions[a.ICActionEditProfile.id].performAction()}),e("#cd a",M).bind("click",function(){r.actions[a.ICActionContactDetails.id].performAction()})}function $(){for(var t=0;t<v.length;t++)k(v[t]);e("#ep a",M).unbind(),e("#cd a",M).unbind()}function I(){E&&(E.dispose(),E=null),M&&($(),M.remove(),M=null)}function k(t){e("#"+t,M).unbind()}function x(t){function i(e){$IS.toggle(o[0],e-a),a=e}var o=e("#"+t,M),a=1;o.hover(function(){i(2)},function(){i(1)}),o.bind("mousedown",function(){i(3)}),o.bind("mouseup",function(){i(1)}),o.bind("mouseup",function(){i(1)}),r.actions[t]&&o.bind("click",function(e){e&&e.preventDefault(),r.actions[t].performAction(null,o[0]),N.hide();var i=T();i.IdentityControlNav=L(t),i.Template=n.template.id,$BSI.reportEvent("SelectClick.IC.Nav",i)})}function L(e){switch(e){case a.ICActionEditProfile.id:return"Profile";case a.ICActionContactDetails.id:return"CDMenu";case a.ICActionEmail.id:return"Email";case a.ICActionSendIm.id:return"IM";case a.ICActionCall.videoId:return"Video";case a.ICActionCall.audioId:return"Voice"}return"UnknownAction"}function T(){var e={},t={};if(A)for(var n=A.getContacts(),r=0;r<n.length;r++)t[n[r].getSourceId()]=!0;for(var i=0;i<m.length;i++)e[m[i]]=t[m[i]]||!1;return e}function P(){if(M&&r){for(var t=0;t<v.length;t++){var n=v[t],i=e("#"+n,M);r.actions[n]&&r.actions[n].isEnabled()?i.css("display",""):i.hide()}E&&E.update()}}var M,E,A,N=this;N.setPerson=function(e){A=e},N.show=function(e){M||s(e),E&&!E.isOpen()&&E.show()},N.hide=function(){E&&E.isOpen()&&E.hide()},N.toggleVisibility=function(){E&&E.toggleState()},N.dispose=function(){r&&(e(r).unbind(u,P),r=null),I()},o()}var r,i=window,o=i.wLive,a=o.IC,s="c_ic_menus",c="c_ic_menu c_m t_hovl",l=625,u="presenceChanged",d="$Sutra.Shared.",f='<li id="{0}" class="c_ic_menu_glyph"><a href="#" alt="{1}" tabindex="1" role="menuitem"><span class="is_c">{2}</span></a></li>',g='<li id="{2}"><span><div class="c_ic_menu_name">{0}</div><div class="c_ic_menu_sub">{1}</div></span></li>',p='<li id="{2}"><a href"#" tabIndex="1" role="menuitem"><div class="c_ic_menu_name">{0}</div><div class="c_ic_menu_sub">{1}</div></a></li>',h={Mail:"1,0,30,31,",IM:"32,0,30,31,",Audio:"63,0,30,31,",Video:"94,0,30,31,"},v=[a.ICActionEmail.id,a.ICActionSendIm.id,a.ICActionCall.videoId,a.ICActionCall.audioId],m=["ABCH","FB","GOOG","LI","MYSP","SINWE","SKYPE","SCD","TWITR","WL"],_=a.ICCommonData;a.ICCard=n}(window.originaljQuery||jQuery)}),define("ic",["iccard"],function(){!function(e){function t(t,u,d){function f(){var e=t.getTileSize();if(!T.isMe()&&("mxl"==e||"mxxl"==e)){var n=T.getContacts(),r=n.length>0?n[0].getId():null;r&&($pwc.getPersonDetails(r)?(P=$pwc.getPersonDetails(r),p(!0)):$pwc.client.loadPersonDetails(r,function(){P=$pwc.getPersonDetails(r),p(!0)}))}}function g(){if(E){var e=j;H=!1,R.deactivate(),R.render(),F.replaceWith(E),W=!0,e&&R.activate()}}function p(e){var t=S();$B.IE&&t&&t.indexOf("fbcdn")>0&&(t=void 0),!B||H&&!e||(H=!0,B.prop("src")==t?h():(B.bind("load",h),B.bind("error",v),t?B.prop("src",n.$ssl.ensureSSLImageUrl(t)):B.prop("src",B.prop("errsrc")||$icerrsrc)))}function h(){try{l[B.prop("src")]=1,B.attr("class","c_ic_tile");var e,t,n=0;t=B[0].naturalWidth,e=B[0].naturalHeight;var r=B.css("width"),i=B.css("height");if(1==t&&1==e||"1px"==r&&"1px"==i)return void v();var o=Math.round;if(t&&e&&t!=e)if(t>e){var a=parseInt(i),s=parseInt(r),c=o(t*(a/e));n=-o((c-s)/2),B.css({width:"auto","max-width":"none",left:n+"px"})}else B.css({height:"auto","max-height":"none"});B.css("visibility","")}catch(u){D&&D.logError("IC_OnUserTileLoad_Error",u)}}function v(){var e;try{e=B.parent(),B.remove();var t=B.attr("errsrc")||$icerrsrc;B.attr("src")!=t&&(B.attr("class","c_ic_tile").css("top","").css("left","").css("height","").css("width",""),setTimeout(function(){B.attr("src",t).css("visibility","")},0))}catch(n){D&&D.logError("IC_OnUserTileError_Error",n)}finally{null!=e&&e.append(B)}}function m(){var t=e(k("frame"),F),n=e(k("bar"),F),r=!d.hidePresence&&A.isOnline();t.length>0?$IS.setClass(t[0],r?c:s):(n.removeClass(r?s:c),n.addClass(r?c:s))}function _(){var t=e(k("bar"),F);t.css("visibility","inherit")}function y(){var t=I(),n=$();R.getShowICCard()&&T&&(t=""),e(k("frame_clip"),F).attr("title",t),e(k("usertile"),F).attr("alt",t);var r=e(k("name"),F);r.attr("title")&&r.attr("title",n)}function C(){return T&&T.getIsFavorite()}function b(){return d.showICCard&&t.getShowCard()}function w(){var e=d.name||T&&T.getDisplayNameWithFallback(),n=t.getName();return n="{0}"==n?null:n,e||n||""}function S(){var e=t.getUserTileUrl(),n=T&&T.isMe()&&!L(e)?e:null;return n||d.userTileUrl||P&&P.getUserTile()||T&&T.getUserTile()||t.getUserTileUrl()}function $(){var e=d.email;if(!e&&T){var n=T.getContactEmails();n.length>=0&&(e=n[0])}return e||t.getEmail()}function I(){if("none"==d.toolTipType)return"";var e;return e=d.toolTipType&&"email"!=d.toolTipType&&w()?w():$(),e||""}function k(e){return"#{0}_{1}".format(M,e)}function x(e){return!o||null!=e&&""!=e?e:'""'}function L(e){return e.indexOf("blueman")>=0}d=d||{};var T,P,M,E,A,N,D,F,B,R=this,H=!1,j=!1,W=!0,O=!1;R.person=null,R.pwcId=u,R.template=t,R.init=function(){R.id=M=t.getNewId(),R.namespace=d.namespace,A=new i.ICPresence(d.useActiveMessagingAddress),N=new i.ICCard(R,A),u&&$Do.when("$pwc",0,function(){$pwc.callWhenReady(function(){O||(D=r.People.Reporter,R.person=T=$pwc.getPerson(u),T&&(A.setPerson(T,$()),N.setPerson(T),y(),f()),E&&g())})})},R.render=function(){var n=w().encodeHtmlAttribute(),r=I().encodeHtmlAttribute();E=t.html.replace(new RegExp(t.id,"g"),M).format(n,"","",x(r));var i=S();if(l[i]){var o=e("<div></div>").html(E),a=e(k("usertile"),o);a.prop("src",i),a.addClass("c_ic_tile"),a.css("visibility",""),E=o.html()}return E},R.activate=function(n){if(!j&&!O){if(W){if(W=!1,F=n||e("#"+M),F.addClass("icpwc"),B=e(k("usertile"),F),y(),C()){var r=e(k("fstarp"),F);if(r.length>0){r.removeClass("c_ic_fstarp_hide");var i=e(k("name"),F);i.length>0&&i.parent().addClass("c_ic_name_fstar_"+t.getTileSize())}}R.getShowICCard()||e(k("usertilecontainer"),F).addClass("c_emptymenu"),_()}e(A).bind(a,m),m(),setTimeout(p,0),j=!0}},R.deactivate=function(){j&&!O&&(e(A).unbind(a,m),F&&(e(k("frame_clip"),F).unbind(".ic"),e(k("name"),F).unbind()),B&&B.unbind(),N.dispose(),N=new i.ICCard(R,A),j=!1)},R.isActive=function(){return j},R.getUserTileContainerElement=function(){return e(k("usertilecontainer"),F)},R.getPresence=function(){return A},R.dispose=function(){R.deactivate(),A&&(A.dispose(),A=null),F&&F.html(""),F=B=null,R.person=T=P=null,O=!0},R.getShowICCard=b,R.getName=w,R.getUserTileUrl=S,R.getEmail=$,R.getTooltip=I,R.init()}var n=window,r=n.wLive,i=r.IC,o=$B.IE,a="presenceChanged",s="c_ic_blueframe",c="c_ic_greenframe",l={};i.IC=t}(window.originaljQuery||jQuery)}),define("icmanager",["ic"],function(){!function(e){function t(){function t(e,t,n){var r=new i.IC(e,t,n);return a[r.id]=r,t&&(s[t]=s[t]||[],s[t].push(r)),n.namespace&&(c[n.namespace]=c[n.namespace]||[],c[n.namespace].push(r)),r}var r,o=this,a={},s={},c={},l=!1;o.init=function(){l||(l=!0,r=new i.ICTemplates,$Do.register("$icm",0,!0))},o.addTemplates=function(e){l&&r.addTemplates(e)},o.createICForPerson=function(e,n,i){if(!r)return null;i=i||{};var o=r.getTemplate(e);return n&&o?t(o,n,i):null},o.createNonContactIC=function(e,n,i){if(!r)return null;var o=r.getTemplate(e);return o?(i=i||{},i.email=n,t(o,null,i)):null},o.createICsFromCids=function(e,t,r,i){function a(t,n){var a=o.createICForPerson(e,n.getId()||t,i);r(l[t],a)}function s(e,t){for(var n=0;n<e.length;n++)a(e[n],c.getPerson(e[n]));for(n=0;n<t.length;n++)r(t[n],null)}var c,l={};$Do.when("$pwc",0,function(){c=n.$pwc,c.callWhenReady(function(){for(var e=[],n=0,r=t.length;r>n;n++){var i=t[n][0];if(l[i]=t[n][1],"0"!=i&&0!=i){var o=c.getPerson(i);o?a(i,o):e.push(i)}}e.length>0&&c.client.loadProfiles(e,s)})})},o.getICById=function(e){return a[e]||null},o.getICsForPerson=function(e){return s[e]},o.getICsForNamespace=function(e){return c[e]||[]},o.removeIC=function(e){if(delete a[e.id],e.pwcId){var t=e.pwcId;s[t]&&(s[t].remove(e),0==s[t].length&&delete s[t])}if(e.namespace){var n=e.namespace;c[n]&&(c[n].remove(e),0==c[n].length&&delete c[n])}e.dispose()},o.removeAllICsByNamespace=function(e){var t=c[e];if(t){t=t.clone();for(var n=0;n<t.length;n++)o.removeIC(t[n])}},o.removeAllICs=function(){for(var e in a)o.removeIC(a[e])},o.dispose=function(){e(n).unbind("unload",o.dispose),o.removeAllICs(),a=null,c=null,s=null,r&&r.dispose(),r=o.templates=null,n.$icm=null},e(n).bind("unload",o.dispose)}var n=window,r=n.wLive,i=r.IC;i.ICManager=t,n.$icm=new t,$Do.register("$icmCreated",0,!0)}(window.originaljQuery||jQuery)}),define("safelinks",["validateconfig","jquery-1.7.2","bsi"],function(){!function(e){function t(e,t){var r=t&&t.getAttribute("wrap");if(r){var c=n.$Config,l=c.WS||{},u=l.SL||{},d=u.url;if(d){var f,g=r.split(o),p=g.slice(s).join(o),h={l:p,p:c.di,mkt:c.mkt};for(f=0;s>f;f++)g[f]&&(h[a[f]]=g[f]);
t.href=d+"?"+i.serialize(h)}}}var n=window,r=n.$BSI,i=n.$Utility,o="|",a=["h","o","u","q1","q2","q3","q4","q5"],s=a.length;r.addNavCallback(t)}(window.originaljQuery||jQuery)}),define("ssl",["validateconfig","jquery-1.7.2","bsi"],function(){!function(e){function t(){n=a.$Config,r=n.Ssl||{},i=r.imu,o=r.d}var n,r,i,o,a=window,s=(a.$Utility,a.Debug,"http://"),c="https://";t(),a.$ssl={ensureSSLImageUrl:function(e){return o||document.location.href.toLowerCase().startsWith(c)&&e.toLowerCase().startsWith(s)&&i&&(e=i+e.encodeUrl()),e},copyOutConfig:function(t){t.$Config.Ssl={},e.extend(t.$Config.Ssl,$Config.Ssl,!0),t.$ssl.resetCachedValues()},resetCachedValues:t}}(window.originaljQuery||jQuery)}),define("wlivenavlink",["registernamespace","pagestats","validateconfig","jquery-1.7.2","bsi","wlivecss","wlivemenu"],function(){!function(e){function t(){}function n(n,r){var o=this;o._id=t._getItemId(),o.$obj=e(n).first(),o._isDisposed=!1,r?(o._$a=o.$obj.children("a").first(),0==o._$a.length?o._$a=null:o.id=o._$a.attr("id"),sutra(o._$a,"$Sutra.Shared.NavLink",!0),o._$span=o.$obj.children("span:not(.is_c)").first(),0==o._$span.length&&(o._$span=null),o._$imageStrip=o.$obj.children("span.is_c").first(),0==o._$imageStrip.length&&(o._$imageStrip=null),o._$sep=o.$obj.children("span.c_ms").first(),0==o._$sep.length&&(o._$sep=null),o._$rchev=o.$obj.children("span.c_rchev").first(),0==o._$rchev.length&&(o._$rchev=null)):i(o,!1)}function r(t){t._$a&&0!=t._$a.length||(t._$a=e("<a></a>"),sutra(t._$a,"$Sutra.Shared.NavLink",!0),t.$obj.append(t._$a),t._isDisposed=!1)}function i(e,t){t&&(e.$obj=null),e._$a=null,e._$span=null,e._$sep=null,e._$rchev=null,e._$imageStrip=null}var o=window,a=o.wLive.Controls,s=o.$edh,c=0;a.NavItem=t,t._getItemId=function(){return"c_ci"+c++},a.NavLink=n;var l=n.prototype;l.setHtml=function(e){var t=this;return r(t),t._$a.html(e),sutra(t._$a,"$Sutra.Shared.NavLink",!0),t._$span&&(t._$a.detach(),t._$span.html(e),t._$span.append(t._$a)),t},l.setUrl=function(e){return this.setProperty("href",e)},l.setId=function(e){var t=this;return t.id=e,t.setProperty("id",e)},l.setProperty=function(e,t){var n=this;return r(n),n._$a.attr(e,t),n},l.enable=function(){var e=this;return e._$span&&(s.e(e._$span[0]),e._$a=e.$obj.find("a").first(),sutra(e._$a,"$Sutra.Shared.NavLink",!0),e._$span=null),e},l.disable=function(){var e=this;return e._$a&&(s.d(e._$a[0]),e._$span=e.$obj.find("span").first()),e},l.removeClick=function(){var e=this;return e._aclickHandler&&e._$a&&e._$a.unbind("click",e._aclickHandler),e},l.addClick=function(e,t){var n=this;return r(n),n.removeClick(),t||n.setUrl("#"),n._aclickHandler=function(t){var n;try{n=e(t)}catch(r){return $WebWatson.submitFromException(r),!1}return n},n._$a.click(n._aclickHandler),n},l.addMousedown=function(e){var t=this;return r(t),t._$a.mousedown(e),t},l.addSeparator=function(){var t=this;return t._$sep||(t._$sep=e('<span class="c_ms" role="presentation"></span>'),t.$obj.append(t._$sep)),t._$sep.css("display",""),t},l.removeSeparator=function(){var e=this;return e._$sep&&e._$sep.hide(),e},l.addRChev=function(){var t=this;return t._$rchev||(t._$rchev=e('<span class="c_rchev"></span>'),t.$obj.append(t._$rchev),t._$rchev.html($menu.createChevron($menu.chevronTypes.SmallRightDark,!0))),t._$rchev.show(),t},l.removeRChev=function(){var e=this;return e._$rchev&&e._$rchev.hide(),e},l.addImageStrip=function(t,n){var r=this;return r._$imageStrip||(r._$imageStrip=e(t),n?r._$a.append(r._$imageStrip):(r._$imageStrip.append(" "),r._$a.prepend(r._$imageStrip))),r},l.dispose=function(){var e=this;e._isDisposed||(e.removeClick(),i(e,!0),e._isDisposed=!0)},n.defaultOptions={html:"",separator:!1,url:"#",id:"",click:null,mousedown:null,container:"<li></li>",imageStrip:null},n.create=function(t){var r=e.extend({},n.defaultOptions,t),i=new n(r.container);return i.setHtml(r.html),i.setUrl(r.url),i.setId(r.id),r.separator&&i.addSeparator(),r.click&&i.addClick(r.click,r.url),r.mousedown&&i.addMousedown(r.mousedown),r.imageStrip&&i.addImageStrip(r.imageStrip),i}}(window.originaljQuery||jQuery)}),define("navigationcollections",["wlivenavlink"],function(){!function(e){function t(){var e=this;e._isItemsHashDirty=!0,e._itemsHashTable={},e._list=[],e.list=[]}function n(t,n,r,i,o){function a(e){s._menu||(n?s._menu=s._$ul[0].binding:(i.defaultLoc=T,$menu.create(e,P,i)&&(s._menu=s._$ul[0].binding)))}var s=this;s._id=S.NavItem._getItemId();var c=new S.MenuDataModel;if(s._items=[],s.$obj=e(t).first(),i=i||{},!n){var l,d,f=$Config.isLightTheme?$menu.chevronTypes.SmallDownDark:$menu.chevronTypes.SmallDownLight,g=$menu.createChevron(f,!0);o?(l='<span class="c_mlu">'+g+"  &nbsp;</span>",d=""):(l='<span class="c_mlu"></span>',d='<span class="c_chev"> '+g+"</span>");var h='<a href="#" class="uxfa_ml c_ml" onclick="return false">'+l+d+'</a><ul class="uxfa_m '+I+' t_hovl"></ul>';r?s.$obj.append(h):s.$obj.html(h)}s._$a=s.$obj.children("a.c_ml").first(),s._navLink=new $(s.$obj,!0),s._$mspan=s._$a.children("span.c_mlu").first(),s._$chev=s._$a.children("span.c_chev").first(),s._$ul=s.$obj.children("ul"),0==s._$ul.length&&(s._$ul=e('<ul class="uxfa_m '+I+' t_hovl"></ul>'),s.$obj.append(s._$ul)),s.id=s._$ul.attr("id"),s._menu=s._$ul[0].binding,p(s),c._list=s._items,s._$a.bind("click.menu",function(e){e.preventDefault(),a(e)}),s._$a.bind("mousedown.menu",a),sutra(s._$a,"$Sutra.Shared.MenuLink",!0),sutra(s._$ul,"$Sutra.Shared.MenuList",!0),s._dataModel=c,u(s,c._list),c.list=new ObservableArray(c._list)}function r(){var e=this;e.menu={}}function i(t,r,i){var o=this;o._id=S.NavItem._getItemId(),o._dataModel=new S.SplitMenuDataModel,o.$obj=e(t).first(),o._$a=new $(o.$obj,r),r?o._$sep=o.$obj.children(".c_ms"):(o._$a.setHtml("&nbsp;"),o._$sep=e('<span class="c_ms"> </span>'),o.$obj.append(o._$sep),o.$obj.addClass(k+" "+L)),o._$menu=new n(o.$obj,r,!0,{dockEl:o.$obj.get()[0]},i),o._dataModel.menu=o._$menu}function o(t){var n=this;n._isItemsHashDirty=!0,n._itemsHashTable={},n._logo=t&&t.logo||{containerWidth:"220px",imageStrip:"",text:"",title:"",url:"",hasPropertyText:!1},n._list=[],n.isLightTheme=t&&t.isLightTheme,n.getIndexById=function(e){if(n._isItemsHashDirty)for(var t=0;t<n._list.length;t++){var r=n._list[t]._id,i=n._list[t].id;n._itemsHashTable[r]=t,n._itemsHashTable[i]=t}return n._itemsHashTable[e]},n.getItemById=function(e){var t=n.getIndexById(e);return n._list[t]},n.getItemByIndex=function(e){return this._list[e]},n._dispose=function(){e(n.logo).unbind(),e([n.list]).unbind(),e(n.list).unbind()}}function a(t,n,r){var i=this;i._id=S.NavItem._getItemId(),i._needsToRender=!1,i.$obj=e(t);var o=new S.CommandBarDataModel(r);sutra(i.$obj,"$Sutra.Shared.CommandBarControl",!0),i._items=[],n||i.$obj.html('<div class="c_clogo"><a href="#"><h1><span class="c_clogoimg"></span><span class="c_clogot"></span></h1></a></div><ul class="c_cc"></ul><div class="c_cme">></div>'),i._$logo=i.$obj.children(".c_clogo"),i._$logoImage=i._$logo.find(".c_clogoimg"),i._$logoText=i._$logo.find("span.c_clogot"),i._$logoLink=i._$logo.find("a"),i._$ul=i.$obj.children("ul"),sutra(i._$ul,"$Sutra.Shared.CommandBar",!0),0==i._$logoImage.length&&(i._$logoImage=e('<span class="c_clogoimg"></span>'),i._$logoText.parent().prepend(i._$logoImage)),p(i,"$Sutra.Shared.CommandItem"),o._list=i._items,o._logo.imageStrip=i._$logoImage.html(),i._dataModel=o,l(i._$logoText,o._logo,"text","innerHTML"),l(i._$logoText,o._logo,"hasPropertyText",s,"function"),l(i._$logoLink,o._logo,"url","href"),l(i._$logoLink,o._logo,"title","title"),l(i._$logoImage,o._logo,"imageStrip",c,"function"),l(i._$logo,o._logo,"containerWidth",$B.IE_M6?"width":"min-width","style"),u(i,o._list),o.logo=new Observable(o._logo),o.list=new ObservableArray(o._list)}function s(e,t){t?e.hide():e.show()}function c(e,t){e.empty(),e.append(t)}function l(t,n,r,i,o){e(n).bind("propertyChanged",function(e,n,a,s){r==n&&("style"==o?t.css(i,a):"function"==o?i(t,a):t.attr(i,a))})}function u(t,n){e([n]).bind("arrayChange",function(n,r,i,o){t._needsToRender||e(t).trigger("beforeRender"),clearTimeout(t._renderTimeout),t._needsToRender=!0,t._renderTimeout=setTimeout(function(){t._needsToRender&&t.render&&t.render()},500),"insert"==r?t.add(o,i):"remove"==r&&t.remove(i,!0,o)})}function d(){D||(D=setTimeout(f,0))}function f(){D=0;for(var e=F.length,t=0;e>t;t++)F[t]();F.splice(0,e)}function g(e){F.push(e)}function p(t,r){var o=t._$ul.children("li");o.each(function(){var o=e(this);o.hasClass(k)?t._items.push(new i(o,!0)):o.hasClass(L)?o.hasClass(x)||t._items.push(new n(o,!0)):t._items.push(new $(o,!0)),r&&sutra(this,r,!0)})}function h(e){for(var t=e._items,n=0;n<t.length;n++)e._$ul.append(t[n].$obj)}function v(t,n,r){r||0==r||(r=t._items.length),g(function(){if(n.$obj){var i=t._$ul.children(),o=i[r];0!=i.length&&o?e(o).before(n.$obj):t._$ul.append(n.$obj);var a=n._$a;a.attr("role")||a.attr("role","button");var s=n._$ul;s&&(a.attr("aria-expanded","false"),a.attr("aria-haspopup","true"));var c=n.$obj.css("display");("list-item"==c||"block"==c&&$B.IE_M7)&&n.$obj.css("display",""),n.$obj.hasClass(L)&&!n.$obj.hasClass(k)&&h(n)}}),t._items.splice(r,0,n),t._dataModel&&(t._dataModel._isItemsHashDirty=!0),d()}function m(e,t,n){t&&!t._isDisposed&&(t.$obj&&(t.$obj.remove(),e._dataModel&&(e._dataModel.isItemsHashDirty=!0),e._$ul=e.$obj.children("ul")),n&&t.dispose())}function _(e,t,n,r){var i=e._items.splice(t,1)[0];return i._isDisposed||(g(function(){m(e,i,n)}),d()),i}function y(e){var t=e._items;if(t)for(var n=0;n<t.length;n++)t[n].dispose();return e._items=[],e._$ul&&e._$ul.html(""),e}window.ObservableArray=function(e){this.array=e};var C=ObservableArray.prototype;C.insert=function(t,n){var r=this;t>=0&&t<=r.array.length&&e([r.array]).triggerHandler("arrayChange",["insert",t,n])},C.push=function(e){var t=this;t.insert(t.array.length,e)},C.remove=function(t){var n=this;if(t>=0&&t<n.array.length){var r=n.array[t];e([n.array]).triggerHandler("arrayChange",["remove",t,r])}},C.clear=function(){for(var e=this;e.array.length;)e.remove(e.array.length-1)},C.length=function(){return this.array.length},window.Observable=function(e){this.obj=e};var b=Observable.prototype;b.setProperty=function(t,n){var r=this,i=r.obj[t];n!=i&&(r.obj[t]=n,e(r.obj).trigger("propertyChanged",[t,n,i]))};var w=window,S=w.wLive.Controls,$=S.NavLink,I="c_m",k="c_sm",x="c_cmore",L="c_mcp",T=0,P=6;S.MenuDataModel=t,S.Menu=n;var M=n.prototype;M.makeSubMenu=function(){var e=this,t=$menu.chevronTypes.SmallRightDark;return $B.rtl&&(t=$menu.chevronTypes.SmallLeftDark),e._$chev.html(" "+$menu.createChevron(t,!0)),e},M.setHtml=function(e){var t=this;return t._$mspan.html(e),t},M.setId=function(e){var t=this;return t._$ul.attr("id",e),t.id=e,t},M.getDataModel=function(){return this._dataModel},M.getMenu=function(){return this._menu},M.getLink=function(){return this._navLink},M.add=M.push=function(t,n,r){var i=this;return v(i,t,n),r||t._$a.hasClass("c_ml")||e(t._$a).bind("click",$menu.closeAll),i._menu&&i._menu.update(),i},M.remove=function(t,n,r){var i=this,o=_(i,t,n,r);return e(o._$a).unbind("onclick",$menu.closeAll),i._menu&&i._menu.update(),o},M.clear=function(){var e=this;return y(e),e._menu&&e._menu.update(),e},M.dispose=function(){var e=this;e._$a.unbind(".menu"),e.clear(),e._menu&&e._menu.dispose()},n.defaultOptions={html:"",id:"",subMenu:!1,container:'<li class="'+L+'"></li>',menuParams:null,linkId:""},n.create=function(t){var r=e.extend({},n.defaultOptions,t),i=new n(r.container);return i.setHtml(r.html),i.setId(r.id),i._$a.attr("id",r.linkId),r.subMenu&&i.makeSubMenu(),i},S.SplitMenuDataModel=r,S.SplitMenu=i;var E=i.prototype;E.getDataModel=function(){return this._dataModel},E.dispose=function(){var e=this;e._$menu&&e._$menu.dispose()},E.setProperty=function(e,t){var n=this;return n.$obj.attr(e,t),n},E.getMenu=function(){return this._$menu},E.getLink=function(){return this._$a},i.defaultOptions={id:"",linkId:"",container:"<li></li>",useChevronAsText:!0},i.create=function(t){var n=e.extend({},i.defaultOptions,t),r=new i(n.container,!1,n.useChevronAsText);return r.setProperty("id",n.id),r._$a.setId(n.linkId),r},S.CommandBarDataModel=o;o.prototype;S.CommandBar=a;var A=a.prototype;A.add=A.push=function(e,t){var n=this;return sutra(e.$obj,"$Sutra.Shared.CommandItem",!0),v(n,e,t),n},A.remove=function(e,t,n){return _(this,e,t,n)};var N;A.addLightHover=function(){this.$obj.addClass("c_clih");var e=this.$obj.parent();e.hasClass("c_hcnlto")&&(e.removeClass("c_hcnlto"),N=!0)},A.removeLightHover=function(){N?(this.$obj.parent().addClass("c_hcnlto"),N=!1):this.$obj.removeClass("c_clih")},a.defaultOptions={container:'<div class="c_c c_cbb c_ccptc"></div>'},a.create=function(t){var n=e.extend({},a.defaultOptions,t),r=new a(n.container);return r},A.render=function(){var t=this;clearTimeout(t._renderTimeout),e(t).trigger("afterRender"),t._needsToRender=!1},A.getDataModel=function(){var e=this;return e._dataModel},A.dispose=function(){for(var e=this,t=0,n=e._items.length;n>t;t++)m(e,e._items[t],!0);e._dataModel._dispose()},A.get=M.get=function(e){return this._items[e]},A.count=M.count=function(){return this._items.length},A.clear=function(){var e=this;return y(e),e};var D,F=[]}(window.originaljQuery||jQuery)}),define("sharedlapsetimer",["csiperf"],function(){!function(){window.$CSIPerf.lapse.push({s:"sjs",t:(new Date).getTime()})}()}),define("headerhelper",["jquery-1.7.2","registernamespace","pagestats","baseutil","domutils","wliveimagestrip","wlivecss","wlivemenu","csiperf","date","pwcinitializer","icmanager","safelinks","ssl","navigationcollections","sharedlapsetimer"],function(){!function(e){function t(e){return e=e||_ge("c_h_ttl"),'<div><ul class="c_h_ttl">'+e.innerHTML+'</ul><div class="c_clr"></div></div>'}function n(){var n=wLive.Controls.Notifications;if(n){var i=t(),o=n.createFlyout({title:"",content:i,anchor:_ge("c_clogoc"),options:{moreCss:"c_headerBar",bubble:6,maxWidth:g,animation:{entranceType:"slidefadein2",entranceArguments:[{left:0,top:-20,override:!0}],exitType:"slidefadeout2",exitArguments:[{left:0,top:-20}]}}});n.getQueue().start(),o.show(),e(o).bind("aftershow",function(){var t=e(".c_headerBar .UserContent div")[0];r(e(t).find("a"),o),l.$Sutra&&$Sutra.Shared&&$Sutra.Shared.HeaderTiles&&sutra(t,"$Sutra.Shared.HeaderTiles")})}}function r(t,n){e(document).on("mousedown",".c_headerBar",function(t){return e(t.srcElement).parents("a").addClass("pressed"),!1}).on("mouseup","html",function(t){e(".c_headerBar a").removeClass("pressed")}),t.each(function(){var t=e(this);ae(t,t.attr("id")),t.click(function(){n&&n.dismiss()})}),l.$Sutra&&$Sutra.Shared&&$Sutra.Shared.HeaderTile&&t.each(function(){sutra(this,"$Sutra.Shared.HeaderTile")})}function i(e){13==e.which&&(c="keydown"==e.type)}function o(){var e=window.location.host.split("."),t="."+e[e.length-2]+".com",n=new Date,r=$HIC,i=f.getCookie(be,1)||"",o=i.split("|");n.setDate(n.getDate()+r.e),o[0]!=r.c&&(o=[]),o[0]=r.c||o[0]||"",o[1]=r.m||0===r.m?r.m:o[1]||"",o[2]=r.l||0===r.l?r.l:o[2]||"",o[3]=r.cl||o[3]||"",o[4]=r.dg||0===r.dg?r.dg:o[4]||"",o[5]=r.scl||o[5]||"",o[0]?f.setCookie(be,o.join("|"),t,0,n,1):f.deleteCookie(be,t)}var a,s,c,l=window,u=l.$Config,d=l.$Do,f=l.$Cookie,g=(e(l),642),p=[],h="SelectClick.MetroHeader.Nav",v="c_h_mail",m="c_h_ppl",_="c_h_cal",y="c_h_sd",C="c_h_dfe",b="c_h_dfi",w="c_h_wd",S="c_h_xl",$="c_h_ppt",I="c_h_on",k="c_h_oo",x="c_h_sw",L="c_clogot",T="c_clogoc",P="c_hiconm",M="c_hiconu",E="c_hiconc",A="c_coh",N="c_cof",D="c_memenu",F="c_melink",B="c_himla",R="c_himld",H="c_memenuic",j="c_profile",W="c_hli",O="c_wimnetsub",U="c_signout",Q="c_wimneton_FB",V="c_wimnetoff_FB",q={};q[v]="Mail",q[m]="People",q[_]="Calendar",q[y]="SkyDrive",q[C]="DogExt",q[b]="DogInt",q[w]="Word",q[S]="Excel",q[$]="PowerPoint",q[I]="OneNote",q[k]="Office",q[x]="Sway",q[L]="Home",q[T]="Switcher",q[P]="webIM",q[M]="undo",q[E]="gear",q[A]="help",q[N]="feedb",q[F]="me",q[B]="presence",q[R]="presence",q[H]="c_memenuic",q[j]="profile",q[W]="account",q[O]="3pchatm",q[U]="signout",q[Q]="fbchat",q[V]="fbchat";var z=e("#c_signin"),X=function(){for(var t=0;t<p.length;t++)p[t].unbind("click");z.unbind(),e(".c_clogo").unbind(),e(l).unbind("unload",X)};e(".c_clogo a").attr("onclick",""),l.$header={};var G=0;e("#c_clogoc").bind("click",function(){return window.require?window.require(["flyout","doregister"],n):n(),l.top.$HeaderWebIM&&l.top.$HeaderWebIM.setUnreadCountEl(_ge("#c_murc")),!1}),e("#c_cof").bind("click",function(){l.require&&require(["feedbackdialoghelper","feedbackdialog","feedbackdialog.html"],function(){})}),e("#c_clogoc").bind({keydown:i,keyup:i}),l.$header.showLoading=function(){if(!a){var t=_ge("c_header"),n=t&&t.firstChild;n&&(a=e($f.createLoading(0,$f.loadingType.flying,"100%","4px",0,"#fff")),a.addClass("c_h_flyingDots"),n.appendChild(a.get(0)))}G++,$f.showLoading(a)},l.$header.hideLoading=function(){G--,G=0>G?0:G,a&&!G&&$f.hideLoading(a)},l.$header.getDummyHeader=function(){if(!s){s=document.createElement("ul"),s.className="c_mcp t_hdbg c_c";var e=document.createElement("li");e.style.listStyle="none",s.appendChild(e),document.body.appendChild(s)}return s};var K=function(e){if(l.$PF){var t=encodeURIComponent($PF.getCurrentUrl()),n=$f.replaceQs(z.attr("href"),"wreply",t);return $BSI.navigateTo(n,"_top"),$f.cancelEvent(e)}return!0};z.bind("click",K),e(l).bind("unload",X);var J,Y,Z,ee,te,ne=[],re=function(e,t,n){this.execute=function(r){r.href.indexOf("?rru=home")>-1?r.href=r.href.replace(t,n):r.href=r.href.replace(e,n)}},ie=function(e,t,n){this.execute=function(r){var i=r.href;if(i.indexOf(t)>-1&&i.indexOf("#")<0&&!i.match(/[\?|&|\/]cid/))if(n){var o="."+u.d,a=o+"/"+e;"profile"==t.toLowerCase()&&i.indexOf("/home")>0&&(o+="/home"),r.href=i.replace(o,a)}else{var s="cid="+e,c="?";i.indexOf(c)>-1&&(c="&"),r.href=i+c+s}}},oe=function(e,t){this.execute=function(n){e&&n.href.indexOf("?rru=inbox")>-1?n.href=e:t&&n.href.indexOf("?rru=contacts")>-1&&(n.href=t)}},ae=function(e,t,n){e&&Boolean(q[t])&&(e.bind("click",function(){var e=q[t];Boolean(n)&&(e+=n),$BSI.reportEvent(h,{MetroHeaderNav:e})}),p.push(e))};l.$header.reportBSIMenu=ae;var se=function(t){var n=t.getAttribute("hid");Boolean(q[n])&&ae(e(t),n,"A")};d.register("$Header.MenuBind",se);var ce=function(){ae(e("#c_h_theme_m_ul"),D)};d.register("$Header.ThemesMenuBind",ce),u.Header&&(J=u.Header.MailLink,Y=u.Header.ContactsLink,Z=u.Header.HotmailDomain,te=u.Header.OldHomeDomain,ee=u.Header.OldHotmailDomain);var le=Z;J||Y?ne[ne.length]=new oe(J,Y):le&&(ne[ne.length]=new re(ee,te,Z));var ue=l.$HIC&&$HIC.c;ue&&ue.length>0&&(ne[ne.length]=new ie("cid-"+ue,"profile",!0),ne[ne.length]=new ie(ue,"skydrive."));var de=[],fe=[],ge=l._ge("c_header");if(ge){var pe=$css.getCN("c_hleft","div",ge)[0];pe&&(fe=pe.getElementsByTagName("a"))}for(var he=fe.length-1;he>=0;he--){var ve=fe[he];de.push(ve),ae(e(ve),ve.id),l.$Sutra&&$Sutra.Shared&&$Sutra.Shared.HeaderLink&&sutra(ve,"$Sutra.Shared.HeaderLink")}ae(e("#c_clogot"),"c_clogot"),ae(e("#c_clogoc"),"c_clogoc"),ae(e("#c_hiconu"),"c_hiconu"),ae(e("#c_hiconm"),"c_hiconm"),ae(e("#c_hiconc"),"c_hiconc");for(var me,_e,ye=(e("#c_hmc").find("a").each(function(){de.insert(0,this)}),de.length-1);ye>=0;ye--){me=de[ye],!me.target&&(me.href.indexOf("//g.live")>-1||me.href.indexOf(u.sd)<0)&&(me.target="_top");for(var Ce=ne.length-1;Ce>=0;Ce--)_e=ne[Ce],_e&&_e.execute(me)}if(l.$HIC){var be="HIC";d.register("$Header.UpdateCookie",o)}}(window.originaljQuery||jQuery)}),define("mecontrol",["headerhelper"],function(){!function(e){function t(){function t(){e(n).unbind(".me"),d&&e(d).unbind("click",i)}function i(e){$menu.closeCurrent();var t=n.$Logout;t&&t.doLogout&&t.doLogout(e)}var o,a,s,c,l,u,d,f=this,g=!1,p=!1,h="c_memenu",v="c_meic",m="c_melinkspan",_="c_melink";e(n).bind("unload.me",t),d=_ge("c_signout"),d&&e(d).bind("click",i),f.copyAndInitializeMenu=function(t){t=t||n.$PF&&n.$PF.getAppFrameWindow()||window;var r=_ge(h),i=t._ge(h);u=t._ge(m);var o=!(n==t||r&&r.initialized&&i.isCopied);if(o&&(g=!1),!g&&t.$f){var a=_ge(m);if(l=r||i,o){r&&(e(r).remove(),l=i);var s=_ge(_);s&&e(s).remove();var d=$header.getDummyHeader().firstChild,p=t.$f.getLocation(t._ge(m),1,1),v=document.createElement("ul"),y=document.createElement("a");v.innerHTML=l.innerHTML,v.className=l.className,v.id=l.id,v.initialized=1,i.isCopied=1,y.style.position="absolute",y.style.top=p.bottom+"px",y.style.left=($B.rtl?p.left:p.right)+"px",y.style.height=0,y.style.padding=0,y.id=_,l=v,c=y,d.appendChild(y),d.appendChild(v),e(n).bind("resize.me",function(){v.initialized=0})}else r&&a&&r.parentNode!=a.parentNode&&($css.add(r,"uxfa_m c_m t_hovl"),a.parentNode.insertBefore(r,a.nextSibling),c=_ge(_));f.init(),$Do.when("$HeaderWebIM.Initialize")}},f.openMenu=function(e){f.copyAndInitializeMenu(),g&&(l.binding?l.binding.toggleState():$menu.create(e,0,{sourceEl:c,menuEl:l,pressedStateEl:u}))},f.createMeICs=function(){if(!p){p=!0;var t=n.$icm,i=r.cid,o=_ge(v);if(o){var a=t.createICForPerson("MeControlMedium",i);if(a){var s=e(o);s.html(a.render()),a.activate();var c=s.find("img");c.attr("title",s.attr("title"))}}var l=_ge("c_memenuic");if(l){var u=t.createICForPerson("MeControlXXL",i);if(u){var d=e(l);d.html(u.render()),u.activate();var f=d.find("img");f.attr("title",d.attr("title"))}}}},f.init=function(){g||(o=e("#c_memenu"),a=e("#c_memenu_right"),s=e("#c_memenu_left"),$Do.when("$ic",0,f.createMeICs),n.$header&&(n.$header.reportBSIMenu(e("#c_himla"),"c_himla"),n.$header.reportBSIMenu(e("#c_himld"),"c_himld"),n.$header.reportBSIMenu(e("#c_memenuic"),"c_memenuic"),n.$header.reportBSIMenu(e("#c_profile"),"c_profile"),n.$header.reportBSIMenu(e("#c_hli"),"c_hli"),n.$header.reportBSIMenu(e("#c_wimnetsub"),"c_wimnetsub"),n.$header.reportBSIMenu(e("#c_signout"),"c_signout")),sutra(_ge(h),"$Sutra.Shared.MeControlMenu"),sutra(_ge("c_profile"),"$Sutra.Shared.Profile"),sutra(_ge("c_hli"),"$Sutra.Shared.Account"),sutra(_ge("c_signout"),"$Sutra.Shared.SignOut"),g=!0)},$Do.when("$icm",0,f.createMeICs)}var n=window,r=n.$Config,i=_ge("c_melink");i&&(_$meLink=e(i),_$meLink.mouseover(function(){window.top.$MeControl.copyAndInitializeMenu(n)}),_$meLink.focus(function(){window.top.$MeControl.copyAndInitializeMenu(n)}),n.$header.reportBSIMenu(_$meLink,"c_melink"),sutra(i,"$Sutra.Shared.MenuLink")),n.$MeControl=new t}(window.originaljQuery||jQuery)}),define("footer",["mecontrol"],function(){!function(e){function t(){var e=null;if(b.XMLHttpRequest)e=new XMLHttpRequest;else if(b.ActiveXObject)try{e=new b.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}return e}function n(){var n=t(),r=i("LanguagePicker.Client.Title"),o='<div class="loadingArea"><table class="loadingTable"><tr><td class="loadingSpinner" id="lpSpinner"></td><td class="lpLoading">'+i("LanguagePicker.Client.Loading")+"</td></tr></table></div>",c=wLive.Controls.Notifications,l=c.createFlyout({title:r,content:o,anchor:_ge("uxp_ftr_link_language"),buttons:{action:i("LanguagePicker.Client.Save")},options:{dismissOnButtonClick:!1,moreCss:"languagePickerFlyout"}});if(_=l,e(l).bind({"buttonclick.flyout":function(n,r,o){if("action"===o){var s=e(l.content()).find("form"),c=s[0].elements,u=c.language.value,d=c.canary.value;e(l.content()).find(".UserContent").html('<div class="loadingArea"><table class="loadingTable"><tr><td class="loadingSpinner" id="lpSpinner"></td><td class="lpLoading">'+i("LanguagePicker.Client.Saving")+"</td></tr></table></div>");if(e(".languagePickerFlyout button.default").hide(),b.$f){var f=e($f.createLoading(0,$f.loadingType.spinning,"25px","25px"));e("#lpSpinner").append(f),$f.showLoading(f)}var g=t();g&&(g.onreadystatechange=function(){if(4==g.readyState&&200==g.status)if(l.dismiss(),b.$PF)try{b.top.location=b.$PF.getCurrentUrl()}catch(e){}else{var t=g.responseText,n=b.top.location.href.toString(),r=$f.replaceQs(n,"mkt",t);try{b.top.location.href=r,-1!=n.indexOf("#")&&b.top.location.reload()}catch(e){}}else 4==g.readyState&&200!=g.status&&(l.dismiss(),a(F.saving))},g.open("POST","/handlers/languagesave.mvc?canary="+encodeURIComponent(d)+"&lang="+u,!0),g.send("canary="+encodeURIComponent(d)+"&lang="+u))}},"beforedismiss.flyout":function(t,n,r){e(document.body).toggleClass(T,!1)}}),e(document.body).toggleClass(T,!0),l.show().then(function(e){}),c.getQueue().start(),b.$f){var u=e($f.createLoading(0,$f.loadingType.spinning,"25px","25px"));e("#lpSpinner").append(u),$f.showLoading(u)}return n&&(n.onreadystatechange=function(){4==n.readyState&&200==n.status?s(n.responseText):4==n.readyState&&200!=n.status&&(l.dismiss(),a(F.loading))},n.open("GET","/handlers/languagepicker.mvc",!0),n.send()),!1}function r(){return window.require?window.require(["flyout","doregister"],n):n(),!1}function i(e){var t="";return b.GetString&&(t=b.GetString("live.shared.strings."+e)),t}function o(){var e="";e=i(B===F.loading?"LanguagePicker.Client.Error.Loading":"LanguagePicker.Client.Error.Saving");var t=wLive.Controls.Notifications,n=t.createTopBar({content:e,dismissalMode:"Explicit",buttons:{action:i("LanguagePicker.Client.Close")}});n.show(),t.getQueue().start()}function a(e){return B=e,window.require?window.require(["notificationbar","doregister"],o):o(),!1}function s(t){e(_.content()).find(".UserContent").html('<div><form name="langPicker" action="/handlers/languagesave.mvc" method="POST">'+t+"</form></div>");e(".languagePickerFlyout button.default").show();var n=e(".Flyout.languagePickerFlyout");n.attr("aria-labelledby","uxp_ftr_link_language"),n.attr("aria-label",i("LanguagePicker.Client.Title"))}function c(e,t,n){return N.style.display=t,n?(e.returnValue=!1,!1):!0}function l(e){return c(e,"none",!0)}function u(e){return c(e,"",!0)}function d(t,n){return t&&(t.id===n||d(e(t).parent(),n))}function f(e){return""!==N.style.display||d(e.target,E.id)?!0:c(e,"none",!1)}function g(){clearTimeout(v),v=setTimeout(S.adjustFooter,50)}function p(){var t=M[e(this).attr("id")];t&&$BSI.reportEvent(P,{FooterNav:t})}function h(e){b.$Sutra&&$Sutra.Shared&&$Sutra.Shared.FooterLink&&sutra(e,"$Sutra.Shared.FooterLink")}var v,m,_,y,C,b=window,w=$Config,S=b.$footer={},$=_ge("uxp_ftr_control"),I=e("#m_wf"),k=e("#m_wh"),x="uxp_ftr_ff",L=k.height(),T="langPickerVisible";w.wla&&$Network.fetchScript($Config.wla,function(){},"window.live.shared.strings.languagepicker","Gfx_JS_WLiveStr_Download","Gfx"),I.length||(I=e($).parent());var P="SelectClick.Footer.Nav",M={};M.uxp_ftr_link_legal="Terms",M.uxp_ftr_link_privacy="Privacy",M.uxp_ftr_link_developers="Dev",M.uxp_ftr_link_intl1="Intl",M.uxp_ftr_link_custom3="CoB1",M.uxp_ftr_link_custom4="CoB2",M.uxp_ftr_link_abuse="Abuse",M.uxp_ftr_link_language="Lang";var E=b._ge("uxp_ftr_control_mini"),A=b._ge("uxp_ftr_hidechevron"),N=b._ge("uxp_ftr_control_cc"),D=b._ge("uxp_ftr_link_language"),F={loading:0,saving:1},B=-1;S.dispose=function(){E&&(e(document).unbind("click",f),e(E).unbind(),e(A).unbind()),e(D).unbind(),e("#uxp_ftr_control a").unbind(".ftr"),e(b).unbind("unload",S.dispose),e(b).unbind("resize",g),e(document).unbind(".footerResize")},S.pageContentDiv=_ge("c_content")||_ge("BelowHeader"),S.pageContentDiv||(S.pageContentDiv=I.prev(".MainLayoutIndented")[0]),S.adjustFooter=function(){var t=S.pageContentDiv;if($&&t){var n=$f.clientHeight(),r=t.scrollHeight;if(!y||y!=n||C!=r){y=n,C=r,m=I.outerHeight(),e(S).trigger("beforeResize"),r=t.scrollHeight;var i=r+L;I.hasClass(x)&&(i+=m),i<$f.docHeight(!0)?I.addClass(x):I.removeClass(x),e(S).trigger("afterResize")}}},E&&(e(document).bind("click",f),e(E).bind("click",u),e(A).bind("click",l)),e("#uxp_ftr_control a").each(function(){var t=this;e(t).bind("click.ftr",p),h(t)});var R=_ge("uxp_ftr_link_mobile");if(R&&e(R).bind("click",function(){try{$Cookie.setCookie($Config.bpcc,"false",$Config.sd),window.open($Config.fml,"_top")}catch(e){}}),h(_ge("uxp_ftr_link_trademark")),w.ff&&(I.css("padding-top",0),e(b).bind("resize",g),e(document).bind({"keydown.footerResize":g,"mousedown.footerResize":g,"mousewheel.footerResize":g,"DOMMouseScroll.footerResize":g}),S.adjustFooter()),(!$Config.LP||!$Config.LP.bypassLanguageFlyout)&&D){var H=e(D);H.attr("aria-haspopup","true"),H.attr("aria-label",i("LanguagePicker.Client.LanguageLinkAriaLabel")),H.attr("tabindex","0"),H.attr("role","button"),D.href="",H.bind("click",r)}e(b).bind("unload",S.dispose)}(window.originaljQuery||jQuery)}),define("leftnav",["footer"],function(){!function(e){function t(){if(v.length){if(c=e(f.$footer),l=e("#uxp_ftr_control"),s=_ge("c_base"),e(f).bind("unload.leftNav",n),e(".c_n .c_gl").bind("click",r),h)d=e("#"+h);else{var t=e(".c_n .active > a");d=t.length?t:e(".c_n .active > .link")}d&&(u=d.hasClass("c_gl")?d.siblings("ul"):e(d.parents("ul")[0]),p.AutoExpand&&u.show(),d.parent().addClass("active"),d.parents("ul").show()),p.FullHeight&&(c.bind("beforeResize.leftNav",i),c.bind("afterResize.leftNav",o),g.adjustHeight()),v.find("a").bind("dragstart.ln",$f.cancelEvent)}}function n(){e(f).unbind(".leftNav"),e(c).unbind(".leftNav"),e(".c_n .c_gl").unbind(),v.find("a").unbind(".ln")}function r(){var t=e(this);if(!t.attr("href")){var n=t.siblings("ul");u||(u=n),u[0]==n[0]?u.toggle():(u.hide(),n.show(),u=n)}}function i(){v.css("height","auto")}function o(){clearTimeout(a),a=setTimeout(g.adjustHeight,100)}var a,s,c,l,u,d,f=window,g=f.$leftNav={},p=$Config.LeftNav||{},h=p.ActiveLinkId,v=e("#c_ln"),m=parseInt(v.css("padding-top"));g.adjustHeight=function(){if(s&&v.length){var e=s.scrollHeight-l.height()-m;v.css("height",e+"px")}},t()}(window.originaljQuery||jQuery)}),define("collapsing",["leftnav"],function(){!function(e){var t=window,n=0,r=6;t.CollapsingMenu=function(t,i,o,a,s,c,l,u){function d(){var e;if(l)e=l();else{var t,n=S?c.previousSibling:c;n&&(t=$B.ltr?o.parentNode.offsetWidth+f(o.parentNode)<n.offsetWidth+f(n)+s+20:f(o.parentNode)>f(n)-(s+20),e=o.childNodes.length>m&&t||w.offsetTop<n.offsetTop-n.offsetHeight)}return e}function f(e){for(var t=e.offsetLeft;"body"!=e.nodeName.toLowerCase()&&"html"!=e.nodeName.toLowerCase()&&(e=e.offsetParent);)t+=e.offsetLeft;return t}function g(){var e=!1,t=o.lastChild.previousSibling;return t&&(p(t,!0),b.insertBefore(t,b.firstChild),e=!0),e}function p(t,i){var o=e(t),a=o.find("a.c_ml")[0],s=a&&a.menu;if(o.hasClass("c_sm"))i?(s&&s.deactivate(),o.children("a").hide(),o.children("ul").css("visibility",""),o.find("ul li:last-child").append('<span class="c_ms"> </span>')):(s&&s.activate(),o.children("a").css("display",""),o.find("ul li:last-child .c_ms").remove());else if(o.children(".c_m").length>0){var c=o.find("span.c_chev");if(c.length){var l=i?C:y;c[0].innerHTML=" "+l}s&&(i?s.convertToSubMenu(r):s.convertFromSubMenu(n))}}var h=this,v=t,m=i,_=u?$menu.chevronTypes.SmallDownLight:$menu.chevronTypes.SmallDownDark,y=$menu.createChevron(_,!0),C=$B.rtl&&$B.IE_M6?$menu.createChevron($menu.chevronTypes.SmallLeftDark,!0):$menu.createChevron($menu.chevronTypes.SmallRightDark,!0),b=o.lastChild.childNodes[1],w=o.firstChild,S=!1;c||(c=b.parentNode,S=!0),h.updateMaxItems=function(e){v=e},h.updateMinItems=function(e){m=e},h.redraw=function(t,n){var r=$css.getCN("c_collRem","a",b)[0];if(r){var i=r.parentNode;i.parentNode.removeChild(i)}for(var s=o.childNodes.length-1;v>s&&0!=b.childNodes.length;)p(b.firstChild,!1),o.insertBefore(b.firstChild,o.lastChild),s++;for(;s>v;)g(),s--;for(b.parentNode.style.display=a;!n&&d()&&g(););var l=e(b);l.show();var u=l.children();if(0===u.filter(":visible").length)b.parentNode.style.display="none";else{var f=S;b.parentNode.style.display=a,c=b.parentNode,S=!1,d()&&g(),S=f}b.binding&&b.binding.update()}}}(window.originaljQuery||jQuery)}),define("wlivecommandbar",["collapsing"],function(){!function(e){function t(){clearTimeout(E),E=setTimeout(n,100)}function n(){h=0,e(m).trigger(w)}function r(){var t=x-e("#c_cb0 .c_cme").outerWidth();e("#c_cb0 .c_cc").css("padding-"+T,t+"px"),e(m).trigger("resize")}function i(){e("#c_cb0 .c_cc").css("padding-"+T,0),e(m).trigger("resize")}function o(){$Do.when("$WLXIM.SidebarCreated",0,function(){$WLXIM.isSidebarOpened()&&r(),e($WLXIM.sidebar).bind("onSidebarOpenedEvent",r),e($WLXIM.sidebar).bind("onSidebarClosedEvent",i)});for(var n=$css.getCN("c_c","div",document),o=0;o<n.length;o++){var c=n[o],l=e(c),d=l.children(".c_cc")[0],h=M.getInstanceById(c.id);
if(!l.hasClass("c_ncolapse")){var v=h&&!h.getDataModel().isLightTheme,C=$B.IE_M6?"block":$B.IE_M7?"inline":"inline-block";c.collapse=new CollapsingMenu(c.m,c.i,d,C,14,0,u(c.id),v),c.r&&c.collapse.redraw(),c.DisableCommand=function(e){var t=c.getElementsByTagName("a")[e];_.d(t)},c.EnableCommand=function(e){var t=c.getElementsByTagName("a")[e].parentNode;_.e(t)},c.dispose=function(){y.unbind("unload",c.dispose)},c.updateMaxItems=function(e){c.collapse.updateMaxItems(e)},c.updateMinItems=function(e){c.collapse.updateMinItems(e)};var S=window.$Config;if(S&&S.CommandBar&&S.CommandBar.resize){if(y.bind(w,c.collapse.redraw),h){f=e("#c_cb0 h1"),g=e("#c_clogoc"),p=g.siblings(".c_ms"),_$emptyLogoLink=e("#c_cb0.c_cle a.c_clogot"),a(l),_$emptyLogoLink.length&&(_$emptyLogoLink.unbind(),_$emptyLogoLink.bind("click",function(){return!1})),e(h).bind("beforeRender",function(e){d.style.overflow=I,c.collapse.redraw(e,!0)}),e(h).bind("afterRender",function(e){c.collapse.redraw(),c.style.overflow=k,d.style.overflow=k}),h.updateMaxItems=c.updateMaxItems,h.updateMinItems=c.updateMinItems;e("#c_cb0 h1 .c_clogot");f.bind("keydown",s)}y.bind(b,t),c.dispose=function(){if(y.unbind(b,t),y.unbind(w,c.collapse.redraw),h&&(e("a",l).unbind(),e(h).unbind(),e("#c_clogoc").unbind(),h.dispose(),m.$WLXIM&&$WLXIM.sidebar))try{e($WLXIM.sidebar).unbind()}catch(n){}y.unbind("resize.cb"),y.unbind("unload",c.dispose)},h&&h.render()}y.bind("unload",c.dispose)}d.style.overflow=k}$Do.register("WLXCommandBar")}function a(e){e.delegate("a",{"mousedown.cb":c,"focus.cb":c,"blur.cb":l,"mouseup.cb":l,"mouseleave.cb":l,"dragstart.cb":$f.cancelEvent})}function s(e){d=e.shiftKey}function c(){$B.IE&&$B.V<=8&&(this.hideFocus=!0),e(this).addClass($)}function l(){e(this).removeClass($)}function u(t){return function(){var n,r="#"+t,i=e(r);if(i.length){var o=h;if(!o){var a=e(r+" .c_cme"),s=a.outerWidth(),c=e(r+" .c_clogo").outerWidth();c>L&&(o=e(r).outerWidth()-c-s)}o>0&&(h=o,n=e(r+" .c_cc").outerWidth()>o)}return n}}var d,f,g,p,h,v,m=window,_=m.$edh,y=e(m),C={},b="resize",w="wlResize",S="c_cb0",$="c_cf",I="hidden",k="visible",x=300,L=50,T=$B.rtl?"left":"right",P=_ge(S),M={};P?M=m.$CommandBar=C[S]=new wLive.Controls.CommandBar("#"+S,!0,P.dataModel):m.$CommandBar=M,M.showOptionsMenu=function(t,n){var r,i,o=_ge("c_copt"),a=n._ge("c_copt"),s=o||a,c=n._ge("c_hiconc");if(!(m==n||o&&a.isCopied&&v)){o&&(e(o).remove(),s=a);var l=$header.getDummyHeader().firstChild,u=n.$f.getLocation(c,1,1),d=document.createElement("ul"),f=document.createElement("a");d.innerHTML=s.innerHTML.replace(/window\./g,"_ge($PF.fid).contentWindow."),d.className=s.className,d.id=s.id,a.isCopied=1,v=1,f.style.position="absolute",f.style.top=u.bottom+"px",f.style.left=($B.rtl?u.left:u.right)+"px",f.style.height=0,f.style.padding=0,s=d,r=f,l.appendChild(f),l.appendChild(d),m.$Config.Themes=n.$Config.Themes,i=1,y.bind("resize.cb",function(){v=0}),m.$header.reportBSIMenu(e("#c_cof"),"c_cof"),m.$header.reportBSIMenu(e("#c_coh"),"c_coh")}if(s.binding)s.binding.toggleState();else{var g=c.parentNode;$menu.create(t,1,{sourceEl:r,menuEl:s,pressedStateEl:g,bindEnterKey:!0})}($Config.Themes.ThemeService||m.$themewritecallback)&&$Do.when("$ThemeMenuInit",0,i)},M.getInstanceById=function(e){if(!C[e]){var t=_ge("#"+e);t&&(C[e]=new wLive.Controls.CommandBar("#"+e,!0,t.dataModel))}return C[e]},M.invalidateOptionsMenu=function(e){var t=e._ge("c_copt");t.isCopied=!1};var E;M.init=o,$Do.when("$CommandBarDomReady",0,function(){$Do.when("$WLiveLoaded",0,function(){setTimeout(o,0)})})}(window.originaljQuery||jQuery)}),define("trie",["wlivecommandbar"],function(){!function(){function e(e){function t(e){for(var t=0,n=r.length-1,i=null,o=null;n>=t;)if(i=Math.floor((t+n)/2),o=r[i].key.substring(0,e.length),e>o)t=i+1;else{if(!(o>e))return i;n=i-1}return null}var n=this,r=[],i=e,o=!1;n.remove=function(e){r.remove(e)},n.insert=function(e,t){var n={key:e,datum:t};return r.push(n),o=!1,n},n.sort=function(){o||r.sort(function(e,t){var n=e.key,r=t.key;return n>r?1:r>n?-1:0}),o=!0},n.matchPrefix=function(e,o){var a=null,s=null,c=null,l=null,u=null,d=null;if(n.sort(),a=t(e),null==a)return[];for(s=a;s>0&&r[s-1].key.startsWith(e);s--);for(c=a+1;c<r.length&&r[c].key.startsWith(e);c++);l=new Array(c-s);for(var f=0;f<l.length;f++){var g,p=r[s+f];g=o?{key:p.key,datum:p.datum}:p.datum,l[f]=g}if(i){l.sort(i),u=[d=l[0]];for(var h=0;h<l.length;h++)i(d,l[h])&&u.push(d=l[h]);return u}return l}}var t=window;t.$Trie=e}()}),define("icusertilescript.inline",["trie"],function(){}),define("logout",["icusertilescript.inline"],function(){!function(){function e(){function e(e,t){r||(r=1,$BSI.navigateTo(e,t))}function t(t,n){var r=this,i=[];r.pause=function(e){i.push(e)},r.resume=function(r){i.remove(r),0==i.length&&e(t,n)}}var r,i=this,o=[];i.add=function(e){o.push(e)},i.remove=function(e){o.remove(e)},i.doLogout=function(i){var a,s=0,c=o.length;if(r=0,!i.shiftKey&&!i.ctrlKey&&!i.altKey)for(var l=i.target;l;){if("A"==l.tagName){var u=l.href;if(u){var d=l.target;$f.cancelEvent(i),a=new t(u,d),setTimeout(function(){e(u,d)},1e3)}break}l=l.parentNode}var f="$logout";for(a.pause(f);c>s;s++)try{o[s](a)}catch(g){n.submitFromException(g)}a.resume(f)}}var t=window,n=t.$WebWatson;t.$Logout=new e}()}),define("preload",["logout"],function(){!function(e){function t(){$Config.WebIM?$Do.when("wlxim",0,n):$BSI.isLoading()?($BSI.addLoadedCallback(o),v=1):o(),e(l).bind("beforeunload",u.dispose)}function n(){s=window.$WLXIM,e(s).bind("stateChange",i),i(),h=1}function r(){e(s).unbind("stateChange",i),h=0}function i(){s.hasContacts()&&o()}function o(){var e=g.DelayMs||0;setTimeout(a,e),h&&r()}function a(){if(!p){var e=g.View;p=1,e&&(c=document.createElement("iframe"),c.id=d,c.width=c.height=0,c.style.display="none",c.src="/handlers/resourcespreload.mvc?bicild=&view="+e,document.body.appendChild(c))}}var s,c,l=window,u=l.$Preload={},d="preload_frame",f=l.$Config,g=f.Preload||{},p=0,h=0,v=0;u.dispose=function(){if(u.pause(),h?r():v&&($BSI.removeLoadedCallback(o),v=0),e(l).unbind("beforeunload",u.dispose),c){try{var t=c.contentWindow;t.onunload&&(t.onunload(),t.onunload=null)}catch(n){}c.parentNode.removeChild(c),c=0}},u.resume=function(e){if(c)try{c.contentWindow.$Preload.resume(e)}catch(t){}},u.pause=function(){if(c)try{c.contentWindow.$Preload.pause()}catch(e){}},t()}(window.originaljQuery||jQuery)}),define("basemaster",["preload"],function(){!function(e){function t(){$Do.when("$PF.attach",0,l.dispose),u.fs&&$BSI.addLoadedCallback(i),e(document).bind("mousedown",n),$f.getDocType().indexOf("Strict")>0&&e(document.body).addClass("strict")}function n(t){var n=t.target;for(s&&r(t,s);n;){if(v.contains(n.tagName)){s=n,$css.addHideBorder(t,n),"A"==n.tagName&&$css.addPressedState(t,n),e(n).bind("blur",r);break}n=n.parentNode}}function r(t,n){n=n||this,$css.removeHideBorder(t,n),$css.removePressedState(t,n),e(n).unbind("blur",r),s=null}function i(){$Network.fetchCSS(u.fs,o,void 0,"Gfx_Css_WlxFonts_Download","Gfx")}function o(){var e=new Date;e.setDate((new Date).getDate()+1),$Cookie.setCookie("wlfonts","1",u.sd,"/",e)}var a,s,c=window,l=c.$baseMaster={},u=$Config,d=e("#m_wh"),f=e("#c_header"),g=e("#c_base"),p=!0,h=50,v=["A","INPUT","LABEL","BUTTON","TEXTAREA"];l.getHeaderHeight=function(){return h},l.toggleFixedHeader=function(t,n){p=!!t,d.show(),t?($B.IE&&$B.V<=8&&d.show(),d.css({top:"0"}),f.removeClass("c_h_hidden"),g.css({top:Math.max(n||0,h)+"px"}),c.$WLXIM&&$WLXIM.setSidebarToFullScreen(!1),e("a",d).attr("tabindex","")):($B.IE&&$B.V<=8&&d.hide(),g.css({top:"0"}),d.css({top:"-"+h+"px"}),f.addClass("c_h_hidden"),c.$WLXIM&&$WLXIM.setSidebarToFullScreen(!0),e("a",d).attr("tabindex","-1"))},l.dispose=function(){if(!a){var t=c.$Static,n=c.$Preload,r=c.$WLXIM,i=c.$WLXIMCL,o=c.$footer,s=c.$HeaderWebIM;t&&t.pause(1),n&&n.dispose(),r&&r.pause(),i&&i.dispose(),o&&o.dispose(),s&&s.dispose(),e(document.body).parent().removeClass("fh"),a=1}},t()}(window.originaljQuery||jQuery)}),define("persistenceframework",["basemaster"],function(){!function(e){function t(e){try{_ge(p.fid).contentWindow.document.domain}catch(t){return}var n="",r=e.pfState;n=r?0==r.indexOf("#")?[p.afu,r].join(""):r:p.afu;var i=p.getNormalizedUrl(n,null);setTimeout(function(){p.navigateTo(i)},1);var o;return i!=n&&(o=p.getRelativeUrl(i)),o}function n(t){p.i||(e(p).bind(g,t),h++)}function r(t){var n=this;p.i||e(p).bind(f,function(){t.call(n)})}function i(t){p.i||e(p).unbind(f,t)}function o(){s||(s=e("#"+p.lid),s.html('<div style="top:45%;width:100%;position:absolute;text-align:center">'+$f.createLoading(1,0,"60px")+"</div>"),c=s.find(".c_loadingDots")),s.show(),$f.showLoading(c),e("#"+p.did).hide()}function a(e){var t=e.document.getElementsByTagName("link");if(t)for(var n=0;n<t.length;n++)if(t[n].getAttribute("rel").indexOf("icon")>-1)return t[n]}var s,c,l,u,d=window,f="Merge",g="PreMerge",p=d.$PF,h=0,v=0,m=2e3;p&&p.f&&(p.i||($Do.when("$History.attachPF",0,t,!0),p.m&&e("form").submit(function(){var t=e(this);return t.attr("target")||(t.attr("target",p.fid),$Do.when("$PF.merge")),!0})),p.preMerge=function(t){return p.merged?void p.navigateTo(t):void(h>0?(u=t,e(p).trigger(g)):p.mergeAndNavigate(t))},p.allowMerge=function(){v++,v>=h&&p.mergeAndNavigate(u)},p.merge=function(){p.merged||(p.merged=!0,e(p).trigger(f),e(p).unbind(f),e(p).unbind(g),e("body").css("cssText",p.hbs),e("html").css("cssText",p.hhs),e("#"+p.did).show().add("[persist]").parentsUntil("body").andSelf().attr("persist",1).siblings().filter(":not([persist])").hide())},p.showLoading=function(){p.lid&&(l=setTimeout(o,m))},p.hideLoading=function(){p.lid&&(clearTimeout(l),e("#"+p.did).show(),s&&(s.hide(),$f.hideLoading(c)))},p.updateFavicon=function(e,t){var n=a(e),r=a(d);if(n&&r){var i=r.cloneNode(!0);i.href=n.getAttribute("href"),t.document.head.appendChild(i),r.parentNode.removeChild(r)}},$Do.register("$PF"),$Do.register("$PF.merge",p.merge),$Do.register("$PF.attach",r),$Do.register("$PF.detach",i),$Do.register("$PF.attachPreMerge",n))}(window.originaljQuery||jQuery)}),define("flextag",["persistenceframework"],function(){!function(){var e=window;e.$Flextag=new function(){var t=this;t.load=function(){e.$Config&&$Config.flextag&&$Config.flextag.url&&setTimeout(function(){var e="flextagFrame",t=document.getElementById(e),n=$Config.flextag.url+"?v="+(new Date).getTime();if(t)t.src=n;else{var r=document.createElement("IFRAME");r.id=r.name=e,r.width=r.height=0,r.style.display="none",r.scrolling="no",r.frameBorder="0",r.allowTransparency=!0,r.src=n,document.body.appendChild(r)}},2e3)}}}()}),define("animationsstub",["flextag"],function(){!function(e){function t(t,n,r,i){return i||(e(t).removeClass("NoDisplay"),e(t).toggle(!0)),s}function n(t){return function(n){return t?(e(n).removeClass("NoDisplay"),e(n).toggle(t)):e(n).addClass("NoDisplay"),s}}function r(){return function(t,n){return e(t).addClass("NoDisplay"),e(n).removeClass("NoDisplay"),e(n).toggle(!0),s}}var i=window,o=i.wLive;o.Animations={};var a=o.Animations,s=null;e.Deferred&&(s=e.Deferred().resolve()),e.extend(a,{Direction:{Horizontal:0,Vertical:0},Enabled:!1,expand:n(!0),collapse:n(!1),fadeIn:n(!0),fadeOut:n(!1),addToList:n(!0),deleteFromList:n(!1),addToSearchList:n(!0),deleteFromSearchList:n(!1),deleteFromListFast:n(!1),addAndDeleteInListFast:r(),showEdgeUI:n(!0),showPanel:n(!0),hideEdgeUI:n(!1),hidePanel:n(!1),showPopup:n(!0),hidePopup:n(!1),enterContent:t,exitContent:n(!1),enterContent2:t,exitContent2:n(!1),flyAway:function(){return s},reveal:n(!0),hide:n(!1)})}(window.originaljQuery||jQuery)}),define("webim",["animationsstub"],function(){!function(e){function t(){function t(){return Ot&&Ot.get_status()==Vt.UserStatus.signedIn}function n(t,n){if(I.$Sutra){var r=t.content(),i="$Sutra.WebIM.Flyouts.{0}".format(n.sutra.flyoutName);sutra(r,i);var o=t.getButton({buttonName:"action"});o&&sutra(e(o),i+"ActionButton");var a=e(".UserTitle",r);a.length>0&&sutra(a,i+"Title");var s=e(".UserContent",r);s.length>0&&sutra(s,i+"Message"),n.sutra.applyCustomTags&&n.sutra.applyCustomTags(i,r)}}function i(e,t,n,r,i,o){function a(t){0==u&&(l&&c?I.$pwc.client.blockOrUnblockMessenger(e,n,function(){o||(cn.addScenarioQoSStats(n?le:ue,null,p,f,!1),C(f,!0)),m(r)},function(t){s(n,e),o||(cn.addScenarioQoSStats(n?le:ue,t,p,f,!1),C(f,!1,t)),m(i)}):(l||s(n,e),o||C(f,l,l?null:g(t)),m(l?r:i)))}var c,l=!0,u=0,d=e.getContacts(),f=o||T.startScenario(n?Z:ee,G),p=(new Date).getTime();if(!cn.user)return o||C(f,!1,"userNotInitialized"),void m(i);for(var v=cn.user.get_skypeAddress()?cn.user.get_skypeAddress().get_address():null,_=0;_<d.length;_++){var y=d[_];if(y.getSourceId()===Q)c=y;else if(cn.isSkypeBlockEnabled()&&v&&(y.getSourceId()===q||y.getSourceId()===V)&&n!=y.getIsBlocked()&&I.SkyJS&&I.SkyJS.Outlook.isUserLinkStatusActive()){u++;var b=n?I.SkyJS.Outlook.blockContact:I.SkyJS.Outlook.unblockContact;b({data:{userId:v,contactId:h(y),reporterIp:M.ip,reportAbuse:t?1:0},success:function(e){u--,cn.addScenarioQoSStats(n?se:ce,null,p,f,!1),a(e)},error:function(e){l=!1,u--,cn.addScenarioQoSStats(n?se:ce,g(e),p,f,!1),a(e)}})}}a(null)}function s(t,r){var i=I.MsgrUI,o=t?i._getLocString("flyoutsBlockErrorMessage"):i._getLocString("flyoutsUnblockErrorMessage");o=o.format(r.getDisplayName().encodeHtml());var a={action:i._getLocString("flyoutsBlockErrorMessageButton")},s=k.Controls.Notifications.createTopBar({content:o,dismissalMode:k.Controls.Notifications.BarDismissalMode.Explicit,buttons:a});e(s).bind("aftershow.topBar",function(){n(s,{sutra:{flyoutName:"BlockUnblockErrorNotification"}}),e(s).unbind("aftershow.topBar")}),s.show().then(function(){s=null})}function d(e,t,n,r,i,o){function a(e){(!n||n&&u)&&(C(s,l,l?null:g(e)),m(l?i:o))}var s=T.startScenario(Y,G),c=(new Date).getTime();if(I.SkyJS&&I.SkyJS.Outlook.isUserLinkStatusActive()){var l=!0,u=!1,d=cn.user.get_skypeAddress().get_address();I.SkyJS.Outlook.declineRequest({data:{userId:d,contactId:e},success:function(i){if(cn.addScenarioQoSStats(ae,null,c,s,!1),n&&cn.blockPerson(t,r,function(){u=!0,a(i)},function(){u=!0,l=!1,a(i)},s),r){var o=I.$pwc.getPerson(t);cn.reportAbuse(o,e)}a(i)},error:function(e){cn.addScenarioQoSStats(ae,g(e),c,s,!1),l=!1,a(e)}})}else C(s,!1,"userLinkNotActive"),m(o)}function g(e){return e?"{0}-{1}".format(e.code||"NoCode",e.text||"NoDescription"):"NoErrorData"}function h(e){return e.getSourceId()==q?e.getSkypeId():e.getObjectId()}function m(e,t){e&&e.apply(null,t||[])}function y(){De=!0}function F(){et(),De=!1,null!=Te&&(I.clearInterval(Te),I.setTimeout(function(){N.title=xe},200),Be=0,He={},Te=null)}function R(t,n,r){var i=e("<div class='imToastHeader' />").text(t),o=e("<div class='imToastBody' />").append(I.Microsoft.Live.Messenger.MessengerUtility.replaceEmoticons(n)),a=v(H),s=I.wLive.Controls.Notifications.createToast({title:i,content:o,sourceIcon:a,options:{moreCss:"t_cbr"}});j(r),We[r]=s,s.show().then(function(e){e.clicked&&$WLXIM.onToastClicked(r)})}function j(e){if(We[e])try{We[e].dismiss();var t=I.wLive.Controls.Notifications.getQueue();t&&t.removeNotification(We[e])}catch(n){A.logError("removeToastFromQueueError",n)}}function U(t,n){0!=e("#rec_conv").length&&(we=t,Qe=!0,Ee&&p(),$e=Ot.get_contacts().findByIdWithoutRoleCheck(t),w(t,n||"other","chat"))}function _e(e){qe(e,je)&&(Re-=1)}function ye(e){Ze(e,je)&&Re++}function Ae(e){Ze(e,He)&&Be++}function qe(e,t){return 1==t[e]?(je[e]=0,!0):!1}function Ze(e,t){return 1!=t[e]?(t[e]=1,!0):!1}function et(){Fe>0&&k.Animations.enterContent(e("#c_ofm"),{top:100,left:0}).then()}function tt(){return Ue?"open":"close"}function nt(t,n,r,i){if(n=n||t.get_currentAddress(),n&&n.get_network().get_isSkype()){if(I.SkyJS){i=i||e("#sidebar")[0];var o=n.get_linkedContact().get_skypePendingOutbound&&n.get_linkedContact().get_skypePendingOutbound();return I.SkyJS.Outlook.isUserLinkStatusActive()?20==n.get_type()?(n.get_linkedContact().get_isBlocked()||cn.showSkypeInviteFlyout(i,t.get_id(),r),!1):8==n.get_type()&&o?(cn.showResendSkypeInviteFlyout(i,t.get_id(),r),!1):!0:(cn.showConnectToSkypeFlyout(i,I.MsgrUI._getLocString("flyoutsConnectToSkypeSendMessageText")),!1)}return!1}return!0}function rt(t,n,r){return n=n||t.get_currentAddress(),n&&n.get_network().get_isSkype()?I.SkyJS?I.Microsoft.Live.Messenger.Services.SkyJSHelper.isCallInProgress?!1:(r=r||e("#sidebar")[0],I.SkyJS.Outlook.isUserLinkStatusActive()?!0:(cn.showConnectToSkypeFlyout(r,I.MsgrUI._getLocString("flyoutsConnectToSkypeCallText")),!1)):!1:!0}function it(e,t,n){var r;r=t?t.get_network().get_id():e.get_currentAddress().get_network().get_id(),I.SkyJS.Outlook.startCall(e.get_skypeName(),e.get_cid(),n,Ot.createSkypeInitializationInfo(e),r)}function ot(){var t=50;return e("#m_wh").length>0?t=e("#m_wh").height()||t:e("#HeaderContainer").length>0&&(t=e("#HeaderContainer").height()),t}function at(){Ue=!1;var t=D("c_hiconm");null!=t&&t.setAttribute("aria-pressed","false");var n=e("#sidebar");n.is(":hidden")||(pt("onSidebarClosedEvent",null),x.rtl?k.Animations.hideEdgeUI(n,{left:ve,top:0}).then(function(){n.hide(),gt(),ft(),pt("onSidebarCloseCompletedEvent",null),e(t).css("background-color","")}):k.Animations.hideEdgeUI(n,{left:ve,top:0}).then(function(){e(n).css("left",""),n.hide(),gt(),ft(),pt("onSidebarCloseCompletedEvent",null),e(t).css("background-color","")}),ze&&Ne&&Ne.sendWebimPaneStateChanged(tt())),ht(O)}function st(e){Qe&&we?lt(e):ct()}function ct(){var t=e("#chat_view");t.is(":hidden")?dt():k.Animations.fadeOut(t).then(function(){t.hide(),dt()})}function lt(t){var n=e("#rec_conv");n.is(":hidden")?ut(t):k.Animations.fadeOut(n).then(function(){n.hide(),ut(t)})}function ut(t){var n=e("#chat_view");n.is(":hidden")&&(n.show(),k.Animations.fadeIn(n).then(function(){var n=e(".ModernConversationHistoryControl").get(0);n&&(n.scrollTop=n.scrollHeight);var r=e(".ModernConversationInputControl_TextBox").get(0);null!=r&&1==t&&r.focus(),be&&be.set_isVisible(!0),pt("landingPageControlVisible",!1)})),Qe=!0,we&&(_e(we),j(we),ht(we)),Je=e("#chat_view").find("a").first()}function dt(){var t=e("#rec_conv");t.is(":hidden")&&(t.show(),k.Animations.fadeIn(t).then(function(){Ce&&(e(Ce.get_element()).show(),pt("landingPageControlVisible",!0))})),ht(W),Je=e("#rec_conv").find("[resourceid='ContactSearchInput']").first()}function ft(){e("#rec_conv").css("display","none")}function gt(){e("#chat_view").css("display","none")}function pt(t,n){e("#sidebar").trigger(t,n)}function ht(e){var t="cid="+M.cid+":state="+e;P.setCookie("Webim_Sidebar_Open",t,M.sd,0,null,1)}function vt(){Lt(0),Ot&&Ot.set_services(Vt.SessionServices.notifications)}function mt(){Ot&&(Ot.set_services(Vt.SessionServices.full),xt("Full"))}function _t(e){if(cn.hasPresence()){e&&(en=e,en.pause("wim"));try{Ot.signOut()}catch(t){A.logError("Signout Error",t)}}}function yt(){zt=1,Ut=M.WebIM,Tt(),A.logAction("WebIM_DownloadingResources"),Wt(),Ct()}function Ct(){Pe=new Date,Ie=T.startScenario(K,G),ke=(new Date).getTime(),L.fetchCSS(Ut.c,St,void 0,"Gfx_Css_WlxWebIMUI_Download","Gfx"),L.fetchCSS(Ut.cc,St,void 0,"Gfx_Css_WebIMCore_Download","Gfx"),L.fetchScript(Ut.a,St,"window.live.shared.globalsettings.webim","Gfx_JS_WebIMStr_Download","Gfx"),require([z],function(){St(null,z)},function(){}),1==window.$Config.WebIM.si?L.fetchScript(Ut.slu+"?r="+Math.random(),bt,void 0,"Gfx_JS_Skype_LocJs","Gfx"):(A.logAction("WebIM_Skype_DisabledByConfig"),wt()),Ut.pj&&L.fetchScript(Ut.pj,null,void 0,"Gfx_JS_Popover_Download","Gfx"),null==I.wLive.Search&&require([X],function(){},function(){})}function bt(e){I.SkyJS&&I.SkyJS.Live&&I.SkyJS.Live.Rollout?I.SkyJS.Live.Rollout.isEnabled(M.cid,M.mkt.toLowerCase())?(cn.addScenarioQoSStats(te,null,ke,Ie,!1),pn=I.SkyJS.Live.Rollout.getPackageUrl(M.cid,M.mkt.toLowerCase()),Ut.eso&&I.location.search.indexOf("skyjsurl=")>-1&&/^https:\/\/(az351254|az299139|az340659|az359216|az415007)\.vo\.msecnd\.net\/\d+-\d+-\d+\/assets\/javascript\/outlook-package\.min\.js$/.test(I.location.search.split("skyjsurl=")[1])&&(pn=I.location.search.split("skyjsurl=")[1]),L.fetchScript(pn,St,void 0,"Gfx_JS_Skype_Skyjs","Gfx")):(A.logAction("WebIM_Skype_Rollout_Disabled"),wt()):(on=!0,cn.addScenarioQoSStats(te,de+"LocJs",ke,Ie,!1),wt())}function wt(){var e=N.createElement("script");pn=e.src="",St(e)}function St(t,n){gn++,$t(t,n),gn==fn&&(on?C(Ie,!1,de):C(Ie,!0),E.register("wlximuiouter",0,!0),Kt?It():$(!1,de,null),0==e("#sidebar").length&&Kt&&(o(),e("#c_cme #c_hiconm").removeClass("c_md"),e(".c-Header .meArea .c_hiconm").removeClass("c_md"),a(),E.when("$pwc",0,f)))}function $t(e,t){var n=e?"script"==e.nodeName.toLowerCase()?e.src:e.href:t;switch(n){case location.protocol+"//"+location.hostname+Ut.a:void 0!=I.GetString&&""!=I.GetString("live.webim.strings.connectedto")?cn.addScenarioQoSStats(re,null,ke,Ie,!1):(on=!0,cn.addScenarioQoSStats(re,de+"Strings",ke,Ie,!1));break;case z:case Ut.cs:cn.ML=Qt=I.Microsoft&&I.Microsoft.Live,cn.MLM=Vt=Qt&&Qt.Messenger,Vt?(Kt=!0,cn.addScenarioQoSStats(ne,null,ke,Ie,!1)):(on=!0,cn.addScenarioQoSStats(ne,de+"Core",ke,Ie,!1));break;case pn:I.SkyJS&&I.SkyJS.Outlook?cn.addScenarioQoSStats(ie,null,ke,Ie,!1):(on=!0,cn.addScenarioQoSStats(ie,de+"SkyJS",ke,Ie,!1))}}function It(){var t=new Vt.RpsAuthIdentity(M.email,M.cid,null,null);null!=M.BSI&&null!=M.BSI.xid&&t.set_experienceId(M.BSI.xid),e(t).bind("authenticationCompleted",kt)}function kt(t,n,r){var i=(I.Microsoft.Live.Messenger,r.get_resultCode());if(i==Vt.AuthenticationResultCode.failure)r.get_isUnsupportedBrowser()?(Yt=1,jt(-1,"Authentication Failed: unsuported browser")):jt(91,"Authentication Failed with status code: "+r.get_status());else if(A.logAction("WebIM_SigningIn"),cn.user=Ot=new Vt.User(n,new Vt.Services.PeopleCache),Ot.get_localEndpoint().set_name(Ut.n),Ot.get_services()!=Vt.SessionServices.normal?(Lt(Ot.get_status()),Zt=1):r.get_multipleEndpointsNotSupported()?(Lt(0),vt()):(Lt(1),Ot.set_services(Vt.SessionServices.full),xt("Full")),Pt(),Ot.signIn(),!an&&sn&&sn.messagingModule&&sn.messagingModule.containerClassName){var o=e("."+sn.messagingModule.containerClassName);if(o){an=new I.MsgrUI.MessagingModuleControl(Ot,{containerWidth:o.width(),tabIndex:sn.messagingModule.tabIndex}),o.empty().append(an.render()),an.activate();var a=e(an.get_element());o.bind("resize",function(){a.triggerHandler("resize")})}}}function xt(e){if(!Zt){Zt=1;var t={IMMode:e};I.$BSI.reportEvent("ClickedSelected.Messaging.IMStart",t),A.logDetails("WebIM_StartIM",t)}}function Lt(e){P.setCookie(ln,M.hcid+un+e,M.sd,0,0,1)}function Tt(){var e=P.getCookie(ln,1);if(e){var t=e.indexOf(un);if(-1!=t&&e.substr(0,t)==M.hcid&&(e=parseInt(e.substr(t+1)),!isNaN(e)))return e}return 1}function Pt(){e(Ot).bind("signInCompleted",Dt),e(Ot).bind("signedOut",Rt),e(Ot).bind("propertyChanged",Ft),e(Ot.get_contact().get_presence()).bind("propertyChanged",Bt),e(Ot.get_conversations()).bind("collectionChanged",Et),e(window).bind("unload",Nt),e(window).bind("resize",Mt),e(window).bind("blur",y),e(window).bind("focus",F)}function Mt(){if(Me&&Me.length>0&&cn.isSidebarOpened()&&!cn.isSidebarOverlay()){var t=e(window).width()-ve+"px";try{Me.width(t)}catch(n){}}}function Et(t,n,r){var i=r.get_newItems();if(i&&i.length>0){var o=i[0];e(o).bind("messageReceived",At)}}function At(e,t,n){if(null!=Ot.get_contacts()&&Ot.get_contacts().get_count()>0&&(!t.get_userInitiated||!t.get_userInitiated())){var r=t.get_buddyContact();r&&cn.onConversationUpdated(r,n.get_message(),t instanceof I.Microsoft.Live.Messenger.GroupConversation)}}function Nt(){e(window).unbind("unload",Nt),e(window).bind("resize",Mt),e(Ot).unbind("signInCompleted",Dt),e(Ot).unbind("signedOut",Rt),e(Ot).unbind("propertyChanged",Ft),e(Ot.get_contact().get_presence()).unbind("propertyChanged",Bt);var t=Ot.get_conversations();e(t).unbind("collectionChanged",Et);for(var n=0;n<t.get_count();n++)e(t).unbind("messageReceived",At);if(null!=Ne){var r=e(Ne);r.unbind("StartGroupChat"),r.unbind("ToggleMessagingPane"),r.unbind("WebImTakeFocus"),r.unbind("RegisterThreadId")}}function Dt(e,t,n){n.get_resultCode()==Vt.SignInResultCode.success?(tn=1,cn.isFull()||mt(),u(),$(!0,null,null)):$(!1,null,n.get_error()),Ht(),Wt(),E.register("$WLXIM.UserSignedIn"),A.logAction("WebIM_SignedIn")}function Ft(e,t,n){var r=n.get_propertyName();"Services"!=r&&"Status"!=r||(rn&&Ot&&Ot.get_status()==Vt.UserStatus.signedIn&&(rn=0,vt()),!tn&&Ot&&Ot.get_status()==Vt.UserStatus.signedIn&&(tn=1),nn&&Ot&&Ot.get_status()==Vt.UserStatus.signedIn&&(nn=0,mt()),Ot&&Ot.get_status()!=Vt.UserStatus.signedIn&&c(),Wt())}function Bt(e,t){var n=t.get_status();n!=Vt.PresenceStatus.offline&&Lt(n),Ot&&Ot.get_presence().get_status()==Vt.PresenceStatus.offline?Ot.get_status()==Vt.UserStatus.signedIn&&l():u()}function Rt(e,t,n){n.get_reason()||en&&en.resume("wim"),c()}function Ht(){qt||(qt=1)}function jt(e,t){Jt=1,Wt(),Ht(),A.log({eventType:"WebIM_InitializationFailure",resultCode:e,resultDetails:{message:t}})}function Wt(){for(var t=0,n=dn.clone(),r=n.length;r>t;t++)try{n[t]()}catch(i){A.logError("WebIM_InformStateChagne",i)}e(cn).trigger("stateChange")}var Ot,Ut,Qt,Vt,qt,zt,Xt,Gt,Kt,Jt,Yt,Zt,en,tn,nn,rn,on,an,sn,cn=this,ln="pres",un="=",dn=[],fn=5,gn=0,pn="";cn.isWac=void 0,cn.wacThreadId=void 0,cn.wacReady=function(){return!(!cn.isWac||!cn.wacThreadId)},cn.isOff=function(){return!(nn||zt&&0!=Tt())},cn.isUnsupported=function(){return Yt},cn.isError=function(){return!cn.isOff()&&(Jt||Ot&&Ot.get_status()==Vt.UserStatus.signedOut)},cn.isLoading=function(){return!(cn.isOff()||cn.isError()||Ot&&Ot.get_status()!=Vt.UserStatus.signingIn&&Ot.get_status()!=Vt.UserStatus.signingOut)},cn.isWaitingToReconnect=function(){return!cn.isOff()&&Ot&&Ot.get_status()==Vt.UserStatus.autoReconnectWaiting},cn.hasContacts=function(){return tn},cn.hasNotify=function(){return t()},cn.hasPresence=function(){return t()&&Ot.get_services()>Vt.SessionServices.notifications},cn.isFull=function(){return t()&&Ot.get_services()==Vt.SessionServices.full},cn.addScenarioQoSStats=function(e,t,n,r,i){if(r){var o={api:e,dependent:G};"undefined"!=typeof t&&null!=t&&(o.error=t),i&&(o.errorType="c"),k.ScenarioQoSStats.add(o,n,r),A.log({eventType:e,resultCode:t})}},cn.addStateListener=function(e){dn.push(e)},cn.removeStateListener=function(e){dn.remove(e)},cn.showFlyout=function(t){var r=k.Controls.Notifications.createFlyout(t);e(r).bind("aftershow.flyout",function(){n(r,t),t.onAfterShow&&t.onAfterShow(r),e(r).unbind("aftershow.flyout")});var i;e(r).bind("beforedismiss.flyout",function(){i=r.content(),e(r).unbind("beforedismiss.flyout")}),t.onButtonClick&&e(r).bind("buttonclick.flyout",function(){t.onButtonClick(r)}),r.show().then(function(e){"action"===e.buttonClicked?t.performAction&&t.performAction(i):t.onDismiss&&t.onDismiss(i)}),i=null},cn.showFirstShortCircuitFlyout=function(e,t){var n=I.MsgrUI,r=I.$pwc.getPerson(e);if(r){var i={content:n._getLocString("firstShortCircuitFlyoutMessage").format(r.getOrderedName()),anchor:t,sutra:{flyoutName:"firstscmessageflyout"}};cn.showFlyout(i)}},cn.isSkypeInvitesEnabled=function(){return!!window.$Config.WebIM.sv&&Kt&&cn.MLM.Services.SkyJSHelper.skypeEnabled},cn.isSkypeBlockEnabled=function(){return!!window.$Config.WebIM.sb&&Kt&&cn.MLM.Services.SkyJSHelper.skypeEnabled},cn.showBlockFlyout=function(t,n,r,i,o){var a=I.MsgrUI,s=I.$pwc.getPerson(n);if(s){var c=o||a._getLocString("flyoutsBlockMessage").format(s.getOrderedName()),l={content:ge.format(c.encodeHtml(),a._getLocString("flyoutsReportAbuse").encodeHtml()),anchor:t,buttons:{action:a._getLocString("flyoutsBlockButton")},sutra:{flyoutName:"BlockFlyout",applyCustomTags:function(t,n){var r=e("input",n);sutra(r,t+"ReportAbuse")}},performAction:function(t){var o=e("input",t)[0].checked;cn.blockPerson(n,o,function(){o&&cn.reportAbuse(s,null),m(r,[!0])},i,null)},onAfterShow:function(t){var n=e(t.content()),r=e(".wim_block_repabuse",n),i=e(t.getButton({buttonName:"action"}));r.find("label").bind("click",function(){var e=r.find(":checkbox");e.prop("checked",!e.is(":checked"))}),e(".ButtonArea",n).css("min-width",r.width()+i.width()+30)},onDismiss:function(t){e(".wim_block_repabuse",t).find("label").unbind(),m(r,[!1])}};cn.showFlyout(l)}},cn.showDeclineInviteFlyout=function(t,n,r,i,o){var a=I.MsgrUI,s={title:a._getLocString("flyoutsDeclineInviteTitle").encodeHtml(),content:fe.format(a._getLocString("flyoutsBlockCheckbox").encodeHtml(),a._getLocString("flyoutsReportAbuse").encodeHtml()),anchor:t,buttons:{action:a._getLocString("flyoutsDeclineButton")},sutra:{flyoutName:"DeclineInviteFlyout",applyCustomTags:function(t,n){var r=e("input",n);sutra(r[0],t+"Block"),sutra(r[1],t+"ReportAbuse")}},performAction:function(t){var a=e("input",t),s=a[0].checked,c=a[1].checked;d(r,n,s,c,function(){m(i,[!0])},o)},onAfterShow:function(t){var n=e(t.content());n.find("label").bind("click",function(t){var n=e(t.target).parent().find(":checkbox");n.prop("checked",!n.is(":checked"))})},onDismiss:function(t){e(t).find("label").unbind(),m(i,[!1])}};cn.showFlyout(s)},cn.showConnectToSkypeFlyout=function(t,n){var r=I.MsgrUI;n=n||r._getLocString("flyoutsConnectToSkypeAddContactText");var i={content:n.encodeHtml(),anchor:t,buttons:{action:r._getLocString("flyoutsConnectToSkypeButton")},sutra:{flyoutName:"ConnectToSkypeFlyout"},onButtonClick:function(t){e(t).unbind("buttonclick.flyout");var n=M.WebIM.sau,r=I.open(n,"_blank","scrollbars=0,resizable=1,location=0, width=720,height=520"),i=I.setInterval(function(){r.closed&&(I.clearInterval(i),I.location.reload())},500)},performAction:function(){}};cn.showFlyout(i)},cn.showSkypeInviteFlyout=function(e,t,n,r,i){var o=I.MsgrUI,a={content:o._getLocString("flyoutsAddToSkypeText").encodeHtml(),anchor:e,buttons:{action:o._getLocString("flyoutsAddToSkypeButton")},sutra:{flyoutName:"AddToSkypeContactsFlyout"},performAction:function(){cn.sendSkypeInvite(t,n,function(){m(r,[!0])},i)},onDismiss:function(){m(r,[!1])}};cn.showFlyout(a)},cn.showResendSkypeInviteFlyout=function(e,t,n,r,i){var o=I.MsgrUI,a=I.$pwc.getPerson(t);if(a){var s={content:o._getLocString("flyoutsResendSkypeRequestText").format(a.getDisplayName()).encodeHtml(),anchor:e,buttons:{action:o._getLocString("flyoutsResendSkypeRequestButton")},sutra:{flyoutName:"ResendSkypeRequestFlyout"},performAction:function(){cn.sendSkypeInvite(t,n,r,i)},onDismiss:function(){r&&r()}};cn.showFlyout(s)}},cn.reportAbuse=function(e,t){if(null!=e){var n=e.getContacts();if(n.length>0){var r=Ot.get_contacts().findByIdWithoutRoleCheck(n[0].getId());if(null!=r)for(var i=0;i<r.get_addresses().get_count();i++){var o=r.get_addresses().get_item(i);o.get_supportsReportAbuse()&&Ot.reportAbuse(o,null)}}}else Ot.reportAbuse(null,t)},cn.sendSkypeInvite=function(e,t,n,r){function i(e){0==o&&(cn.addScenarioQoSStats(oe,a?null:g(e),c,s,!1),C(s,a,a?null:g(e)),m(a?n:r))}var o=0,a=!0,s=T.startScenario(J,G),c=(new Date).getTime(),l={skypeinvitesource:t};if($BSI.reportEvent("WebIM.SkypeInviteSent",l),A.logDetails("WebIM_SkypeInviteSent",l),I.SkyJS){var u=I.$pwc.getPerson(e);if(u)for(var d=u.getContacts(),f=cn.user.get_skypeAddress().get_address(),p=0;p<d.length;p++){var v=d[p],_=v.getOrderedName();(v.getSourceId()===q||v.getSourceId()===V&&v.getSkypePendingOutbound())&&(o++,I.SkyJS.Outlook.sendRequest({data:{userId:f,contactId:h(v),greeting:_?I.MsgrUI._getLocString("flyoutsSendInviteGreeting").format(_):""},success:function(e){o--,i(e)},error:function(e){a=!1,o--,i(e)}}))}}i(null)},cn.blockPerson=function(e,t,n,r,o){var a=I.$pwc.getPerson(e);a&&i(a,t,!0,n,r,o)},cn.unblockPerson=function(e,t,n){var r=I.$pwc.getPerson(e);r&&i(r,!1,!1,t,n,null)},cn.signIn=function(){Ot&&Ot.get_status()==Vt.UserStatus.signedIn?(Lt(1),mt()):(nn=1,rn=0,Wt())},cn.signOut=function(){Ot&&Ot.get_status()==Vt.UserStatus.signedIn?vt():(nn=0,rn=1,Wt())},cn.reconnect=function(){cn.isWaitingToReconnect()&&Ot.signIn()},cn.toggleSidebar=function(t){var n=!t||"mousedown"==t.type||13==t.which;if(n){var r=e("#sidebar"),i=e("div.Files-belowHeader"),o=e("div.od-Photos-belowHeader");if(i.length>0?$WLXIM.setPaneToResize(i):o.length>0&&$WLXIM.setPaneToResize(o),r.length>0)if(r.is(":hidden")){if($WLXIM.isWac&&$WLXIM.wacThreadId){var a=Ot.findContactByThreadId($WLXIM.wacThreadId);
if(!a)return;U(a.get_id(),"wac"),cn.showSidebar(!1)}else cn.showSidebar(!0);if(t&&13==t.which){var s=r.find("a");s.length>0&&s[0].focus()}}else S("header"),at(),pt("landingPageControlVisible",!1)}},cn.dismissSidebar=function(){S("closeButton"),at()},cn.getChatViewOpenedContactId=function(){return we},cn.onChatViewBack=function(){ct(),Qe=!1,we=null},cn.onConversationSelected=function(e,t,n){U(n.buddyId,"recentConversations"),lt(!0)},cn.onConversationUpdated=function(e,t,n){var r=t.get_conversationId().split(":")[1].toLowerCase();if(!$WLXIM.isWac||$WLXIM.wacThreadId===r){var i=I.MsgrUI,o=I.Microsoft.Live.Messenger;if(1==De&&!t.get_reloaded()&&t.get_type()==o.MessageType.textMessage&&!t.get_sender().get_isUser()&&(Ae(e.get_id()),!ze)){var a=null!=e.get_firstName()?e.get_firstName():e.get_displayName();hn(1==Be&&n?i._getLocString("newGroupMessageNotification"):1==Be&&null!=a?i._getLocString("newMessageNotification").format(a).trim():i._getLocString("newMultipleMessageNotification").format(Be).trim())}if(!(t.get_reloaded()||t.get_type()!=o.MessageType.textMessage&&t.get_type()!=o.MessageType.threadActivityMessage||Ue&&Qe&&we&&we==e.get_id()||null==e.get_id()||""==e.get_id())){if(t.get_sender().get_isUser())return void _e(e.get_id());if(ye(e.get_id()),!t.get_isOfflineMessage()){var s;if(t.get_type()==o.MessageType.textMessage)s=t.get_text();else{if(!i||!i.Utility)return;s=i.Utility.getActivityMessageString(t)}if(s){var c=e.get_displayName();R(c,s,e.get_id())}}}}},cn.removeAllToasts=function(){for(var e in We)j(e)};var hn=function(){var e=!1,t=function(){e?(N.title=Le,e=!1):N.title==Le?N.title=xe:(xe=N.title,N.title=Le)};return function(n){e=!0,Le=n,null==Te&&(xe=N.title,Te=I.setInterval(t,1e3))}}();cn.updateMessagingCount=function(t){var n;if(t!==Fe){Fe=t,n=t>99?"99+":t>0?t:"";var r=e("#c_ofm"),i=r.parent();r.html(n),i.parent().width(r.width()+me+"px"),et(),ze&&$WLXIM.wacThreadId&&Ne&&Ne.sendWebimUnreadCountChanged(t,tt())}},cn.isSidebarOpened=function(){return Ue},cn.isSidebarOverlay=function(){return Oe&&e(window).width()<he},cn.setPaneToResize=function(e){Me=e,$WLXIM.isSidebarOpened()&&r(null,cn.isSidebarOverlay())},cn.resetSidebarOverlaySettings=function(){Oe=!1,he=pe},cn.setSidebarOverlay=function(e){Oe=e},cn.setSidebarOverlayWindowWidth=function(e){Oe=!0,he=e},cn.setSidebarToFullScreen=function(t){Ve=1==t?"0px":ot()+"px",e("#sidebar").css("top",Ve)},cn.bindToCustomPostMessage=function(t,n){e(Ne).bind(t,function(e,t){Xe||(Ne.sendWebImFirstIncomingMessage(),Xe=!0),n(e,t)})},cn.sendCustomPostMessage=function(e,t){Ge||(Ne.sendWebImFirstOutgoingMessage(),Ge=!0),e.apply(cn,t)},cn.registerWacChat=function(t){function n(e,t){r(t.groupId)}function r(e){$WLXIM.wacThreadId=e.toLowerCase(),E.register("WACChatThreadIdChanged")}function i(e,t){var n=t.groupId.toLowerCase(),i=Ot.findContactByThreadId(n);null!=i?cn.startConversationWithContactId(i.get_id(),"wac",!0):Ot.addToStartGroupChatPendingList(n),r(n)}function o(e,t){var n=t.htmlEvent;cn.toggleSidebar(n)}function a(){if(cn.isSidebarOpened())if(e("#rec_conv").is(":visible")){var t=e("#rec_conv").find("[resourceid='ContactSearchInput']").first();t.blur(),t.focus()}else{var n=e("#chat_view").find("[resourceid='TextBox']").first();if(n.attr("disabled")){var r=e("#chat_view").find("a").first();r.blur(),r.focus()}else n.blur(),n.focus(),n.val(n.val())}}function s(t){9==t.which&&null!==Je?(_(),t.shiftKey&&e(":focus")[0]===Je[0]?(Ye.focus(),t.preventDefault()):t.shiftKey||e(":focus")[0]!==Ye[0]||(Je.focus(),t.preventDefault())):117==t.which&&t.ctrlKey&&(t.preventDefault(),Ne.sendWebimGiveFocus(t.shiftKey?"backward":"forward",tt()))}if(Ot&&MC.GroupChatFeatures.phase!==MC.GroupChatPhase.disabled){var c=Ot.get_status(),l=c===Vt.UserStatus.signedIn,u=c===Vt.UserStatus.autoReconnectWaiting;(l||u)&&(Ne=t,Ne.sendWebimReady(Fe,tt()),0==ze&&(e(Ne).bind("StartGroupChat",i),e(Ne).bind("ToggleMessagingPane",o),e(Ne).bind("WebImTakeFocus",a),e(Ne).bind("RegisterThreadId",n),e(N).keydown(s)),e("#sidebar").addClass("is_wac_registered"),ze=!0)}},cn.startConversationWithContactId=function(e,t,n){var r=Ot.get_contacts().findByIdWithoutRoleCheck(e),i=Ot.get_aggregatedConversations().getAggregatedConversationByContact(r);Se=null!=i&&null!=i.get_currentConversation()?i.get_currentConversation().get_buddyAddress():r.get_currentAddress(),null!=Se&&(U(e,t),cn.showSidebar(n))},cn.startConversationWithContact=function(e,t,n,r,i){var o=$WLXIM.getConversationAddress(e,t,n);nt(e,o,i,r)&&(Se=o,U(e.get_id(),i),cn.showSidebar(!0))},cn.startConversationWithIMAddress=function(e,t,n,r){nt(e,t,n,r)&&(Se=t,n=n||"",U(e.get_id(),n),cn.showSidebar(!0))},cn.startAudioCall=function(e,t,n,r){return rt(e,n,r)?(it(e,n,!1),w(e.get_id(),t,"voice"),!0):!1},cn.startVideoCall=function(e,t,n,r){return rt(e,n,r)?(it(e,n,!0),w(e.get_id(),t,"video"),!0):!1},cn.onToastClicked=function(e){U(e,"toast"),cn.showSidebar(!0)},cn.switchPresence=function(e){Ot&&(Ot.get_presence().set_status(e),Ot.get_settings().set_userPresencePreference(e))},cn.isVVWindow=function(){return Ut.vv},cn.showSidebar=function(t){if(0!=e("#rec_conv").length){var n=D("c_hiconm");null!=n&&n.setAttribute("aria-pressed","true");var r=e("#sidebar");r.is(":hidden")?(r.show(),pt("onSidebarOpenedEvent",cn.isSidebarOverlay()),Ce&&b(),x.rtl?r.css("left","0"):r.css("right","0"),k.Animations.showEdgeUI(r,{left:e(window).width(),top:0}).then(function(){if(st(t),pt("onSidebarOpenCompletedEvent",cn.isSidebarOverlay()),x.IE_M7&&Me&&Me.length>0){var r=Me.get(0),i=r.style.display;r.style.display="none",r.style.display=i}e(n).css("background-color",B)})):st(t),Ue=!0,ze&&Ne&&Ne.sendWebimPaneStateChanged(tt())}},cn.getSidebarOpenCookieState=function(){var e=P.getCookie("Webim_Sidebar_Open");if(e){var t=e.split(":state=");if(t&&2==t.length&&t[0].endsWith(M.cid)&&t[1].length>0)return t[1]}return null},cn.init=function(e,t){sn=t,gn>=fn?A.logAction("WebIM_AlreadyLoaded"):zt?A.logAction("WebIM_Alreadyoading"):Xt?(A.logAction("WebIM_DownloadPaused"),Gt=1):yt(),I.$Logout.add(_t)},cn.pause=function(){zt||(Xt=1)},cn.resume=function(){Xt=0,Gt&&yt()},cn.setTestFlags=function(e){Ut.eso&&(Ke=e)},cn.getTestFlags=function(){if(0==Ke&&Ut.eso&&I.location.search.indexOf("testflags=")>-1)for(var e=I.location.search.substring(1).split("&"),t=0,n=e.length;n>t;t++)if(e[t].startsWith("testflags=")){Ke=parseInt(e[t].split("=")[1]),isNaN(Ke)&&(Ke=0);break}return Ke},cn._pres=Tt,cn._inform=Wt}function n(){if(M.WebIM&&M.WebIM.cs){I.$WLXIM=new t;var n=e("body").attr("id");I.$WLXIM.isWac=n&&n.indexOf("Wac")>-1,setTimeout(function(){E.when("$BSI",0,y)},M.WebIM.delay||0)}}function r(t,n){if(Me&&Me.length>0&&!n){if(x.rtl&&x.Firefox){var r=ve+Me.width()-e(window).width();Me.css("left",r+"px")}var i=e(window).width()-ve+"px";Me.width(i),window.Shared&&Shared.ElementEventing.raise(window,"resize")}e("body").addClass("webim-opened")}function i(t){Me&&Me.length>0&&(Me.width(""),x.rtl&&x.Firefox&&Me.css("left","0"),Shared.ElementEventing.raise(window,"resize")),e("body").removeClass("webim-opened")}function o(){var t=m(F,N.body,"sidebar",null);t.setAttribute("persist","1"),$WLXIM.sidebar=t,E.register("$WLXIM.SidebarCreated"),e($WLXIM.sidebar).bind("onSidebarOpenedEvent",r),e($WLXIM.sidebar).bind("onSidebarCloseCompletedEvent",i),e($WLXIM.sidebar).addClass("t_sbgc"),E.register("wlxim_startconversation",$WLXIM.startConversationWithContact),E.when("NotificationControls",0,function(){k.Controls.Notifications.getQueue().start()}),e(t).css("top",Ve),I.$Sutra&&I.$Sutra.WebIM&&sutra(t,"$Sutra.WebIM.WebIMSidebar")}function a(){var t=I.MsgrUI,n=e("#sidebar").get(0),r="<span id='sidebar_close_img' tabindex='0' class='imCloseImg' style='background-image:url("+v(R)+");display:block;' role='button' aria-pressed='false'/>",i=13,o=32;e(n).append(r),e(n).find("#sidebar_close_img").on("click",function(){return $WLXIM.dismissSidebar(),!1}).on("keyup",function(e){return e.keyCode===o||e.keyCode===i?($WLXIM.dismissSidebar(),!1):void 0});var a=m(F,n,"sidebar_info",null),l=v(j),u="<div style='text-align:center'><img src='"+l+"' class='signin_loading_img' /> "+t._getLocString("signingInInfo")+"</div>";s(a,"signing",u,""),s(a,"reconnect","","<button class='default sidebar_button' type='button' onclick='$WLXIM.reconnect()'>"+t._getLocString("messagingPaneReconnectNow")+"</button>"),s(a,"signout",t._getLocString("messagingPaneSignOut"),"<button class='default sidebar_button' type='button' onclick='$WLXIM.signIn()'>"+t._getLocString("messagingPaneSignInButton")+"</button>"),s(a,"resignin",t._getLocString("messagingPaneSignOut"),"<button class='default sidebar_button' type='button' onclick='location.reload()'>"+t._getLocString("messagingPaneSignInButton")+"</button>");var d=m(F,n,"rec_conv",null),f=m(F,d,"rec_conv_body",null),g=m(F,n,"chat_view",null),p=m(F,g,"chat_view_body",null);c(),I.$Sutra&&I.$Sutra.WebIM&&(sutra(n,"$Sutra.WebIM.WebIMSidebar"),sutra(d,"$Sutra.WebIM.RecentConversationsView"),sutra(f,"$Sutra.WebIM.RecentConversationsList"),sutra(g,"$Sutra.WebIM.ChatView"),sutra(p,"$Sutra.WebIM.ChatViewBody"))}function s(t,n,r,i){var o="<table class='sidebar_info_table "+n+"'><tr style='vertical-align: bottom; height:50%'><td><div class='sidebar_info_top'>"+r+"</div></td></tr><tr style='vertical-align: top; height:50%'><td><div class='sidebar_info_bottom'>"+i+"</div></td></tr></table>";e(o).appendTo(t)}function c(){var t=I.Microsoft.Live.Messenger,n=I.MsgrUI,r=e(".sidebar_info");if(r.find("table").hide(),$WLXIM.isWaitingToReconnect()){var i=r.find("table.reconnect"),o=n._getLocString("messagingPaneReconnect").format($WLXIM.getReconnectingTime().min+":"+$WLXIM.getReconnectingTime().sec);i.find(".sidebar_info_top").text(o),i.show(),I.setTimeout(c,1e3)}else if($WLXIM.isLoading())r.find("table.signing").show();else if($WLXIM.user&&$WLXIM.user.get_status()==t.UserStatus.signedOut)r.find("table.resignin").show();else{if(!$WLXIM.user||$WLXIM.user.get_presence().get_status()!=t.PresenceStatus.offline||$WLXIM.user.get_status()!=t.UserStatus.signedIn)return void u();l()}d()}function l(){var t=e(".sidebar_info");d(),t.find("table").hide(),t.find("table.signout").show(),be&&(be.dispose(),be=null,e("#chat_view_body").empty())}function u(){var t=e(".sidebar_info");return t.is(":hidden")?void t.hide():(k.Animations.fadeOut(t).then(function(){t.hide()}),void(we&&$WLXIM.startConversationWithContactId(we,qe,!0)))}function d(){var t=e(".sidebar_info");t.is(":hidden")&&(t.show(),k.Animations.fadeIn(t).then(function(){}),$WLXIM.removeAllToasts())}function f(){E.when("$WLXIM.UserSignedIn",0,function(){uiQosApiStartTime=(new Date).getTime(),g(),Ee=!0,Ae=!1,$WLXIM.isWac||e($WLXIM.user.get_conversations()).bind("getRecentConversationsCompleted",function(){var e=$WLXIM.getSidebarOpenCookieState();e&&e!=O&&(e!=W&&null!=$WLXIM.user.get_contacts().findByIdWithoutRoleCheck(e)?$WLXIM.startConversationWithContactId(e,qe,!1):$WLXIM.showSidebar(!1))})})}function g(){var t=null,n=I.$pwc.settings.getImHistoryEnabled();n&&(t=h()),Ce=new I.MsgrUI.LandingPageControl($WLXIM.user),e("#rec_conv_body").append(Ce.render()),Ce.activate(),Ue&&b(),p()}function p(){var t=I.MsgrUI,n=e("#chat_view_body");be&&(n.empty(),be.dispose()),Se?(be=new t.ModernConversationControl(n[0],null,Se,$WLXIM.user),Se=null):we&&(be=new t.ModernConversationControl(n[0],we,null,null))}function h(){var e=M.WebIM.mh;return"javascript:window.location='"+e+"'"}function v(e){return M.WebIM.imgBase+e}function m(e,t,n,r){var i=N.createElement(e);return r&&(i.innerHTML=r),n&&(i.id=n,i.className=n),t&&t.appendChild(i),i}function _(){var t='a[href][tabindex!="-1"]:visible, textarea[tabindex!="-1"]:visible:not([disabled])',n=e(".WebIMUpsell:visible, .RecentConversationsControl_ConnectedTo, .ModernConversationControlBottom","#sidebar > div:visible");Ye=e(t,n).last()}function y(){var t=$WLXIM;if(M.WebIM.f||t.init(),E.register("wlxim",0,!0),e(".App #BelowHeader").length>0)$WLXIM.setPaneToResize(e(".App #BelowHeader"));else{var n=e("#c_base"),r=e("div.Files-belowHeader"),i=e("div.od-Photos-belowHeader");r.length>0?$WLXIM.setPaneToResize(r):i.length>0?$WLXIM.setPaneToResize(i):n.length>0&&$WLXIM.setPaneToResize(n)}0==e("#c_header").length?$WLXIM.setSidebarToFullScreen(!0):$WLXIM.setSidebarToFullScreen(!1)}function C(e,t,n){e&&(T.stopScenario(e,t,n),e.id&&A.log({eventType:e.id,resultCode:t?null:n},!t))}function b(){var e={ConversationCount:Ce.get_visibleItemCount()};I.$BSI.reportEvent("WebIM.RecentConversationCount",e),A.logDetails("WebIM_RecentConversationCount",e)}function w(e,t,n){if(t!==qe&&Ze.indexOf(e)<0){Ze.push(e);var r={WebIMLaunchPoint:t,ConversationType:n,isOverlayMode:$WLXIM.isSidebarOverlay()};I.$BSI.reportEvent("WebIM.ConversationStarted",r),A.logDetails("WebIM_ConversationStarted",r)}}function S(e){var t={WebIMCloseLocation:e};I.$BSI.reportEvent("WebIM.SidebarHidden",{WebIMCloseLocation:e}),A.logDetails("WebIM_SidebarHidden",t)}function $(t,n,r){var i={};i.TimeToLogin=Math.floor((new Date-Pe)/1e3),i.SignInSuccess=t,i.Culture=M.mkt,i.MessengerError=r||"-",i.WebImError=n||"-",i.EndpointId=t?$WLXIM.user.get_localEndpoint().get_id().toString():"-",i.WLContacts=0,i.SkypeContacts=0,i.ConnectContacts=0;try{var o=I.Microsoft.Live.Messenger;if(i.IsSkypeLogin=o.Services.SkyJSHelper.skypeEnabled,i.IsSkypeLogin){var a=o.Services.SkyJSHelper.initErrorCode;i.SkyjsErrorCode=""==a?"-":a,i.SkypeAccountType=I.SkyJS.Outlook.isUserLinkStatusActive(),i.SkypeLoginTime=$WLXIM.user.get_identity().skypeLoginTime}for(var s=0;s<$WLXIM.user.get_contacts().get_count();s++)for(var c=$WLXIM.user.get_contacts().get_item(s).get_addresses(),l=0;l<c.get_count();l++){var u=c.get_item(l).get_type();switch(u){case o.IMAddressType.windowsLive:i.WLContacts++;break;case o.IMAddressType.skype:i.SkypeContacts++;break;case o.IMAddressType.connect:i.ConnectContacts++}}}catch(d){A.logError("WebIM_SkypeReportingError",d)}var f={TimeToLogin:0,SkypeLoginTime:0,IsSkypeLogin:!1,SignInSuccess:!1,SkyjsErrorCode:"-",SkypeAccountType:!1,Culture:"-",MessengerError:"-",WebImError:"-",EndpointId:"-",WLContacts:0,SkypeContacts:0,ConnectContacts:0},g=e.extend({},f,i);$BSI.reportEvent("WebIM.LoginTime",g),A.logDetails("WebIM_LoginTime",g)}var I=window,k=I.wLive,x=I.$B,L=I.$Network,T=I.$ScenarioQoS,P=I.$Cookie,M=I.$Config,E=I.$Do,A=k.People.Reporter,N=I.document,D=I._ge,F="DIV",B="rgba(0, 0, 0, 0.24)",R="webim/imagestripmessaging.png",H="webim/messaging_icon_1.png",j="common/spinner_grey_40_transparent.gif",W=0,O=-1,U="FB",Q="WL",V="SKYPE",q="SCD",z="webimend",X="searchshared",G="WebIM",K="WebIM_CoreScriptLoad",J="WebIM_SkypeSendRequest",Y="WebIM_SkypeDeclineRequest",Z="WebIM_BlockRequest",ee="WebIM_UnblockRequest",te="WebIM_CoreScriptLoad_Loader",ne="WebIM_CoreScriptLoad_MessengerCore",re="WebIM_CoreScriptLoad_MessengerStrings",ie="WebIM_CoreScriptLoad_SkyJS",oe="WebIM_SkypeSendRequest_Call",ae="WebIM_SkypeDeclineRequest_Call",se="WebIM_SkypeBlockRequest_Call",ce="WebIM_SkypeUnblockRequest_Call",le="WebIM_MessengerBlockRequest_Call",ue="WebIM_MessengerUnblockRequest_Call",de="ScriptLoadFailure",fe='<div><div class="wim_decline_block"><input tabindex="-1" title="{0}" aria-label="{0}" type="checkbox" value="Block"><label title="{0}">{0}</label></div><div><input tabindex="-1" title="{1}" aria-label="{1}" type="checkbox" value="ReportAbuse"><label title="{1}">{1}</label></div></div>',ge='<div class="wim_block_message">{0}</div><div class="wim_block_repabuse"><input tabindex="-1" title="{1}" aria-label="{1}" type="checkbox" value="ReportAbuse"><label title="{1}">{1}</label></div>',pe=1e5,he=pe,ve=300,me=20,_e=new Array(1);_e[U]="sn/PsaMedium/FBActive.png";var ye=new Array(1);ye[U]="Facebook";var Ce,be,we,Se,$e,Ie,ke,xe,Le,Te,Pe,Me,Ee,Ae,Ne,De=!1,Fe=0,Be=0,Re=0,He={},je={},We={},Oe=!1,Ue=!1,Qe=!1,Ve=50,qe="resumedConversation",ze=!1,Xe=!1,Ge=!1,Ke=0,Je=null,Ye=null,Ze=[];n()}(window.originaljQuery||jQuery)}),define("wliveloaded",["webim"],function(){!function(){$Do.register("$WLiveLoaded")}()}),define("jquery.simplecallbacks",["jquery-1.7.2"],function(){!function(e,t,n){"use strict";var r=t;t.simpleCallbacks=function(){var e=[];return{fire:function(){for(var t=e,n=0;n<t.length;n++)t[n].apply(this,arguments)},add:function(t){e=e.slice(0),e.push(t)},remove:function(t){e=r.grep(e,function(e){return e!==t})},empty:function(){e=[]}}}}(this,window.originaljQuery||window.jQuery)}),define("jquery.observable",["jquery.simplecallbacks"],function(){!function(e,t,n){"use strict";function r(e,r,i,s){e=P(e)?e[0]:e;var c=i?{eventType:r,namespace:i}:a(r),l=c.eventType,u=c.namespace,d=k[l],f=e[S.expando];if(f){var g=f.events;if(g){var p=g[l];if(p&&p.length){for(var h=p.length-1;h>=0;--h){var v=p[h];u!==n&&!o(u,v.namespaceParts)||s!==n&&s!==v.handler||(d.remove.call(e,v),p.splice(h,1))}p.length||(delete g[l],t.isEmptyObject(g)&&delete f.events)}}}}function i(e,t,i){r(e,t,n,i)}function o(e,t){if(!t)return!1;for(var n=e.split("."),r=!0,i=0;r&&i<n.length;i++)n[i]&&(r=r&&t[n[i]]);return r}function a(e){var t=e,n="",r=e.indexOf(".");return r>-1&&(t=e.substr(0,r),n=e.substr(r+1)),{eventType:t,namespace:n}}function s(e,t,r){c(e,t,n,n,r)}function c(e,t,n,r,i){e=P(e)?e[0]:e;for(var o=e[S.expando]=e[S.expando]||{},s=o.events=o.events||{},c=a(t),l=c.eventType,u=c.namespace,d=s[l]=s[l]||[],f={},g=u.split("."),p=0;p<g.length;p++)f[g[p]]=!0;d.push({namespace:u,namespaceParts:f,data:r,handler:i,type:l,origType:l,selector:n})}function l(e,t,n){e=P(e)?e[0]:e;var r=e[S.expando];if(r){var i=r.events;if(i){var o=i[t];if(o)for(var a=0;a<o.length;a++){var s=o[a];s.handler.call(e,{data:s.data,type:t,handleObj:s,target:e},n)}}}}function u(e){return P(e)?new f(e):new d(e)}function d(e){return this._data=e,this}function f(e){return this._data=e,this}function g(e){return P(e)?[e]:e}function p(e){if("number"!=typeof e)throw"Invalid index."}function h(e,t){e=P(e)?e:[e];var n,r,i=t,o=i,a=e.length,s=[];for(n=0;a>n;n++)r=e[n],B(r)?L.apply(s,[s.length,1].concat(h(r.call(t,t),t))):""+r===r?(o!==i&&s.push(i=o),s.push(r)):(t=o=r,o!==i&&s.push(i=o));return s}function v(e,t){var n,r;for(n in e){r=!0;break}r||delete D[t]}function m(e,t){if(!e.data||!e.data.off){var n=t.oldValue,r=e.data;e.type===N?r.cb.array(e,t):"*"!==r.prop&&r.prop!==t.path||(typeof n===E&&w(g(n),r.path,r.cb),typeof(n=t.value)===E&&b(g(n),r.path,r.cb),r.cb(e,t))}}function _(e,t,n,r,i,o,a){return e._ob=a(e,n),function(){var s=e._ob,c=t.length;typeof s===E&&(y(s,r,i,o,!0),c&&w(g(s),t,r,a,n)),s=e._ob=a(e,n),typeof s===E&&(y(s,r,i,o),c&&b(g(s),t,r,a,n))}}function y(e,t,r,i,o){t&&t.array&&P(e)&&C(N+".observe.obs"+t._bnd,n,e,t,r,i,!0,o)}function C(e,n,i,o,a,s,l,u){var d,f,p,h=j(i),v=g(i);if(u)h&&r(v,e);else{if(d=h&&t._data(i))for(d=d&&d.events,d=d&&d[l?N:A],f=d&&d.length;f--;)if((p=d[f].data)&&p.cb===o){if(l)return;"*"===n&&p.prop!==n&&r(i,e+"."+p.prop)}c(v,e,null,l?{cb:o}:{path:n,prop:a,cb:o},m),s&&(s[t.data(i,"obId")||t.data(i,"obId",R++)]=i)}}function b(){var e,i,o,a,s,c,l,u,d,f,p,m,w,S,$,I,k,x=1,P=F,M=T.apply([],arguments),E=M.pop(),A=M[0],N=""+A!==A?M.shift():n,R=M.length;for(A=N,B(E)?u=E:(E===!0?l=E:E&&(A=E,x=0),E=M[R-1],(R&&E===n||B(E))&&(u=M.pop(),R--)),B(M[R-1])&&(w=u,u=M.pop(),R--),P+=l?u?".obs"+u._bnd:"":".obs"+(d=u._bnd=u._bnd||H++),l&&0===R&&N&&r(N,F),l||($=D[d]=D[d]||{}),I=0,e=0;R>e;e++){if(a=M[e],y(c,u,o,l),c=N,""+a===a){if(i=a.split("^"),i[1]&&(I=i[0].split(".").length,a=i.join("."),I=a.split(".").length-I),w&&(S=w(a,N))){R+=S.length-1,L.apply(M,[e--,1].concat(S));continue}i=a.split(".")}else x&&!B(a)&&(a._jsvOb&&(l||(a._cb=k=_(a,M.slice(e+1),A,u,o,$,w),a._rt=A,k._bnd=u._bnd),b(a._rt,M.slice(0,e),a._cb,w,l),a=a._ob),c=a),N=a,i=[N];for(;c&&"object"==typeof c&&(o=i.shift())!==n;){if(""+o===o){if(""===o)continue;if(i.length<I+1&&!c.nodeType){if(!l&&(m=j(c)&&t._data(c))){for(m=m.events,m=m&&m.propertyChange,f=m&&m.length;f--&&(p=m[f].data,!p||p.cb!==u||(p.prop!==o||p.path!==i.join("."))&&"*"!==p.prop););if(f>-1){c=c[o];continue}}if("*"===o){B(c)?(s=c.depends)&&b(s,u,l||A):C(P,o,c,u,o,$,n,l);break}!o||B(s=c[o])&&s.depends||C(P+"."+o,i.join("."),c,u,o,$,n,l)}o=o?c[o]:c}if(B(o)){(s=o.depends)&&b(c,h(s,c),u,w,l||g(A));break}c=o}}return y(c,u,o,l),d&&v($,d),{cbId:d,bnd:$,leaf:c}}function w(){return[].push.call(arguments,!0),b.apply(this,arguments)}var S=t;if(!t)throw"requires jQuery or JsRender";if(!t.observable){var $,I,k=t.event.special,x=t.views?t.views.sub:{},L=[].splice,T=[].concat,P=function(e){return e instanceof Array},M=t.expando,E="object",A=x.propChng=x.propChng||"propertyChange",N=x.arrChng=x.arrChng||"arrayChange",D=x._cbBnds=x._cbBnds||{},F=A+".observe",B=function(e){return"function"==typeof e},R=1,H=1,j=t.hasData;t.observable=u,u.Object=d,u.Array=f,u.observe=b,u.unobserve=w,u.on=c,u.simpleOn=s,u.simpleOff=i,u.off=r,u.trigger=l,u.onObservableTrigger=t.simpleCallbacks(),d.prototype={_data:null,data:function(){return this._data},observe:function(e,t){return b(this._data,e,t)},unobserve:function(e,t){return w(this._data,e,t)},setProperty:function(e,t,r){var i,o,a,s=this,c=s._data;if(e=e||"",c)if(P(e))for(i=e.length;i--;)o=e[i],s.setProperty(o.name,o.value,r===n||r);else if(""+e!==e)for(i in e)s.setProperty(i,e[i],t);else if(e.indexOf(M)<0){for(a=e.split(".");c&&a.length>1;)c=c[a.shift()];s._setProperty(c,a.join("."),t,r)}return s},_setProperty:function(e,t,n,r){var i,o,a=t?e[t]:e;B(a)&&a.set&&(o=a,i=a.set===!0?a:a.set,a=a.call(e)),(a!==n||r&&a!=n)&&(!(a instanceof Date)||a>n||n>a)&&(i?(i.call(e,n),n=o.call(e)):e[t]=n,this._trigger(e,{path:t,value:n,oldValue:a}))},_trigger:function(e,n){t.observable.onObservableTrigger.fire(),l(e,A,n)}},f.prototype={_data:null,data:function(){return this._data},insert:function(e,t){return p(e),arguments.length>1&&(t=P(t)?t:[t],t.length&&this._insert(e,t)),this},_insert:function(e,t){I=this._data,$=I.length,L.apply(I,[e,0].concat(t)),this._trigger({change:"insert",index:e,items:t})},remove:function(e,t){if(p(e),t=t===n||null===t?1:t,t&&e>-1){var r=this._data.slice(e,e+t);t=r.length,t&&this._remove(e,t,r)}return this},_remove:function(e,t,n){I=this._data,$=I.length,I.splice(e,t),this._trigger({change:"remove",index:e,items:n})},move:function(e,t,r){if(p(e),p(t),r=r===n||null===r?1:r){var i=this._data.slice(e,e+r);this._move(e,t,r,i)}return this},_move:function(e,t,n,r){I=this._data,$=I.length,I.splice(e,n),I.splice.apply(I,[t,0].concat(r)),this._trigger({change:"move",oldIndex:e,index:t,items:r})},refresh:function(e){var t=this._data.slice(0);return this._refresh(t,e),this},_refresh:function(e,t){I=this._data,$=I.length,L.apply(I,[0,I.length].concat(t)),this._trigger({change:"refresh",oldItems:e})},_trigger:function(e){var n=I.length;t.observable.onObservableTrigger.fire(),l([I],N,e),n!==$&&l([I],A,{path:"length",value:n,oldValue:$})}},k[A]=k[N]={remove:function(e){if((e=e.data)&&(e.off=1,e=e.cb)){var n=e._bnd,r=D[n];r&&(delete r[t.data(this,"obId")],v(r,n))}}}}}(this,window.originaljQuery||window.jQuery||this.jsviews)}),define("jsrender",["jquery.observable"],function(){!function(e,t,n){"use strict";function r(e,t){t&&t.onError&&t.onError(e)===!1||(this.name="JsRender Error",this.message=e||"JsRender error")}function i(e,t){var n;e=e||{};for(n in t)e[n]=t[n];return e}function o(e,t,n){return re.rTag&&!arguments.length||(E=e?e.charAt(0):E,A=e?e.charAt(1):A,N=t?t.charAt(0):N,D=t?t.charAt(1):D,F=n||F,e="\\"+E+"(\\"+F+")?\\"+A,t="\\"+N+"\\"+D,T="(?:(?:(\\w+(?=[\\/\\s\\"+N+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+N+"]|\\"+N+"(?!\\"+D+"))*?)",re.rTag=T+")",T=new RegExp(e+T+"(\\/)?|(?:\\/(\\w+)))"+t,"g"),P=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t)),[E,A,N,D,F]}function a(e,t){t||(t=e,e=n);var r,i,o,a,s=this,c=!t||"root"===t;if(e){if(a=s.type===t?s:n,!a)if(r=s.views,s._.useKey){for(i in r)if(a=r[i].get(e,t))break}else for(i=0,o=r.length;!a&&o>i;i++)a=r[i].get(e,t)}else if(c)for(;s.parent.parent;)a=s=s.parent;else for(;s&&!a;)a=s.type===t?s:n,s=s.parent;return a}function s(){var e=this.get("item");return e?e.index:n}function c(e){var t,r=this,i=(r.ctx||{})[e];return i=i===n?r.getRsc("helpers",e):i,i&&"function"==typeof i&&(t=function(){return i.apply(r,arguments)}),t||i}function l(e,t,r){var i,o,a,s=+r===r&&r,c=t.linkCtx;return s&&(r=(s=t.tmpl.bnds[s-1])(t.data,t,Z)),a=r.args[0],(e||s)&&(o=c&&c.tag||{_:{inline:!c},tagName:e+":",flow:!0,_is:"tag"},o._.bnd=s,c&&(c.tag=o,o.linkCtx=c,r.ctx=I(r.ctx,c.view.ctx)),o.tagCtx=r,r.view=t,o.ctx=r.ctx||{},delete r.ctx,t._.tag=o,e="true"!==e&&e,e&&((i=t.getRsc("converters",e))||y("Unknown converter: {{"+e+":"))&&(o.depends=i.depends,a=i.apply(o,r.args)),a=s&&t._.onRender?t._.onRender(a,t,s):a,t._.tag=n),a}function u(e,t){var r,i=this,o=Z[e];for(r=o&&o[t];r===n&&i;)o=i.tmpl[e],r=o&&o[t],i=i.parent;return r}function d(e,t,r,i){var o,a,s,c,l,u,d,f,g,p,h,v,m,C,b="",w=+i===i&&i,S=t.linkCtx||0,$=t.ctx,k=r||t.tmpl,x=t._;for("tag"===e._is&&(a=e,e=a.tagName),w&&(i=(v=k.bnds[w-1])(t.data,t,Z)),d=i.length,a=a||S.tag,u=0;d>u;u++)g=i[u],h=g.tmpl,h=g.content=h&&k.tmpls[h-1],r=g.props.tmpl,u||r&&a||(m=t.getRsc("tags",e)||y("Unknown tag: {{"+e+"}}")),r=r||(a?a._def:m).template||h,r=""+r===r?t.getRsc("templates",r)||ee(r):r,g.tmpl=r,g.render=_,g.index=u,g.view=t,g.ctx=I(g.ctx,$),a||(m._ctr?(a=new m._ctr,C=!!a.init,a.attr=a.attr||m.attr||n):a={render:m.render},a._={inline:!S},S&&(S.attr=a.attr=S.attr||a.attr,S.tag=a,a.linkCtx=S),(a._.bnd=v||S)&&(a._.arrVws={}),a.tagName=e,a.parent=l=$&&$.tag,a._is="tag",a._def=m),x.tag=a,g.tag=a,a.tagCtxs=i,a.flow||(p=g.ctx=g.ctx||{},s=a.parents=p.parentTags=$&&I(p.parentTags,$.parentTags)||{},l&&(s[l.tagName]=l),p.tag=a),a.rendering={};for(u=0;d>u;u++)g=a.tagCtx=i[u],a.ctx=g.ctx,!u&&C&&(a.init(g,S,a.ctx),C=n),(o=a.render)&&(f=o.apply(a,g.args)),b+=f!==n?f:g.tmpl?g.render():"";return delete a.rendering,a.tagCtx=a.tagCtxs[0],a.ctx=a.tagCtx.ctx,a._.inline&&(c=a.attr)&&"html"!==c&&(b="text"===c?te.html(b):""),b=w&&t._.onRender?t._.onRender(b,t,w):b}function f(e,t,r,i,o,l,d,f){var g,p,h,v="array"===t,m={key:0,useKey:v?0:1,id:""+X++,onRender:f,bnds:{}},_={data:i,tmpl:o,content:d,views:v?[]:{},parent:r,ctx:e,type:t,get:a,getIndex:s,getRsc:u,hlp:c,_:m,_is:"view"};return r&&(g=r.views,p=r._,p.useKey?(g[m.key="_"+p.useKey++]=_,h=p.tag,m.bnd=v&&(!h||!!h._.bnd&&h)):g.splice(m.key=_.index=l!==n?l:g.length,0,_),_.ctx=e||r.ctx),_}function g(e){var t,n,r,i,o;for(t in Y)if(i=Y[t],(o=i.compile)&&(n=e[t+"s"]))for(r in n)n[r]=o(r,n[r],e,t,i)}function p(e,t,n){var r,i;return"function"==typeof t?t={depends:t.depends,render:t}:((i=t.template)&&(t.template=""+i===i?ee[i]||ee(i):i),t.init!==!1&&(r=t._ctr=function(e){},(r.prototype=t).constructor=r)),n&&(t._parentTmpl=n),t}function h(r,i,o,a,s,c){function l(n){if(""+n===n||n.nodeType>0){try{d=n.nodeType>0?n:!P.test(n)&&t&&t(e.document).find(n)[0]}catch(i){}return d&&(n=d.getAttribute(K),r=r||n,n=ee[n],n||(r=r||"_"+z++,d.setAttribute(K,r),n=ee[r]=h(r,d.innerHTML,o,a,s,c))),n}}var u,d;return i=i||"",u=l(i),c=c||(i.markup?i:{}),c.tmplName=r,o&&(c._parentTmpl=o),!u&&i.markup&&(u=l(i.markup))&&(!u.fn||u.debug===i.debug&&u.allowCode===i.allowCode||(u=u.markup)),u!==n?(r&&!o&&(J[r]=function(){return i.render.apply(i,arguments)}),u.fn||i.fn?u.fn&&(i=r&&r!==u.tmplName?I(c,u):u):(i=v(u,c),b(u,i)),g(c),i):void 0}function v(e,t){var n,r=ie.wrapMap||{},o=i({markup:e,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:_},t);return t.htmlTag||(n=Q.exec(e),o.htmlTag=n?n[1].toLowerCase():""),n=r[o.htmlTag],n&&n!==r.div&&(o.markup=x.trim(o.markup),o._elCnt=!0),o}function m(e,t){function r(o,a,s){var c,l,u,d;if(o&&""+o!==o&&!o.nodeType&&!o.markup){for(u in o)r(u,o[u],a);return Z}return a===n&&(a=o,o=n),o&&""+o!==o&&(s=a,a=o,o=n),d=s?s[i]=s[i]||{}:r,l=t.compile,(c=re.onBeforeStoreItem)&&(l=c(d,o,a,l)||l),o?null===a?delete d[o]:d[o]=l?a=l(o,a,s,e,t):a:a=l(n,a),a&&(a._is=e),(c=re.onStoreItem)&&c(d,o,a,l),a}var i=e+"s";Z[i]=r,Y[e]=t}function _(e,t,r,i,o,a){var s,c,l,u,d,g,p,h,v,m,_,C,b,w=this,S=!w.attr||"html"===w.attr,$="";if(i===!0&&(p=!0,i=0),w.tag?(h=w,w=w.tag,m=w._,C=w.tagName,b=h.tmpl,t=I(t,w.ctx),v=h.content,h.props.link===!1&&(t=t||{},t.link=!1),r=r||h.view,e=e===n?r:e):b=w.jquery&&(w[0]||y('Unknown template: "'+w.selector+'"'))||w,b&&(!r&&e&&"view"===e._is&&(r=e),r&&(v=v||r.content,a=a||r._.onRender,e===r&&(e=r.data,o=!0),t=I(t,r.ctx)),r&&r.data!==n||((t=t||{}).root=e),b.fn||(b=ee[b]||ee(b)),b)){if(a=(t&&t.link)!==!1&&S&&a,_=a,a===!0&&(_=n,a=r._.onRender),x.isArray(e)&&!o)for(u=p?r:i!==n&&r||f(t,"array",r,e,b,i,v,a),s=0,c=e.length;c>s;s++)l=e[s],d=f(t,"item",u,l,b,(i||0)+s,v,a),g=b.fn(l,d,Z),$+=u._.onRender?u._.onRender(g,d):g;else u=p?r:f(t,C||"data",r,e,b,i,v,a),m&&!w.flow&&(u.tag=w),$+=b.fn(e,u,Z);return _?_($,u):$}return""}function y(e){throw new Z.sub.Error(e)}function C(e){y("Syntax error\n"+e)}function b(e,t,n,r){function i(t){t-=u,t&&f.push(e.substr(u,t).replace(H,"\\n"))}function o(t){t&&C('Unmatched or missing tag: "{{/'+t+'}}" in template:\n'+e)}function a(a,l,p,h,v,m,_,y,b,w,$,I){m&&(v=":",h="html"),w=w||n;var k,x,L=l&&[],T="",P="",M="",E=!w&&!v&&!_;p=p||v,i(I),u=I+a.length,y?c&&f.push(["*","\n"+b.replace(j,"$1")+"\n"]):p?("else"===p&&(U.test(b)&&C('for "{{else if expr}}" use "{{else expr}}"'),L=g[6],g[7]=e.substring(g[7],I),g=d.pop(),f=g[3],E=!0),b&&(b=b.replace(H," "),T=S(b,L,t).replace(O,function(e,t,n){return t?M+=n+",":P+=n+",",""})),P=P.slice(0,-1),T=T.slice(0,-1),k=P&&P.indexOf("noerror:true")+1&&P||"",s=[p,h||!!r||"",T,E&&[],'params:"'+b+'",props:{'+P+"}"+(M?",ctx:{"+M.slice(0,-1)+"}":""),k,L||0],f.push(s),E&&(d.push(g),g=s,g[7]=u)):$&&(x=g[0],o($!==x&&"else"!==x&&$),g[7]=e.substring(g[7],I),g=d.pop()),o(!g&&$),f=g[3]}var s,c=t&&t.allowCode,l=[],u=0,d=[],f=l,g=[,,,l];return e=e.replace(W,"\\$1"),o(d[0]&&d[0][3].pop()[0]),e.replace(T,a),i(e.length),(u=l[l.length-1])&&o(""+u!==u&&+u[7]===u[7]&&u[0]),w(l,n?e:t,n)}function w(e,n,r){var i,o,a,s,c,l,u,d,f,g,p,h,m,_,y,b,S,$,I,k,x,L,T,P,M,E,A,N=0,D="",F="",B={},R=e.length;for(""+n===n?(b=r?'data-link="'+n.replace(H," ").slice(1,-1)+'"':n,n=0):(b=n.tmplName||"unnamed",(I=n.allowCode)&&(B.allowCode=!0),n.debug&&(B.debug=!0),h=n.bnds,y=n.tmpls),i=0;R>i;i++)if(o=e[i],""+o===o)D+='\nret+="'+o+'";';else if(a=o[0],"*"===a)D+=""+o[1];else{if(s=o[1],c=o[2],k=o[3],l=o[4],F=o[5],x=o[7],(P="else"===a)||(N=0,h&&(m=o[6])&&(N=h.push(m))),(M=":"===a)?(s&&(a="html"===s?">":s+a),F&&(E="prm"+i,F="try{var "+E+"=["+c+"][0];}catch(e){"+E+'="";}\n',c=E)):(k&&(S=v(x,B),S.tmplName=b+"/"+a,w(k,S),y.push(S)),P||($=a,T=D,D="",_=i),L=e[i+1],L=L&&"else"===L[0]),l+=",args:["+c+"]}",M&&m||s&&">"!==a){if(A=new Function("data,view,j,u"," // "+b+" "+N+" "+a+"\n"+F+"return {"+l+";"),A.paths=m,A._ctxs=a,r)return A;p=1}if(D+=M?"\n"+(m?"":F)+(r?"return ":"ret+=")+(p?(p=0,g=!0,'c("'+s+'",view,'+(m?(h[N-1]=A,N):"{"+l)+");"):">"===a?(d=!0,"h("+c+");"):(f=!0,"(v="+c+")!="+(r?"=":"")+'u?v:"";')):(u=!0,"{tmpl:"+(k?y.length:"0")+","+l+","),$&&!L){if(D="["+D.slice(0,-1)+"]",(r||m)&&(D=new Function("data,view,j,u"," // "+b+" "+N+" "+$+"\nreturn "+D+";"),m&&((h[N-1]=D).paths=m),D._ctxs=a,r))return D;D=T+'\nret+=t("'+$+'",view,this,'+(N||D)+");",m=0,$=0}}D="// "+b+"\nvar j=j||"+(t?"jQuery.":"js")+"views"+(f?",v":"")+(u?",t=j._tag":"")+(g?",c=j._cnvt":"")+(d?",h=j.converters.html":"")+(r?";\n":',ret="";\n')+(ie.tryCatch?"try{\n":"")+(B.debug?"debugger;":"")+D+(r?"\n":"\nreturn ret;\n")+(ie.tryCatch?"\n}catch(e){return j._err(e);}":"");try{D=new Function("data,view,j,u",D)}catch(j){C("Compiled template code:\n\n"+D,j)}return n&&(n.fn=D),D}function S(e,t,n){function r(r,f,g,p,h,v,m,_,y,w,$,I,k,x,L,T,P,M,F){function R(e,n,r,i,a,s,c){if(n&&(t&&!o&&t.push(p),"."!==n)){var l=(r?'view.hlp("'+r+'")':i?"view":"data")+(c?(a?"."+a:r?"":i?"":"."+n)+(s||""):(c=r?"":i?a||"":n,""));return l+=c?"."+c:"","view.data"===l.slice(0,9)?l.slice(5):l}return e}var H;return h=h||"",g=g||f||$,p=p||_,y=y||T||"",v?void C(e):(t&&L&&(H=c[l],F.length-2>M-H&&(H=F.slice(H,M+1),L=A+":"+H+N,L=a[L]=a[L]||b(E+L+D,n,!0),L.paths||S(H,L.paths=[],n),t.push({_jsvOb:L}))),d?(d=!I,d?r:'"'):u?(u=!k,u?r:'"'):(g?(l++,c[l]=M++,g):"")+(P?l?"":i?(i=o=!1,"\b"):",":m?(l&&C(e),i=p,o="~"===p.charAt(0),"\b"+p+":"):p?p.split("^").join(".").replace(B,R)+(y?(s[++l]=!0,
"."!==p.charAt(0)&&(c[l]=M),y):h):h?h:x?(s[l--]=!1,x+(y?(s[++l]=!0,y):"")):w?(s[l]||C(e),","):f?"":(d=I,u=k,'"')))}var i,o,a=n.links,s={},c={0:-1},l=0,u=!1,d=!1;return(e+" ").replace(R,r)}function $(){}function I(e,t){var n;return t&&($.prototype=t),n=e&&e!==t?t?i(new $,e):e:t&&new $}function k(e){return G[e]||(G[e]="&#"+e.charCodeAt(0)+";")}if(!(t&&t.views||e.jsviews)){var x,L,T,P,M="v1.0pre",E="{",A="{",N="}",D="}",F="^",B=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,R=/(\()(?=\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^)|[)\]])([([]?))|(\s+)/g,H=/\s*\n/g,j=/\\(['"])/g,W=/\\?(['"\\])/g,O=/\x08(~)?([^\x08]+)\x08/g,U=/^if\s/,Q=/<(\w+)[>\s]/,V=/[\x00`><"'&]/g,q=V,z=0,X=0,G={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},K="data-jsv-tmpl",J=([].slice,{}),Y={template:{compile:h},tag:{compile:p},helper:{},converter:{}},Z={jsviews:M,render:J,settings:{delimiters:o,debugMode:!0,tryCatch:!0},sub:{View:f,Error:r,tmplFn:b,parse:S,extend:i,error:y,syntaxError:C},_cnvt:l,_tag:d,_err:function(e){return ie.debugMode?"Error: "+(e.message||e)+". ":""}};(r.prototype=new Error).constructor=r,s.depends=function(){return[this.get("item"),"index"]};for(L in Y)m(L,Y[L]);var ee=Z.templates,te=Z.converters,ne=(Z.helpers,Z.tags),re=Z.sub,ie=Z.settings;t?(x=t,x.fn.render=_):(x=e.jsviews={},x.isArray=Array&&Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}),x.render=J,x.views=Z,x.templates=ee=Z.templates,ne({"else":function(){},"if":{render:function(e){var t=this,n=t.rendering.done||!e&&(arguments.length||!t.tagCtx.index)?"":(t.rendering.done=!0,t.selected=t.tagCtx.index,t.tagCtx.render());return n},onUpdate:function(e,t,n){var r,i,o;for(r=0;(i=this.tagCtxs[r])&&i.args.length;r++)if(i=i.args[0],o=!i!=!n[r].args[0],i||o)return o;return!1},flow:!0},"for":{render:function(e){var t=this,r=t.tagCtx,i=!arguments.length,o="",a=i||0;return t.rendering.done||(i?o=n:e!==n&&(o+=r.render(e),a+=x.isArray(e)?e.length:1),(t.rendering.done=a)&&(t.selected=r.index)),o},onUpdate:function(e,t,n){},onArrayChange:function(e,t){var n,r=this,i=t.change;if(this.tagCtxs[1]&&("insert"===i&&e.target.length===t.items.length||"remove"===i&&!e.target.length||"refresh"===i&&!t.oldItems.length!=!e.target.length))this.refresh();else for(n in r._.arrVws)n=r._.arrVws[n],n.data===e.target&&n._.onArrayChange.apply(n,arguments);e.done=!0},flow:!0},include:{flow:!0},"*":{render:function(e){return e},flow:!0}}),te({html:function(e){return e!=n?String(e).replace(q,k):""},attr:function(e){return e!=n?String(e).replace(V,k):null===e?null:""},url:function(e){return e!=n?encodeURI(String(e)):null===e?null:""}}),o()}}(this,window.originaljQuery||window.jQuery)}),define("jquery.views",["jsrender"],function(){!function(e,t,n){"use strict";function r(e){var r,i,o,a,s,l,u,d,f,g,p,h,v,m,_,y=e.target,C=y._jsvBnd;if(C)for(h=C.slice(1).split("&"),v=h.length;v--;)(p=Pe[h[v]])&&(a=p.linkCtx,g=a.view,(C=p.to)&&(f=t(y),m=g.hlp(ce),_=g.hlp(le),o=c(y),r=he[o],s=Z(o)?o(y):r?f[r]():f.attr(o),m&&(i=m.call(g,e)===!1)||s===n||(u=C[1],C=C[0],d=C[0],d=d._jsvOb?d._ob:d,C=C[2]||C[1],Z(u)?l=u:(l=g.tmpl.converters,l=l&&l[u]||X.converters[u]),l&&(s=l.call(a.tag,s)),s!==n&&d&&(te(d).setProperty(C,s),_&&_.call(a,e))),i&&e.stopImmediatePropagation()))}function i(e,r,i){var o,s,l,u,f,g,p,h,v,m,_=this,y=_.data,C=_.elem,b=_.cvt,w="attr",S=C.parentNode,$=S,I=t(C),k=_.view,L=k.hlp(ce);if(S&&(!L||!r||L.call(_,e,r)!==!1)&&(!r||"*"===e.data.prop||e.data.prop===r.path)){if(v=k.linkCtx,k.linkCtx=_,r&&(_.eventArgs=r),!e||r||_._initVal){if(delete _._initVal,u=i.call(k.tmpl,y,k,X),o=_.attr||c(C,!0,b!==n),g=_.tag){if(r&&g.onUpdate&&g.onUpdate(e,r,u)===!1||"none"===o)return d(_,y,C,i),void(k.linkCtx=v);u=":"===g.tagName.slice(-1)?X._cnvt(g.tagName.slice(0,-1),k,u):X._tag(g.tagName,k,k.tmpl,u)}else i._ctxs&&(b=""===b?"true":b,u=b?X._cnvt(b,k,u):X._tag(i._ctxs,k,k.tmpl,u),g=k._.tag,o=_.attr||o);if(g&&(g.parentElem=_.expr||g._elCnt?C:C.parentNode,p=g._prv,h=g._nxt,g.refresh=x),Z(u)&&ye(_.expr+": missing parens"),"visible"===o&&(o="css-display",u=u?a(C):"none"),f=0===o.lastIndexOf("css-",0)&&o.substr(4))(l=t.style(C,f)!==u)&&t.style(C,f,u);else if("link"!==o){if("value"===o)"checkbox"===C.type&&(u=u&&"false"!==u,w="prop",o="checked");else if("radio"===o){if(C.value!==""+u)return d(_,y,C,i),void(k.linkCtx=v);u=!0,w="prop",o="checked"}else"selected"!==o&&"disabled"!==o&&"multiple"!==o&&"readlonly"!==o||(u=u&&"false"!==u?o:null);if(s=he[o]){if(l=g||I[s]()!==u)if("html"===o)if(g){if(m=g._.inline,g.refresh(u),!m&&g._.inline)return void(k.linkCtx=v)}else I.empty(),$=C,k.link(y,$,p,h,u,g&&{tag:g._tgId});else"text"!==o||C.children[0]?I[s](u):C.textContent!==n?C.textContent=u:C.innerText=null===u?"":u}else(l=I[w](o)!=u)&&(null==u?I["attr"===w?"removeAttr":"removeProp"](o):I[w](o,u))}r&&l&&(L=k.hlp(le))&&L.call(_,e,r)}d(_,y,C,i),k.linkCtx=v}}function o(e,t){var n=this,r=n.hlp(ce),i=n.hlp(le);if(!r||r.call(e,t)!==!1){if(t){var o=t.change,a=t.index,s=t.items;switch(o){case"insert":n.addViews(a,s);break;case"remove":n.removeViews(a,s.length);break;case"move":n.refresh();break;case"refresh":n.refresh()}}i&&i.call(this,e,t)}}function a(t){var n,r,i=e.getComputedStyle,o=(t.currentStyle||i.call(e,t,"")).display;return"none"!==o||(o=Le[r=t.nodeName])||(n=z.createElement(r),z.body.appendChild(n),o=(i?i.call(e,n,""):n.currentStyle).display,Le[r]=o,z.body.removeChild(n)),o}function s(e){var r,i,a=e.data,s=e._.bnd;!e._.useKey&&s&&((i=e._.bndArr)&&(t.observable.off([i[1]],ae,n,i[0]),e._.bndArr=n),s===!!s||s.linkCtx?a&&(r=function(t){t.data&&t.data.off||o.apply(e,arguments)},t.observable.on([a],ae,null,null,r),e._.bndArr=[r,a]):a?s._.arrVws[e._.id]=e:delete s._.arrVws[e._.id])}function c(e,t,n){var r=e.nodeName.toLowerCase(),i=K.merge[r];return i?t?"input"===r&&"radio"===e.type?"radio":i.to.toAttr:i.from.fromAttr:t?n?"text":"html":""}function l(e,r,i,o,a,s,c){var l,u,d,f,g,p=e.parentElem,h=e._prv,v=e._nxt,m=e._elCnt;if(h&&h.parentNode!==p&&ye("Missing parentNode"),c){f=e.nodes(),m&&h&&h!==v&&D(h,v,p,e._.id,"_",!0),e.removeViews(n,n,!0),u=v,m&&(h=h?h.previousSibling:v?v.previousSibling:p.lastChild),t(f).remove();for(g in e._.bnds)P(g)}else{if(r){if(d=o[r-1],!d)return!1;h=d._nxt}m?(u=h,h=u?u.previousSibling:p.lastChild):u=h.nextSibling}l=i.render(a,s,e,c||r,e._.useKey&&c,!0),e.link(a,p,h,u,l,d)}function u(e,t,r){var i,o,a;return r?(a="^`",o=t._.tag||{_:{inline:!0,bnd:r},tagCtx:{view:t},flow:!0},i=o._tgId,o.refresh=x,i||(Pe[i=Ee++]=o,o._tgId=""+i)):(a="_`",Te[i=t._.id]=t),"#"+i+a+(e===n?"":e)+"/"+i+a}function d(e,r,i,o){var a,s,c,l,u,d,f=[],g=e._bndId||""+Ee++,p=e._hdlr;if(delete e._bndId,(a=e.tag)&&(f=a.depends||f,f=Z(f)?a.depends(a):f,c=a.onChange),c=c||e._cvtBk,(!e._depends||""+e._depends!=""+f)&&(e._depends&&ne(r,e._depends,p,!0),s=ne(t.isArray(r)?[r]:r,l=e.fn.paths||e.fn,f,p,e._ctxCb),s.elem=i,s.linkCtx=e,s._tgId=g,i._jsvBnd=i._jsvBnd||"",i._jsvBnd+="&"+g,e._depends=f,e.view._.bnds[g]=g,Pe[g]=s,c!==n)){for(d=l.length;""+(u=l[--d])!==u;);u=l[d]=u.split("^").join("."),s.to="."===u.charAt(0)?[[l[d-1],u.slice(1)],c]:[e._ctxCb(l[0])||[r,l[0]],c]}}function f(e,t,n,r,i,o){return g(this,e,t,n,r,i,o)}function g(e,i,o,a,s,c,l,d){if(e&&i){i=i.jquery?i:t(i),R||(R=z.body,t(R).on(se,r));for(var f,g,p,v,m,_,y,b=u,w=a&&"replace"===a.target,S=i.length;S--;)if(y=i[S],"string"==typeof e)h(e,y,H(y),o,a);else{if(s=s||H(y),e.markup!==n)s.link===!1&&(a=a||{},a.link=b=!1),w&&(_=y.parentNode),p=e.render(o,a,s,n,n,b),_?(c=y.previousSibling,l=y.nextSibling,t.cleanData([y],!0),_.removeChild(y),y=_):(c=l=n,t(y).empty());else if(e!==!0)break;if(y._dfr&&!l){for(v=C(y._dfr,!0,De),f=0,g=v.length;g>f;f++)m=v[f],(m=Te[m.id])&&m.data!==n&&m.parent.removeViews(m._.key,n,!0);y._dfr=""}s.link(o,y,c,l,p,d)}}return i}function p(e,r,i,a,c,l){function d(e,t,n,r,i,o,a,s,l,u,d,f){var g="";return _=s||l||"",r=r||n||u||f,r&&(q&&(n||f)&&!xe[te]&&Ce("'<"+te+"... />' in:\n"+c),ce=se,te=Be.shift(),se=$e[te],ce&&(De+=ge,ge="",se?De+="-":(g=(u||"")+fe+"@"+De+de+(d||""),De=He.shift()))),se?(o?ge+=o:t=u||f||"",_&&(t+=_,ge&&(t+=" "+re+'="'+ge+'"',ge=""))):t=o?t+g+i+fe+o+de+a+_:g||e,_&&(Be.unshift(te),te=_.slice(1),Be[0]===Ie[te]&&ye('"'+te+'" has incorrect parent tag'),(se=$e[te])&&!ce&&(He.unshift(De),De=""),ce=se,De&&se&&(De+="+")),t}function f(e,t){var i,a,c,l,d,f,g,p=[];if(e){for(L=e.length,"@"===e.tokens.charAt(0)&&(t=P.previousSibling,P.parentNode.removeChild(P),P=null),L=e.length;L--;){if(E=e[L],c=E.ch,i=E.path)for(x=i.length-1;a=i.charAt(x--);)"+"===a?"-"===i.charAt(x)?(x--,t=t.previousSibling):t=t.parentNode:t=t.lastChild;"^"===c?(_=Pe[d=E.id])&&(g=t&&(!P||P.parentNode!==t),P&&!g||(_.parentElem=t),E.elCnt&&g&&(E.open?t&&(t._dfr="#"+d+c+(t._dfr||"")):t._dfr="/"+d+c+(t._dfr||"")),p.push([g?null:P,E])):(M=Te[d=E.id])&&(M.link||(M.parentElem=t||P&&P.parentNode||r,J(M,B),M._.onRender=u,M._.onArrayChange=o,s(M)),l=M.parentElem,E.open?(M._elCnt=E.elCnt,t?t._dfr="#"+d+c+(t._dfr||""):(M._prv||(l._dfr=m(l._dfr,"#"+d+c)),M._prv=P)):(!t||P&&P.parentNode===t?P&&(M._nxt||(l._dfr=m(l._dfr,"/"+d+c)),M._nxt=P):(t._dfr="/"+d+c+(t._dfr||""),M._nxt=n),v=M.linkCtx,(f=je||M.ctx&&M.ctx.onAfterCreate)&&f.call(v,M)))}for(L=p.length;L--;)Fe.push(p[L])}return!e||e.elCnt}function g(e){var t,n;if(L=e&&e.length)for(x=0;L>x;x++)if(E=e[x],V.id)V.id=V.id!==E.id&&V.id;else if(n=_=Pe[E.id].linkCtx.tag,!_.flow){if(!O){for(t=1;n=n.parent;)t++;Q=Q||t}!O&&t!==Q||U&&_.tagName!==U||W.push(_)}}function p(){if(me){if("resolved"===me.state())return;Me.shift()}for(T=Se?r.querySelectorAll(pe):t(pe,r).get(),S=T.length,i&&(N=Se?i.querySelectorAll(pe):t(pe,i).get(),i=N.length?N[N.length-1]:i),Q=0,y=0;S>y;y++)if(P=T[y],i&&!ve)ve=P===i;else{if(a&&P===a)break;P.parentNode&&We(C(P,n,W&&Re))&&P.getAttribute(ie)&&Fe.push([P])}if(b(i,se),b(a,se),V)return void(me&&me.resolve());for(se&&De+ge&&(P=a,De&&(a?f(C(De+"+",!0),a):f(C(De,!0),r)),f(C(ge,!0),r),a&&(ae=a.getAttribute(re),(S=ae.indexOf(he)+1)&&(ae=ae.slice(S+he.length-1)),a.setAttribute(re,ge+ae))),S=Fe.length,y=0;S>y;y++)P=Fe[y],A=P[1],P=P[0],A?(_=Pe[A.id],_=_.linkCtx?_.linkCtx.tag:_,A.open?(P&&(_.parentElem=P.parentNode,_._prv=P),_._elCnt=A.elCnt,!_||_.onBeforeLink&&_.onBeforeLink()===!1||_._.bound||(_._.bound=!0,M=_.tagCtx.view,h(n,_._prv,M,M.data||e,A.id)),_._.linking=!0):(_._nxt=P,_._.linking&&(M=_.tagCtx.view,_.contents=$,_.nodes=I,_.childTags=k,delete _._.linking,_&&_.onAfterLink&&_.onAfterLink(),_._.bound||(_._.bound=!0,h(n,_._prv,M,M.data||e,A.id))))):(M=H(P),h(P.getAttribute(ie),P,M,M.data||e));me&&(me.resolve(),G.onAfterLazyLink.fire(Me.length))}var v,_,y,S,x,L,T,P,M,E,A,N,D,F,R,j,W,O,U,Q,V,X,Y,Z,ee,te,ne,oe,ae,se,ce,le,ge,he,ve,me,_e,Le=K.noDomLevel0,Ee=this,Ae=Ee._.id+"_",De="",Fe=[],Be=[],He=[],je=Ee.hlp(ue),We=f;if(l&&(me=l.lazyLink&&t.Deferred(),l.tmpl?F="/"+l._.id+"_":(V=l.get,l.tag&&(Ae=l.tag+"^",l=!0)),l=l===!0),V&&(We=g,W=V.tags,O=V.deep,U=V.name),r=r?"string"==typeof r?t(r)[0]:r.jquery?r[0]:r:Ee.parentElem||z.body,te=r.tagName.toLowerCase(),se=!!$e[te],i=i&&w(i,se),a=a&&w(a,se)||null,c!==n){if(oe=z.createElement("div"),ne=oe,he=ge="",le="http://www.w3.org/2000/svg"===r.namespaceURI?"svg":(ee=be.exec(c))&&ee[1]||"",Le&&ee&&ee[2]&&ye("Unsupported: "+ee[2]),se){for(j=a;j&&!(R=C(j));)j=j.nextSibling;(ae=R?R.tokens:r._dfr)&&(D=F||"",!l&&F||(D+="#"+Ae),x=ae.indexOf(D),x+1&&(x+=D.length,he=ge=ae.slice(0,x),ae=ae.slice(x),R?j.setAttribute(re,ae):r._dfr=ae))}for(c=(""+c).replace(Ne,d),we.appendChild(oe),le=ke[le]||ke.div,X=le[0],ne.innerHTML=le[1]+c+le[2];X--;)ne=ne.lastChild;for(we.removeChild(oe),Y=z.createDocumentFragment();Z=ne.firstChild;)Y.appendChild(Z);G.onBeforeInsert.fire(Y),r.insertBefore(Y,a)}return me?(_e=setTimeout(p,0),Me.push({id:_e,fn:p}),G.onBeforeLazyLink.fire()):p(),me&&me.promise()}function h(e,t,r,i,o){var a,s,c,l,u,d,f,g,p,h,m;if(o)h=Pe[o],h=h.linkCtx?h.linkCtx.tag:h,p=h.linkCtx||{data:i,elem:h._elCnt?h.parentElem:t,view:r,attr:"html",fn:h._.bnd,tag:h,_bndId:o},v(p,p.fn);else if(e&&t)for(a=r.tmpl,e=S(e,t),j.lastIndex=0;s=j.exec(e);)m=j.lastIndex,c=o?"html":s[1],f=s[3],u=s[10],l=n,p={data:i,elem:h&&h._elCnt?h.parentElem:t,view:r,attr:c,_initVal:!s[2]},s[6]&&(!c&&(l=/:([\w$]*)$/.exec(u))&&(l=l[1],l!==n&&(d=-l.length-1,f=f.slice(0,d-1)+U,u=u.slice(0,d))),null===l&&(l=n),p.cvt=s[5]||""),p.expr=c+f,g=a.links[f],g||(a.links[f]=g=G.tmplFn(W+f+Q,a,!0,l),G.parse(u,g.paths=[],a)),p.fn=g,c||l===n||(p._cvtBk=l),v(p,g),j.lastIndex=m}function v(e,t){function n(n,r){i.call(e,n,r,t)}e._ctxCb=A(e.view),e._hdlr=n,e.tag&&e.tag.onArrayChange&&(n.array=function(t,n){e.tag.onArrayChange(t,n)}),n(!0)}function m(e,t){var n;return e?(n=e.indexOf(t),n+1?e.slice(0,n)+e.slice(n+t.length):e):""}function _(e){return e&&("string"==typeof e?e:"SCRIPT"===e.tagName?e.type.slice(3):1===e.nodeType&&e.getAttribute(re)||"")}function y(e,t,n,r,i,o){We.push({elCnt:je,id:r,ch:i,open:t,close:n,path:o,token:e})}function C(e,t,r){var i;return je=n,We=[],(i=t?e:_(e))?(We.elCnt=!e.type,je="@"===i.charAt(0)||We.elCnt,We.tokens=i,i.replace(r||He,y),We):void 0}function b(e,t){e&&("jsv"===e.type?e.parentNode.removeChild(e):t&&""===e.getAttribute(ie)&&e.removeAttribute(ie))}function w(e,t){for(var n=e;t&&n&&1!==n.nodeType;)n=n.previousSibling;return n&&(1!==n.nodeType?(n=z.createElement("SCRIPT"),n.type="jsv",e.parentNode.insertBefore(n,e)):_(n)||n.getAttribute(ie)||n.setAttribute(ie,"")),n}function S(e,n){return e=t.trim(e),e.slice(-1)!==U?e=O+":"+e+(c(n)?":":"")+U:e}function $(e,n){var r,i=t(this.nodes());return i[0]&&(r=e?i.filter(e):i,i=n&&e?r.add(i.find(e)):r),i}function I(e,t,n){var r,i=this,o=i._elCnt,a=!t&&o,s=[];for(t=t||i._prv,n=n||i._nxt,r=a?t===i._nxt?i.parentElem.lastSibling:t:i._.inline===!1?t||i.linkCtx.elem.firstChild:t&&t.nextSibling;r&&(!n||r!==n);)(e||o||!_(r))&&s.push(r),r=r.nextSibling;return s}function k(e,t){e!==!!e&&(t=e,e=n);var r=this,i=r.link?r:r.tagCtx.view,o=r._prv,a=r._elCnt,s=[];return o&&i.link(n,r.parentElem,a?o.previousSibling:o,r._nxt,n,{get:{tags:s,deep:e,name:t,id:a&&r._tgId}}),s}function x(e){var r,i,o,a=this,s=a.parentElem,c=a.tagCtx.view,l=a._prv,d=a._nxt,f=a._elCnt,g=a._.inline,p=a.tagCtx.props;return a.disposed&&ye("Removed tag"),e===n&&(e=a._.bnd.call(c.tmpl,c.data,c,X),g&&(e=X._tag(a,c,c.tmpl,e))),(a.flow||a.render||a.template)&&(g?(i=a.nodes(!0),f&&(l&&l!==d&&D(l,d,s,a._tgId,"^",!0),l=l?l.previousSibling:d?d.previousSibling:s.lastChild),t(i).remove()):(!a.flow&&p.inline&&(c._.tag=a,e=u(e,c,!0),c._.tag=n,r=a._.inline=!0),t(s).empty())),!r&&a.onBeforeLink&&a.onBeforeLink(),o=c.link(c.data,s,l,d,e,a&&{tag:a._tgId,lazyLink:p.lazyLink}),!r&&a.onAfterLink&&(o?o.then(function(){a.onAfterLink()}):a.onAfterLink()),o||a}function L(){for(var e;e=Me[0];)clearTimeout(e.id),e.fn()}function T(e){var t,r,i,o,a,s,c,l=[],u=e.length,d=u;for(L();d--;)l.push(e[d]);for(d=u;d--;)if(o=l[d],o.parentNode){if(c=o._jsvBnd)for(c=c.slice(1).split("&"),o._jsvBnd="",r=c.length;r--;)P(c[r],!0);var f=o&&("string"==typeof o?o:"SCRIPT"===o.tagName?o.type.slice(3):1===o.nodeType&&o.getAttribute(re)||"");if(a=C(f+(o._dfr||""),!0,Fe))for(t=0,i=a.length;i>t;t++)s=a[t],"_"===s.ch?(s=Te[s.id])&&s.data!==n&&s.parent.removeViews(s._.key,n,!0):P(s.id,!0)}}function P(e,n){var r,i,o,a,s,c=Pe[e];if(c){for(r in c.bnd)a=c.bnd[r],s=".obs"+c.cbId,t.isArray(a)?(t.observable.off([a],ae,s),t.observable.off([a],oe,s)):t.observable.off(a,oe,s),delete c.bnd[r];i=c.linkCtx,(o=i.tag)&&(o.onDispose&&o.onDispose(),n||o._elCnt||(o._prv.parentNode.removeChild(o._prv),o._nxt.parentNode.removeChild(o._nxt)),o.disposed=!0),delete i.view._.bnds[e],delete Pe[e],delete G._cbBnds[c.cbId]}}function M(e,i){return arguments.length?i&&(i=i.jquery?i:t(i),e===!0?t.each(i,function(){for(var e;(e=H(this,!0))&&e.parent;)e.parent.removeViews(e._.key,n,!0);T(this.getElementsByTagName("*"))}):e===n&&T(i)):(R&&(t(R).off(se,r),R=n),e=!0,Y.removeViews(),T(z.body.getElementsByTagName("*"))),i}function E(e,t){return M(this,e,t)}function A(e){return e=e||t.view(),function(t,n){var r,i,o=[n];if(e&&t){if(t._jsvOb)return t._jsvOb.call(e.tmpl,n,e,X);if("~"===t.charAt(0))return"~tag"===t.slice(0,4)&&(i=e.ctx,"."===t.charAt(4)&&(r=t.slice(5).split("."),i=i.tag),r)?i?[i,r.join("."),n]:[]:(t=t.slice(1).split("."),(n=e.hlp(t.shift()))&&(t.length&&o.unshift(t.join(".")),o.unshift(n)),n?o:[]);if("#"===t.charAt(0))return"#data"===t?[]:[e,t.replace(Ae,""),n]}}}function N(e){return"checkbox"===e.type?e.checked:e.value}function D(e,t,n,r,i,o){var a,s,c,l,u,d,f,g=0,p=e===t;if(e){for(c=C(e)||[],a=0,s=c.length;s>a;a++){if(l=c[a],d=l.id,d===r&&l.ch===i){if(!o)break;s=0}if(!p){var h="_"===l.ch?Te[d]:Pe[d];h&&(u="_"===l.ch?h:h.linkCtx.tag,l.open?u._prv=t:l.close&&(u._nxt=t))}g+=d.length+2}g&&e.setAttribute(re,e.getAttribute(re).slice(g)),f=t?t.getAttribute(re):n._dfr,(s=f.indexOf("/"+r+i)+1)&&(f=c.tokens.slice(0,g)+f.slice(s+(o?-1:r.length+1))),f&&(t?t.setAttribute(re,f):n._dfr=f)}else n._dfr=m(n._dfr,"#"+r+i),o||t||(n._dfr=m(n._dfr,"/"+r+i))}var F=t;if(!t)throw"requires jQuery";if(!t.views)throw"requires JsRender";if(!t.observable)throw"requires jquery.observable";if(!t.link){var B,R,H,j,W,O,U,Q,V,q,z=e.document,X=t.views,G=X.sub,K=X.settings,J=G.extend,Y=G.View(n,"top"),Z=function(e){return"function"==typeof e},ee=X.templates,te=t.observable,ne=te.observe,re="data-jsv",ie=K.linkAttr||"data-link",oe=(t.event.special,K.propChng=K.propChng||"propertyChange"),ae=G.arrChng=G.arrChng||"arrayChange",se=(G._cbBnds=G._cbBnds||{},"change.jsv"),ce="onBeforeChange",le="onAfterChange",ue="onAfterCreate",de='"></script>',fe='<script type="jsv',ge="script,["+re+"]",pe=ge+",["+ie+"]",he={value:"val",input:"val",html:"html",text:"text"},ve={from:{fromAttr:"value"},to:{toAttr:"value"}},me=t.cleanData,_e=K.delimiters,ye=G.error,Ce=G.syntaxError,be=/<(?!script)(\w+)(?:[^>]*(on\w+)\s*=)?[^>]*>/,we=z.createDocumentFragment(),Se=z.querySelector,$e={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1},Ie={tr:"table"},ke=K.wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],svg:[1,"<svg>","</svg>"],div:[1,"x<div>","</div>"]},xe={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},Le={},Te={0:Y},Pe={},Me=[],Ee=1,Ae=/^#(view\.?)?/,Ne=/(^|(\/>)|(<\/\w+>)|>|)(\s*)([#\/]\d+[_^])`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|(<\/\w+>)(\s*)|(\/>)\s*)/g,De=/(#)()(\d+)(_)/g,Fe=/(#)()(\d+)([_^])/g,Be=/(?:(#)|(\/))(\d+)(_)/g,Re=/(#)()(\d+)(\^)/g,He=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g;ke.optgroup=ke.option,ke.tbody=ke.tfoot=ke.colgroup=ke.caption=ke.thead,ke.th=ke.td,G.onBeforeInsert=F.simpleCallbacks(),G.onBeforeLazyLink=F.simpleCallbacks(),G.onAfterLazyLink=F.simpleCallbacks();var je,We;t.observable.onObservableTrigger.add(L),G.onStoreItem=function(e,n,r){r&&e===ee&&(r.link=f,r.unlink=E,n&&(t.link[n]=function(){return f.apply(r,arguments)},t.unlink[n]=function(){return E.apply(r,arguments)}))},(K.delimiters=function(){var e=_e.apply(X,arguments);return W=e[0],O=e[1],U=e[2],Q=e[3],V=e[4],j=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+V+")?(\\"+O+G.rTag+"\\"+U+")","g"),this})(),G.viewInfos=C,B={addViews:function(e,t,n){var r,i,o=this,a=t.length,s=o.views;if(!o._.useKey&&a&&(n=o.tmpl)&&(i=s.length+a,l(o,e,n,s,t,o.ctx)!==!1))for(r=e+a;i>r;r++)te(s[r]).setProperty("index",r);return o},removeViews:function(e,r,i){function o(e){var r,o,a,c,l,u,d=f[e];if(d&&d.link){r=d._.id,i||(u=d.nodes()),d.removeViews(n,n,!0),d.data=n,c=d._prv,l=d._nxt,a=d.parentElem,i||(d._elCnt&&D(c,l,a,r,"_"),t(u).remove(),d._elCnt||(c.parentNode&&a.removeChild(c),l.parentNode&&a.removeChild(l))),s(d);for(o in d._.bnds)P(o,i);delete Te[r]}}var a,c,l,u=this,d=!u._.useKey,f=u.views;if(d&&(l=f.length),e===n)if(d){for(a=l;a--;)o(a);u.views=[]}else{for(c in f)o(c);u.views={}}else if(r===n&&(d?r=1:(o(e),delete f[e])),d&&r){for(a=e+r;a-- >e;)o(a);if(f.splice(e,r),l=f.length)for(;l>e;)te(f[e]).setProperty("index",e++)}return this},refresh:function(e){var t=this,n=t.parent;return n&&(l(t,t.index,t.tmpl,n.views,t.data,e,!0),s(t)),t},nodes:I,contents:$,childTags:k,link:p},K.merge={input:{from:{fromAttr:N},to:{toAttr:"value"}},textarea:ve,select:ve,optgroup:{from:{fromAttr:"label"},to:{toAttr:"label"}}},K.debugMode&&(q=!K.noValidate,e._jsv={views:Te,bindings:Pe}),J(t,{view:X.view=H=function(e,r,i){r!==!!r&&(i=r,r=n);var o,a,s,c,l,u,d,f,g=0,p=z.body;if(e&&e!==p&&Y._.useKey>1&&(e="string"==typeof e?t(e)[0]:e.jquery?e[0]:e))if(r){for(f=Se?e.querySelectorAll(ge):t(ge,e).get(),u=f.length,s=0;u>s;s++)for(d=f[s],a=C(d,n,De),c=0,l=a.length;l>c;c++)if(o=a[c],(o=Te[o.id])&&(o=o&&i?o.get(!0,i):o))return o}else for(;e;){if(a=C(e,n,Be))for(u=a.length;u--;)if(o=a[u],o.open){if(1>g)return o=Te[o.id],o&&i?o.get(i):o||Y;g--}else g++;e=e.previousSibling||e.parentNode}return r?n:Y},link:X.link=g,unlink:X.unlink=M,cleanData:function(e){e.length&&(T(e),me.call(t,e))}}),J(t.fn,{link:function(e,t,n,r,i,o,a){return g(e,this,t,n,r,i,o,a)},unlink:function(e){return M(e,this)},view:function(e){return H(this[0],e)}}),J(Y,{tmpl:{links:{},tags:{}}}),J(Y,B),Y._.onRender=u}}(this,window.originaljQuery||window.jQuery)}),define("searchshared",["wliveloaded"],function(){!function(){function e(e,t,n){var r=this;r.key=e,r.weight=t,r.order=n}function t(){function e(e,t,n){var r,c=[t].concat(t.split(" ")),l=new Array(e.length+2),u="(^|\\s"+(n?"|@":"")+(n?"":"|["+s.escapeRegex()+"]")+")";for(r=0;r<l.length;r++)l[r]=0;var d=$B&&$B.IE&&$B.V<=8;for(r=0;r<c.length;r++)for(var f=c[r],g=o.accent.fold(d?e:o.japanese.map(e)).replace(new RegExp(u+"("+o.accent.fold(d?f:o.japanese.map(f)).escapeRegex()+")","ig"),"$1"+i+"$2"+a),p=0,h=0,v=0;-1!=(p=g.indexOf(i,h));){h=g.indexOf(a,h+1),v+=2;for(var m=p-v+2;h-v+1>m;m++)l[m+1]=1}var _=[];for(r=1;r<l.length;r++)l[r]!=l[r-1]&&_.push(r-1);var y=0;for(r=0;r<_.length;r++)y=_[r]+r,e=e.substr(0,y)+(r%2?a:i)+e.substr(y);return e}var t=this,n='<strong class="CL_Matched_Text t_elnk">',r="</strong>",i="",a="",s=" !\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",c=new RegExp("["+s.escapeRegex()+"]","ig");t.accent=new function(){var e=this,t={a:/[\xE0-\xE4]/gi,e:/[\xE8-\xEB]/gi,i:/[\xED-\xEF]/gi,o:/[\xF3-\xF5]/gi,u:/[\xF9-\xFC]/gi,n:/\xF1/gi,y:/\xFF/gi,c:/\xE7/gi,s:/[\u015A-\u0161]/gi},n=/[\xE0-\xE4\xE8-\xEB\xED-\xEF\xF3-\xF5\xF9-\xFC\xF1\xFF\xE7\u015A-\u0161]/gi;e.fold=function(e){if(e.search(n)>=0){e=e.toLowerCase();for(var r in t)e=e.replace(t[r],r)}return e}},t.getSuffixStringsFor=function(e){var t=[],n=null,r=null;if(e)for(t.push(n=e.lTrim());-1!=(r=n.search(c));)t.push(n=n.substring(r+1).lTrim());return t},t.isHighlighted=function(e){return e&&e.indexOf(n)-1},t.makeBold=function(t,s,c){var l=$B&&$B.IE&&$B.V<=8,u=!l&&o.korean.match(t)?o.korean.highlight(t,s):e(t,s,c);return u.encodeHtml().replace(new RegExp(i.encodeHtml(),"g"),n).replace(new RegExp(a.encodeHtml(),"g"),r)},t.japanese=new function(){function e(){var e=["(["];for(var t in r)e.push(t);return e.push("])"),new RegExp(e.join(""),"g")}function t(){for(var e=["(["],t=0,n=o.length;n>t;t++)e.push(o[t]);return e.push("])"),new RegExp(e.join(""),"g")}var n=this,r={"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"a","":"b","":"c","":"d","":"e","":"f","":"g","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"q","":"r","":"s","":"t","":"u","":"v","":"w","":"x","":"y","":"z","":"A","":"B","":"C","":"D","":"E","":"F","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"Q","":"R","":"S","":"T","":"U","":"V","":"W","":"X","":"Y","":"Z"},i={0:{val:"",regex:/^[\u304B]{1}[\u309B]{1}$/gi},1:{val:"",regex:/^[\u304D]{1}[\u309B]{1}$/gi},2:{val:"",regex:/^[\u304F]{1}[\u309B]{1}$/gi},3:{val:"",regex:/^[\u3051]{1}[\u309B]{1}$/gi},4:{val:"",regex:/^[\u3053]{1}[\u309B]{1}$/gi},5:{val:"",regex:/^[\u3055]{1}[\u309B]{1}$/gi},6:{val:"",regex:/^[\u3057]{1}[\u309B]{1}$/gi},7:{val:"",regex:/^[\u3059]{1}[\u309B]{1}$/gi},8:{val:"",regex:/^[\u305B]{1}[\u309B]{1}$/gi},9:{val:"",regex:/^[\u305D]{1}[\u309B]{1}$/gi},10:{val:"",regex:/^[\u305F]{1}[\u309B]{1}$/gi},11:{val:"",regex:/^[\u3061]{1}[\u309B]{1}$/gi},12:{val:"",regex:/^[\u3064]{1}[\u309B]{1}$/gi},13:{val:"",regex:/^[\u3066]{1}[\u309B]{1}$/gi},14:{val:"",regex:/^[\u3068]{1}[\u309B]{1}$/gi},15:{val:"",regex:/^[\u306F]{1}[\u309B]{1}$/gi},16:{val:"",regex:/^[\u3072]{1}[\u309B]{1}$/gi},17:{val:"",regex:/^[\u3075]{1}[\u309B]{1}$/gi},18:{val:"",regex:/^[\u3078]{1}[\u309B]{1}$/gi},19:{val:"",regex:/^[\u307B]{1}[\u309B]{1}$/gi},20:{val:"",regex:/^[\u306F]{1}[\u309C]{1}$/gi},21:{val:"",regex:/^[\u3072]{1}[\u309C]{1}$/gi},22:{val:"",regex:/^[\u3075]{1}[\u309C]{1}$/gi},23:{val:"",regex:/^[\u3078]{1}[\u309C]{1}$/gi},24:{val:"",regex:/^[\u307B]{1}[\u309C]{1}$/gi},25:{val:"",regex:/^[\u30AB]{1}[\u309C]{1}$/gi},26:{val:"",regex:/^[\u30AD]{1}[\u309C]{1}$/gi},27:{val:"",regex:/^[\u30AF]{1}[\u309C]{1}$/gi},28:{val:"",regex:/^[\u30B1]{1}[\u309C]{1}$/gi},29:{val:"",regex:/^[\u30B3]{1}[\u309C]{1}$/gi},30:{val:"",regex:/^[\u30B5]{1}[\u309C]{1}$/gi},31:{val:"",regex:/^[\u30B7]{1}[\u309C]{1}$/gi},32:{val:"",regex:/^[\u30B9]{1}[\u309C]{1}$/gi},33:{val:"",regex:/^[\u30BB]{1}[\u309C]{1}$/gi},34:{val:"",regex:/^[\u30BD]{1}[\u309C]{1}$/gi},35:{val:"",regex:/^[\u30BF]{1}[\u309C]{1}$/gi},36:{val:"",regex:/^[\u30C1]{1}[\u309C]{1}$/gi},37:{val:"",regex:/^[\u30C4]{1}[\u309C]{1}$/gi},38:{val:"",regex:/^[\u30C6]{1}[\u309C]{1}$/gi},39:{val:"",regex:/^[\u30C8]{1}[\u309C]{1}$/gi},40:{val:"",regex:/^[\u30CF]{1}[\u309B]{1}$/gi},41:{val:"",regex:/^[\u30D2]{1}[\u309B]{1}$/gi},42:{val:"",regex:/^[\u30D5]{1}[\u309B]{1}$/gi},43:{val:"",regex:/^[\u30D8]{1}[\u309B]{1}$/gi},44:{val:"",regex:/^[\u30DB]{1}[\u309B]{1}$/gi},45:{val:"",regex:/^[\u30CF]{1}[\u309C]{1}$/gi},50:{val:"",regex:/^[\uFF76]{1}[\uFF9E]{1}$/gi},51:{val:"",regex:/^[\uFF77]{1}[\uFF9E]{1}$/gi},52:{val:"",regex:/^[\uFF78]{1}[\uFF9E]{1}$/gi},53:{val:"",regex:/^[\uFF79]{1}[\uFF9E]{1}$/gi},54:{val:"",regex:/^[\uFF7A]{1}[\uFF9E]{1}$/gi},55:{val:"",regex:/^[\uFF7B]{1}[\uFF9E]{1}$/gi},56:{val:"",regex:/^[\uFF7C]{1}[\uFF9E]{1}$/gi},57:{val:"",regex:/^[\uFF7D]{1}[\uFF9E]{1}$/gi},58:{val:"",regex:/^[\uFF7E]{1}[\uFF9E]{1}$/gi},59:{val:"",regex:/^[\uFF7F]{1}[\uFF9E]{1}$/gi},60:{val:"",regex:/^[\uFF80]{1}[\uFF9E]{1}$/gi},61:{val:"",regex:/^[\uFF81]{1}[\uFF9E]{1}$/gi},62:{val:"",regex:/^[\uFF82]{1}[\uFF9E]{1}$/gi},63:{val:"",regex:/^[\uFF83]{1}[\uFF9E]{1}$/gi},64:{val:"",regex:/^[\uFF84]{1}[\uFF9E]{1}$/gi},65:{val:"",regex:/^[\uFF8A]{1}[\uFF9E]{1}$/gi},66:{val:"",regex:/^[\uFF8B]{1}[\uFF9E]{1}$/gi},67:{val:"",regex:/^[\uFF8C]{1}[\uFF9E]{1}$/gi},68:{val:"",regex:/^[\uFF8D]{1}[\uFF9E]{1}$/gi},69:{val:"",regex:/^[\uFF8E]{1}[\uFF9E]{1}$/gi},70:{val:"",regex:/^[\uFF8A]{1}[\uFF9F]{1}$/gi},71:{val:"",regex:/^[\uFF8B]{1}[\uFF9F]{1}$/gi},72:{val:"",regex:/^[\uFF8C]{1}[\uFF9F]{1}$/gi},73:{val:"",regex:/^[\uFF8D]{1}[\uFF9F]{1}$/gi},74:{val:"",regex:/^[\uFF8E]{1}[\uFF9F]{1}$/gi}},o=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],a=e(),s=t();n.map=function(e){if(e.search(s)>=0){e=e.replace(a,function(e,t){return r[e]});for(var t in i)e=e.replace(i[t].regex,i[t].val)}return e}},t.korean=new function(){function t(e){return String.fromCharCode(e)}function n(e){var t=["(["];for(var n in d)t.push(n);return t.push("])"),new RegExp(t.join(""),"g")}var r=this,i=new RegExp("([\\uAC00-\\uD7AF])","g"),o=44032,s=4352,c=4449,l=4519,u=a,d={"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},f=n(d),g=new RegExp("([\\u1100-\\u1112][\\u1161-\\u1175][\\u11A8-\\u11C2]{0,1})","g"),p=new RegExp("([\\u1100-\\u1112]"+u+"{0,1}[\\u1161-\\u1175]"+u+"{0,1}[\\u11A8-\\u11C2]{0,1})","g");r.expand=function(e){return e=e.replace(f,function(e,t){return d[e]}),e.replace(i,function(e,n){var r=e.charCodeAt(0)-o,i=Math.floor(r/588),a=Math.floor((r-588*i)/28),u=r%28;return t(i+s)+t(a+c)+(u?t(u+l):"")})},r.highlight=function(n,i){var o=e(r.expand(n),r.expand(i),0);return o.replace(p,function(e,t){return e.replace(u,"")+(e.match(u)?u:"")}).replace(g,function(e,n){var r=e.charCodeAt(0)-s,i=e.charCodeAt(1)-c,o=e.length>2?e.charCodeAt(2)-l:0;return t(588*r+28*i+o+44032)})},r.match=function(e){return e.match(i)}}}function n(e){function t(e){return function(t,n){for(var r=0,i=0;r<e.length&&!(i=e[r++](t,n)););return i}}function n(e,t){return m.compareParents(e.obj,t.obj)}function r(e,t){return e.bucket-t.bucket}function i(e,t){return _(e.obj,t.obj)}function a(e,t){return y(e.obj).length-y(t.obj).length}function s(e,t){return t.weight-e.weight}function c(e){for(var t,n=0;n<g.autoCompleteTokens.length;)t=l(g.autoCompleteTokens[n]),-1==e.indexOf(t)?g.autoCompleteTokens.splice(n,1):(e=e.replace(t,""),n++)}function l(e){return e}function u(e){return e=d(e),e.toLowerCase().trim().replace(v," ")}function d(e){for(var t=0;t<g.autoCompleteTokens.length;t++)e=e.replace(l(g.autoCompleteTokens[t]),"");return e}function f(e){var t=e;return $B&&$B.IE&&$B.V<=8||(t=o.korean.expand(o.japanese.map(e))),p.matchPrefix(o.accent.fold(t))}var g=this,p=null,h=[],v=/\s+/g,m=e,_=m.comparer,y=m.matchField;g.autoCompleteTokens=[],g.getMatches=function(e,o){c(e);var l,d=u(e),g=[],p=null,h=null;if(""==d)return{result:[],query:e};for(p=f(d),l=0;l<p.length;l++)h=p[l],g.push({obj:h.obj,weight:y(h.obj).toLowerCase()==d?h.weight+1.5:h.weight,bucket:0});var v=d.split(" ");if(v.length>1)for(l=0;l<v.length;l++){p=f(v[l]);for(var _=0;_<p.length;_++)h=p[_],g.push({obj:h.obj,weight:h.weight-.1*Math.abs(l+1-h.order),bucket:l+1})}var C=[];if(g.length){var b=m.compareParents?[n]:[];b.addRange([i,r]),g.sort(t(b));var w=null,S=null,$=null,I=null,k=v.length>1?v.length:0,x=function(e){
w=e,S=w.bucket,$=0==S?0:1},L=function(){(!I||m.isValid(I.obj,w.obj))&&$==k&&C.push(I=w)};for(x(g[0]),l=1;l<g.length;l++)h=g[l],i(w,h)?(L(),x(h)):(w.weight=w.weight+h.weight,S!=h.bucket&&(S=h.bucket,$++));L()}var T=m.finalSortFunction?m.finalSortFunction:a;C.sort(t([s,T])),C.length=Math.min(C.length,o);var P=new Array(C.length);for(l=0;l<C.length;l++)P[l]=C[l].obj;return{result:P,query:e}},g.normalizeTerm=function(e){return e=u(e),$B&&$B.IE&&$B.V<=8||(e=o.korean.expand(o.japanese.map(e))),e=o.accent.fold(e)},g.initialize=function(e,t,n){function r(){for(var l=Math.min(e.length,c+s),u=c;l>u;u++){var d=e[u],f=m.getKeysAndWeights(d);t&&(i=[]);for(var g=0;g<f.length;g++){var v=f[g],_=v.key.toLowerCase().trim();a||(_=o.korean.expand(o.japanese.map(_)));var y=p.insert(o.accent.fold(_),{obj:e[u],weight:v.weight,order:v.order});t&&i.push(y)}t&&(h[m.getUniqueKey(d)]=i)}l<e.length?(c=l,setTimeout(r,a?0:100)):(p.sort(),n&&n())}p=p||new $Trie;var i=null,a=$B&&$B.IE&&$B.V<=8,s=n?100:e.length,c=0;r()},g.remove=function(e){p=p||new $Trie;for(var t=0,n=e.length;n>t;t++){var r=e[t],i=h[r];if(i){for(var o=0,a=i.length;a>o;o++)p.remove(i[o]);delete h[r]}}}}var r=window,i=r.wLive;i.Search=i.Search||{},i.Search.RankSearchKeyWeight=e;var o=i.Search.Helpers=new t;i.Search.Indexer=n,$Do.register("wlxsearchshared")}()}),define("namespaces",["wliveloaded","searchshared"],function(){!function(){var e=window.wLive,t=e.ContactList=e.ContactList||{};t.Controls=t.Controls||{},t.Core=t.Core||{}}()}),define("alphabethelper",["namespaces"],function(){!function(){function e(e){function n(){if(f){var e=f.alphabet;if(e&&e.length>0){d||(u.push(i),l[i]=-1);for(var t=0;t<a.length;t++)for(var n=a[t],o=n[0];o<=n[1];o++)l[String.fromCharCode(o)]=-1;for(var c=0,g=0,p=e.length;p>g;g++){var h=e[g];u.push(h),l[h]=++c}d?(u.push(i),l[i]=++c):u.push(r),l[r]=++c,s=c}}}var s,c=this,l=[],u=[],d=e,f=t.$Config.ContactListV2;c.getAlphabetLetter=function(e){var t;return e?(t=e.substring(0,1).toUpperCase(),l[t]?(t>=" "&&"@">=t||t>="["&&"`">=t||t>="{"&&"~">=t)&&(t=i):t=r):t=r,t},c.compareString=function(e,t,n){var r=l[c.getAlphabetLetter(e)]||s,i=l[c.getAlphabetLetter(t)]||s;return r>i?n?-1:1:i>r?n?1:-1:(e||"").localeCompare(t||"")},c.getAlphabet=function(){return u},c.getDigitsLetter=function(){return i},c.getNonAlphabetLetter=function(){return r},c.getFavoritesLetter=function(){return o},c.supportsAlphabet=function(){return u&&u.length>0},c.getLetterTitleAttr=function(e){return e!=r?e.encodeHtml():""},c.getLetterHtml=function(e){return e!==r?e.encodeHtml():'<span class="GlobeIcon cl_ImgStrip">&nbsp;</span>'},n()}var t=window,n=t.wLive,r="@",i="#",o="*",a=[[32,64],[91,96],[123,126]];n.ContactList.Core.AlphabetHelper=e}()}),define("factory",["alphabethelper"],function(){!function(e){function t(e){var t=this;t._settings=e}function n(e){this._settings=e}function r(e){var t=this;t._settings=e}function i(e){var t=this;t._settings=e}var o=window,a=e,s=o.wLive=o.wLive||{},c=s.ContactList=s.ContactList||{},l=c.ViewModels=s.ContactList.ViewModels||{},u=(c.Controls=s.ContactList.Controls||{},l.SearchablePropertyTypes={name:0,otherName:1,company:2,email:3});l.SearchableProperties=[{properties:["firstName","lastName"],type:u.name,prefixRank:[1.5,1]},{properties:["displayName","name","nickName","sortName","yomiFirstName","yomiLastName"],type:u.otherName,prefixRank:[1,.75]},{properties:["company","yomiCompanyName"],type:u.company,prefixRank:[1,.75]},{properties:["email"],type:u.email,prefixRank:[1,.75]}];var d,f=l.ContactType=new $Flags("Person",0,"Category",1,"Group",2,"PicwEmail",3),g=l.DisplayNameType=new $Flags("Nickname",0,"Email",1,"Phone",2),p="DisplayNameType";$Do.when("$pwc",0,function(){d=o.$pwc}),l.PersonFactory=t,t.prototype={createContacts:function(e){return this._getEmailContactsFromPerson(e)},_getEmailContactsFromPerson:function(e){for(var t=this._createCommonModelFromPerson(e),n=e.getContactEmails(),r=n.length,i=[],o=0;r>o;o++)i.push(this._createContactFromCommonModel(t,n[o]));return 0===r&&this._settings.includePeopleWithoutEmails&&i.push(this._createContactFromCommonModel(t,"")),i},_createCommonModelFromPerson:function(e){function t(e){for(var t=[e.mobile,e.home,e.home2,e.work,e.work2],n=null,r=0,i=t.length;i>r&&!(n=t[r]);r++);return n}var n={Id:e.getId(),Cid:e.getCid(),HexCid:e.getHexCid(),Name:e.getFullName(),Company:e.getCompanyName(),NickName:e.getNickname(),Phone:t(e.getPhones()),UserTile:e.getUserTile(),IsFavorite:e.getIsFavorite(),CategoryIds:e.getCategoryIds(),PwcObject:e};return n},_setDisplayAndSortNameWithFallback:function(e){var t,n,r,i=this._settings,o=e.PwcObject;if(t=e.Name){var a=d.names,s=o.getNameType(),c=o.isLastNameFirst(),l=!c&&i.sortOrder,u=!c&&i.displayOrder,f=o.getFirstName(),h=o.getLastName(),v=o.getYomiFirstName(),m=o.getYomiLastName(),_=!(!v&&!m),y=_?v:f,C=_?m:h;r=a.formatName(s,l?"sortNameReverse":"sortName",null,y,null,C,null),n=a.formatName(s,u?"displayNameReverse":"displayName",null,f,null,h,null),e.ReverseName=u}else(t=e.NickName)?e[p]=g.Nickname:(t=e.Company)?r=o.getYomiCompanyName():(t=e.Email)?e[p]=g.Email:(t=e.Phone)&&(e[p]=g.Phone);n=n||t,e.ListDisplayName=n,e.DisplayName=t,e.SortName=r?r.toLowerCase():n?n.toLowerCase():""},_createContactFromCommonModel:function(e,t){var n=a.extend({},e,{Email:t,Type:f.Person});return this._setDisplayAndSortNameWithFallback(n),new s.ContactList.ViewModels.Contact(n)}},l.DirectMessageFactory=n,n.prototype=a.extend({},t.prototype,{createContacts:function(e){return this._getEmailContactsFromPerson(e).concat(this._getFacebookContactsFromPerson(e))},_getFacebookContactsFromPerson:function(e){for(var t=this._createCommonModelFromPerson(e),n=e.getContacts(),r=[],i=0;i<n.length;i++)"FB"===n[i].getSourceId()&&(t.Id=n[i].getObjectId(),t.SourceId=n[i].getSourceId(),r.push(this._createContactFromCommonModel(t,GetString("live.shared.skydrive.pc.Sharing.FacebookContactEmail"))));return r}}),l.GroupFactory=r,r.prototype={createContacts:function(e){return[new s.ContactList.ViewModels.Contact(this._createModel(e))]},_createModel:function(e){var t=e.getName();return{Id:e.getId(),Cid:e.getCid(),HexCid:e.getHexCid(),Type:f.Group,DisplayName:t,ListDisplayName:t,SortName:t,PwcObject:e}}},l.CategoryFactory=i,i.prototype={createContacts:function(e){return[new s.ContactList.ViewModels.Contact(this._createModel(e))]},_createModel:function(e){var t=e.getName();return{Id:e.getId(),Type:f.Category,IsFavoriteCategory:e.getIsFavorite(),DisplayName:t,ListDisplayName:t,SortName:t,PwcObject:e}}}}(window.originaljQuery||jQuery)}),define("contact",["factory"],function(){!function(e){function t(n){function r(){void 0===a.model.PicwOrder&&(a.model.PicwOrder=s)}function i(t,n){return void 0===n?n=a.model[t]:e.observable(a.model).setProperty(t,n),n}function o(e){var t=a.pwcObject();return t&&t[e]?t[e]():null}var a=this;a.model=n,a.$model=e(a.model),a.type=function(){return i("Type")},a.isInPicw=function(){return a.picwOrder()<s},a.clientId=function(){return a.email()+":"+a.id()+":"+a.type()},a.id=function(){return i("Id")},a.cid=function(){return i("Cid")},a.hexCid=function(){return i("HexCid")},a.displayName=function(){return i("DisplayName")},a.listDisplayName=function(){return i("ListDisplayName")},a.name=function(){return i("Name")},a.company=function(){return i("Company")},a.yomiCompanyName=function(){return o("getYomiCompanyName")},a.nickName=function(){return i("NickName")},a.sortName=function(){return i("SortName")},a.firstName=function(){return o("getFirstName")},a.lastName=function(){return o("getLastName")},a.nameType=function(){return o("getNameType")},a.reverseName=function(){return!!i("ReverseName")},a.yomiFirstName=function(){return o("getYomiFirstName")},a.yomiLastName=function(){return o("getYomiLastName")},a.picwOrder=function(e){return i("PicwOrder",e)},a.email=function(){return i("Email")},a.sourceId=function(){return i("SourceId")},a.userTile=function(e){return i("UserTile",e)},a.isFavorite=function(){return i("IsFavorite")},a.isFavoriteCategory=function(){return i("IsFavoriteCategory")},a.categoryIds=function(){return i("CategoryIds")||[]},a.isSelected=function(e){return i("IsSelected",e)},a.pwcObject=function(){return i("PwcObject")},a.bindPropertyChange=function(e){a.$model.bind("propertyChange",e)},a.unbindPropertyChange=function(e){a.$model.unbind("propertyChange",e)},a.equals=function(e){return e instanceof t&&e.id()===a.id()},a.dispose=function(){a.$model.unbind()},r()}function n(){function e(e){return e.displayName()}function t(e){return i.Search.Helpers.getSuffixStringsFor(e)}function n(e,n,r,i){for(var o=t(n),a=r.length-1,s=0,c=o.length;c>s;s++)e.push(new u(o[s],r[Math.min(s,a)],i)),i++;return i}function r(e,t,n,r){e.push(new u(t,n||.75,1));var i="",o=t.split("@");o.length>0&&(i=o[o.length-1]),i&&e.push(new u(i,r||.5,1))}var o=this;o.matchField=function(e){return e.displayName()},o.getKeysAndWeights=function(e){for(var t=[],i=1,o=s-e.picwOrder()+100,a=0,u=l.length;u>a;a++){for(var d=l[a],f=(d.names||[],d.properties||[]),g=d.type,p=d.prefixRank,h=[o-(5-p[0]),o-(5-p[1])],v=[],m=0,_=f.length;_>m;m++)v.push(e[f[m]]());for(var y=0,C=v.length;C>y;y++){var b=v[y];b&&(g===c.email?r(t,b,h[0],h[1]):i=n(t,b,h,i))}}return t},o.autoComplete=function(t){return e(t)},o.isValid=function(e,t){return!0},o.compareParents=null,o.comparer=function(e,t){var n=e.clientId(),r=t.clientId(),i=0;return n>r?i=1:r>n&&(i=-1),i}}var r=window,i=r.wLive,o=i.ContactList,a=o.ViewModels,s=1e6,c=a.SearchablePropertyTypes,l=a.SearchableProperties,u=(a.ContactTypeToSchemaMap,i.Search.RankSearchKeyWeight);a.Contact=t,a.ContactsHelper=n}(window.originaljQuery||jQuery)}),define("flatcontactsdatamodel",["contact"],function(){!function(e){function t(t){function i(){if(T){var e=f();w=e.contacts.sort(c.alphabeticalComparer),x=e.emailHash,k=e.idHash,L=e.personsEmails,b=a.syncKey,h(),v.$.triggerHandler(l.initialize)}else d()}function d(){T||P||(P=!0,m=new C.personFactory(C),_=new C.groupFactory(C),y=new C.categoryFactory(C),$Do.when("$pwc",0,function(){a=n.$pwc,a.callWhenReady(function(){T=!0,P=!1,i()})}))}function f(){var e,t={contacts:[],emailHash:{},idHash:{},personsEmails:{}},n=a.persons,r=a.groups,i=a.categories,o=C.personFilterFn,s=C.groupFilterFn,c=C.categoryFilterFn;if(C.includePeople)for(var l=n.length;l--;)e=n[l],e.isHidden()||!C.includeMeContact&&e.isMe()||o&&!o(e)||g(e,t,m);if(C.includeGroups)for(var u=r.length;u--;)s&&!s(r[u])||g(r[u],t,_);if(C.includeCategories)for(var d=i.length;d--;)c&&!c(i[d])||g(i[d],t,y);return t}function g(e,t,n){var i=n.createContacts(e);i=r.isArray(i)?i:[i];for(var o=0;o<i.length;o++)i[o].sortName()&&p(i[o],t)}function p(e,t){var n=t.emailHash,r=t.personsEmails,i=e.email();t.contacts.push(e),t.idHash[e.clientId()]=e,i&&(i=i.toLowerCase(),n[i]||(n[i]=e),r[e.id()]||(r[e.id()]=[]),r[e.id()].push(i))}function h(){for(var e=[],t=w.clone(),n=I||[],r=0;r<n.length;r++){var i=n[r].toLowerCase(),o=x[i];if(o)o.picwOrder(r),(0===M||e.length<M)&&e.push(o);else if(C.createContactsFromUnmatchedPicwEmails){var a=new s.ViewModels.Contact({Id:r,Type:s.ViewModels.ContactType.PicwEmail,DisplayName:"",Email:i,SortName:"",PicwOrder:r});(0===M||e.length<M)&&e.push(a),t.push(a)}}S=e,$=t.sort(c.picwAlphaComparer)}var v=this;v.$=r(v);var m,_,y,C=r.extend({},u,t),b=null,w=[],S=[],$=[],I=C.picwEmails,k={},x={},L={},T=!1,P=!1,M=C.maxPicwEntries;v.doWhenInitialized=function(e){if(T)e();else{var t=function(){v.$.unbind(l.initialize,t),e()};v.$.bind(l.initialize,t)}},v.dispose=function(){v.$.unbind()},v.reinitializeIfStale=function(){P||a.syncKey===b||i()},v.setPicwEmails=function(e){e.join(";")!==I.join(";")&&v.doWhenInitialized(function(){I=e,i()})},v.removePicwContact=function(e){var t=null;if(e.isInPicw()){var n=e.picwOrder();t=I[n],t&&(I.splice(n,1),i())}return t},v.getAlphabetHelper=function(){return o},v.getContactsByCategory=function(e){var t=[],n={};return r.each(w,function(i,o){var a=o.id();n[a]||-1===r.inArray(e,o.categoryIds())||(t.push(o),n[a]=!0)}),t},v.getContactByClientId=function(e){return k[e]},v.getContactByEmail=function(e){return e?x[e.toLowerCase()]:void 0},v.getContactByName=function(e){if(e&&""!==e){e=e.toLowerCase();for(var t=0,n=w.length;n>t;t++){var r=w[t].name()||"",i=w[t].displayName()||"";if(e===r.toLowerCase()||e===i.toLowerCase())return w[t]}}},v.getEmailsOfPerson=function(e){return L[e]},v.getContacts=function(){return w.clone()},v.getPicwContacts=function(t,n){var r=S.clone();if(e.isArray(n)){for(var i={},o=0;o<n.length;o++)i[n[o].clientId()]=n;for(var a=[],s=0;s<r.length;s++)i[r[s].clientId()]||a.push(r[s]);r=a}return t&&t>0&&r.length>t&&(r=r.splice(0,t)),r},v.getMergedContacts=function(){return $.clone()},i()}var n=window,r=e,i=n.wLive,o=new wLive.ContactList.Core.AlphabetHelper,a=null,s=i.ContactList,c=s.ViewModels.SortHelpers={alphabeticalComparer:function(e,t){return o.compareString(e.sortName(),t.sortName(),!1)},picwComparer:function(e,t){return e.picwOrder()-t.picwOrder()},picwAlphaComparer:function(e,t){var n=c.picwComparer(e,t);return 0!==n?n:c.alphabeticalComparer(e,t)}};s.ViewModels.FlatContactsDataModel=t;var l=t.Events={initialize:"initialize"},u={sortOrder:null,displayOrder:null,picwEmails:[],createContactsFromUnmatchedPicwEmails:!0,maxPicwEntries:0,includeMeContact:!0,includePeople:!0,includeGroups:!0,includeCategories:!0,includePeopleWithoutEmails:!1,personFilterFn:null,groupFilterFn:null,categoryFilterFn:null,personFactory:s.ViewModels.PersonFactory,groupFactory:s.ViewModels.GroupFactory,categoryFactory:s.ViewModels.CategoryFactory}}(window.originaljQuery||jQuery)}),define("virtualizedgrid",["flatcontactsdatamodel"],function(){!function(e){function t(t,n,r,i,o,u){function y(){R=X.containerHeight||D.innerHeight(),H=X.containerWidth||D.innerWidth(),j=0!==X.maxColumns?X.maxColumns:Math.round(Math.floor(H/K)),W=Math.round(Math.ceil(R/G)),O=W*j,U=O*X.renderPages,Q=W*X.renderPages*G}function C(){se=!0}function b(){se=!1,T(),E.render()}function w(e,t){if(!Z){var n=t.change;if("insert"===n)z.processInsertedItems(t.index,t.items);else if("remove"===n)z.processRemovedItems(t.index,t.items);else{if("move"===n)throw new Error("Move is not supported");"refresh"===n&&S()}se||(T(),E.render())}}function S(){for(var e=0,t=ie.length;t>e;e++)ie[e].remove();ie=[],oe=[],z.init(ee,ie,oe),T(),E.render()}function $(t){var n=e(t.target);return E.getItemForEvent(n)}function I(e){var t=$(e);t.mouseover&&t.mouseover(e)}function k(e){var t=$(e);t.mouseout&&t.mouseout(e)}function x(e){var t=$(e);t.mousedown&&t.mousedown(e)}function L(e){var t=$(e);t.click&&t.click(e)}function T(){var e=B.innerHeight(),t=Math.ceil(ie.length/j)*G;e!=t&&D.css({height:t+"px"})}function P(){E.render()}function M(){var e,t,n,r=A.scrollTop()-re,i=Math.floor(r/G)*j,o=Math.ceil(r/G)*j;if(i===Y||-1===Y?(e=i,t=e+U):i>Y?(e=i,t=e+U):Y>i&&(t=i+O,e=t-U),t>ie.length){var a=t-ie.length;t-=a,e-=a}return 0>e&&(e=0),Y=i,V&&(n=V>r?-1:r>V?1:0),V=r,{startIndex:e,endIndex:t,firstVisibleIndex:o,scrollTop:r,dir:n}}var E=this;E.$=e(this),c++;var A,N=s+c,D=t;A=u?u:t.parent();var F=document.createElement("ul");D.append(F),D.css("overflow","hidden");var B=e(F);B.attr("role","listbox").prop("id",N.replace(/\W/g,"_")),sutra(B,o||"$Sutra.Shared.ContactsList");var R,H,j,W,O,U,Q,V,q,z,X=e.extend({height:51,width:100,padding:{top:0,right:0,bottom:0,left:0},renderPages:3,maxColumns:1,itemClass:"",alphabetHelper:null,fadeBackground:!0},i||{}),G=X.height+X.padding.top+X.padding.bottom,K=X.width+X.padding.left+X.padding.right,J=-1,Y=-1,Z=!1,ee=n,te="."+X.itemClass,ne="li"+te,re=-1,ie=new Array(ee.length),oe=[],ae=r,se=!1;y(),z=X.letterHeader&&X.alphabetHelper?new a.ContactList.Controls.LetterHeaderGridLayout(E,A,ae,X.alphabetHelper,X.fadeBackground):new a.ContactList.Controls.ListGridLayout(E,ae),z.init(ee,ie,oe),T(),A.bind(h+N,P);var ce=e([ee]);ce.bind(v+N,w),ce.bind(m+N,C),ce.bind(_+N,b),X.supportsHover&&(D.delegate(te,f,I),D.delegate(te,g,k)),D.delegate(te,d,x),D.delegate(te,p,L),E.isVisible=function(e){if(se)return!1;q=q||M();var t=Math.floor(q.startIndex/j)*G;return e>=t&&t+Q>=e},E.hide=function(){D.hide()},E.closeLetterPicker=function(){z&&z.closeLetterPicker&&z.closeLetterPicker()},E.show=function(){D.show()},E.setVisibility=function(e){A.css("overflow",e?"auto":"hidden"),D.css("visibility",e?"visible":"hidden")},E.createTile=function(t,n,r,i,o,a){var s=[];if(s.push('<li id="'),s.push((N+t).replace(/\W/g,"_").encodeHtmlAttribute()),s.push('" role="option" class="'),s.push(X.itemClass),o)for(var c=0,u=o.length;u>c;c++)s.push(" "),s.push(o[c]);if(s.push('" style="top:'),s.push(n),s.push("px; left:"),s.push(r),s.push("px"),a)for(var d in a)d&&(s.push(";"),s.push(d),s.push(":"),s.push(a[d]));s.push('" data-'),s.push(l),s.push('="'),s.push(t.encodeHtmlAttribute()),s.push('">'),s.push(i),s.push("</li>");var f=e(s.join(""));return f.data(l,t),sutra(f,"$Sutra.Shared.ContactsListItem"),B.append(f),f},E.getTileCount=function(){return ie.length},E.getTileCountPerPage=function(){return O},E.getTile=function(e){return e<ie.length?ie[e]:null},E.getTileIndex=function(e){for(var t=ie.length-1;t>=0;t-=1)if(ie[t]===e)return t;return-1},E.getAriaListId=function(){return B.prop("id")},E.resize=function(){y(),E.render(),z.resize()},E.getScrollData=function(){return q},E.render=function(){0>re&&(re=D.offset().top-A.offset().top),q=M();var e,t=q.startIndex,n=0,r=Math.floor(t/j)*G,i=t,o=ie.length,a=q.scrollTop;z.onRender&&z.onRender(t,r,n);for(var s=0;U>s;s++)o>i&&(e=i%j,i!=t&&(0==e?(r+=G,n=0):n+=X.width),ie[i++].render(i,r,n,a));J=t},E.scrollTo=function(e){var t=Math.floor(e/j)*G;A.scrollTop(t)},E.isItemVisible=function(e){var t=Math.floor(e/j)*G,n=A.scrollTop()-re;return t>=n&&t+G<=n+A.height()},E.getItemForEvent=function(e){var t=e.closest(ne),n=t.data(l);return oe[n]},E.dispose=function(){Z||(Z=!0,E.closeLetterPicker(),z.dispose(),A.unbind(N),X.supportsHover&&(D.undelegate(te,f,I),D.undelegate(te,g,k)),D.undelegate(te,d,x),D.undelegate(te,p,L),D.empty(),ce.unbind(N),E.$.unbind(),oe=ie=D=A=B=z=ce=E=E.$=null)}}function n(e,t,n,i,o){function s(e){return i.getAlphabetLetter(e.sortName())}function c(){_.setVisibility(!0)}function l(e,t){_.setVisibility(!0),_.scrollTo(p.indexOf(h[r(t.letter)])),setTimeout(function(){_.$.triggerHandler("clickLetter",t)},0)}function d(e,t){var n=new a.ContactList.Controls.LetterGridTile(r(e),e,_,m,i);return h[n.uniqueId]=n,n}function f(e,t){for(var n=-1,r=e,i=p.length;i>r;r++)if(!(p[r]instanceof a.ContactList.Controls.LetterGridTile)&&p[r].itemEquals(t)){n=r;break}return n}var g,p,h,v,m=this,_=e,y=n,C=new a.ContactList.Controls.LetterPicker(t,i,o);C.$.bind("letterClick",l),C.$.bind("close",c),m.showLetterPicker=function(){_.setVisibility(!1);for(var e=i.getAlphabet(),t=[],n=0,o=e.length;o>n;n++)h[r(e[n])]&&t.push(e[n]);C.show(t)},m.closeLetterPicker=function(){C.close()},m.init=function(e,t,n){if(g=e,p=t,h=n,v=e.length,g.length>0)for(var r,i=-1,o=0,a=0,c=0,l=g.length;l>c;c++){var u=s(g[c]);i!=u&&(i=u,r=p[o++]=d(u,a),a+=2);var f=y.createTile(_,g[c]);p[o++]=f,h[f.uniqueId]=f,r.itemsCount++}},m.onRender=function(e,t,n){},m.processInsertedItems=function(e,t){var n,i,o=[],a="";n=g.length>0&&v-1>e?0===e?0:f(e,g[e-1])+1:p.length;for(var c=0,l=t.length;l>c;c++){var m=s(t[c]);if(m!=a)if(i=h[r(m)],a=m,i){var C=p.indexOf(i);C>=n&&(o.push(i),p.splice(C,1))}else i=d(m,0),o.push(i);var b=y.createTile(_,t[c]);o.push(b),h[b.uniqueId]=b,i.itemsCount++}u.apply(p,[n,0].concat(o))},m.processRemovedItems=function(e,t){for(var n=0,i=t.length;i>n;n++){var o=f(e,t[n]),a=p.splice(o,1);a[0].remove(),delete h[a.uniqueId];var c=s(t[n]),l=h[r(c)];0===--l.itemsCount&&(l.remove(),p.splice(p.indexOf(l,e),1),delete h[l.uniqueId])}},m.resize=function(){C.resize()},m.dispose=function(){C.dispose()}}function r(e){return e}function i(e,t){var n,r,i,o=this,a=e;o.init=function(e,o,s){n=e,r=o,i=s;for(var c=0,l=n.length;l>c;c++){var u=t.createTile(a,n[c]);r[c]=u,i[u.uniqueId]=u}},o.processInsertedItems=function(e,n){for(var o=[],s=0,c=n.length;c>s;s++){var l=t.createTile(a,n[s]);o.push(l),i[l.uniqueId]=l}u.apply(r,[e,0].concat(o))},o.processRemovedItems=function(e,t){for(var n=r.splice(e,t.length),o=0,a=n.length;a>o;o++)delete i[n[o].uniqueId],n[o].remove()},o.resize=function(){},o.dispose=function(){var e;if(r&&(e=r.length))for(var t=0;e>t;t++)delete i[r[t].uniqueId],r[t].remove(),r[t]=null}}var o=window,a=o.wLive,s=".VirtualizedGrid",c=0,l="unique-id",u=[].splice,d="mousedown",f="mouseover",g="mouseout",p="click",h="scroll",v="arrayChange",m="beginBatchUpdate",_="endBatchUpdate";a.ContactList.Controls.VirtualizedGrid=t,a.ContactList.Controls.LetterHeaderGridLayout=n,a.ContactList.Controls.ListGridLayout=i}(window.originaljQuery||jQuery)}),define("letterpicker",["virtualizedgrid"],function(){!function(e){function t(t,r,s){function c(){s&&v.addClass(i),m.addClass(i)}function l(){g.close()}function u(t){for(var i=[],o=0,a=p.length;a>o;o++){var s=p[o];i.push('<div class="Letter '),-1!==t.indexOf(s)?i.push("Enabled t_bci"):i.push("Disabled"),i.push('" title="'+s.encodeHtml()+'">'),i.push(r.getLetterHtml(s)),i.push("</div>")}_.html(i.join("")),n.$Sutra&&e(".Letter",_).each(function(){sutra(e(this),"$Sutra.Shared.ContactsLetterPickerLetter")})}function d(t){c();var n=e(t.target).closest(".Letter").attr("title");g.$.triggerHandler("letterClick",{letter:n})}function f(){var e=t.offset();return{top:e.top,left:e.left,width:t.innerWidth(),height:t.innerHeight()}}var g=this;g.$=e(g);var p=r.getAlphabet(),h=e("body");if(s)var v=e(o).addClass(i).addClass("UI_Dialog_BG").css({position:"absolute",width:e(n).width(),height:e(n).height()}).appendTo(h);var m=e(o).addClass(i).addClass("LetterPickerContainer").css(e.extend({overflow:"auto",position:"absolute"},f())).appendTo(h),_=e(o).addClass("LetterPicker");sutra(m,"$Sutra.Shared.ContactsLetterPicker"),m.append(_),_.delegate(".Enabled",a,d),s&&v.bind(a,l),g.show=function(e){u(e),g.resize(),s&&v.removeClass(i),m.removeClass(i)},g.close=function(){c(),g.$.triggerHandler("close",null)},g.resize=function(){s&&v.css({width:e(n).width(),height:e(n).height()}),m.css(f())},g.dispose=function(){g.$.unbind(),_.undelegate(".Enabled",a,d),s&&(v.unbind(a,l),v.remove()),m.remove()}}var n=window,r=n.wLive,i="Hidden",o="<div>",a="click";r.ContactList.Controls.LetterPicker=t}(window.originaljQuery||jQuery)}),define("lettergridtile",["letterpicker"],function(){!function(e){function t(e,t,n,r,i){var o=this;o._letter=t,o._grid=n,o.uniqueId=e,o._layout=r,o._alphabetHelper=i}var n=window,r=n.wLive;r.ContactList.Controls.LetterGridTile=t,t.prototype={uniqueId:null,_grid:null,_$container:null,_layout:null,_top:-1,_left:-1,_letter:"",itemsCount:0,render:function(e,t,r,i){var o=this;o._$container?(t===o._top&&r===o._left||(o._$container.css({top:t+"px",left:r+"px"}),o._top=t,o._left=r),o._renderUpdates()):(o._onBeforeRender(),o._$container=o._grid.createTile(o.uniqueId,t,r,o._getHtml(),o._getCssClasses(),o._getStyles()),o._top=t,o._left=r,n.$Sutra&&o._setupSutraTags())},_onBeforeRender:e.noop,_renderUpdates:e.noop,_getHtml:function(){var e=this;return'<div class="Letter t_bci">'+e._alphabetHelper.getLetterHtml(e._letter)+"</div>"},_setupSutraTags:function(){var t=this;sutra(e(".Letter",t._$container),"$Sutra.Shared.ContactsListLetterTile")},_getCssClasses:e.noop,_getStyles:e.noop,click:function(e){var t=this;t._layout.showLetterPicker()},remove:function(){var e=this;e._$container&&(e._$container.empty(),e._$container=null),e.dispose()},dispose:e.noop}}(window.originaljQuery||jQuery)}),define("contactlistthrottle",["lettergridtile"],function(){!function(){var e=window,t=e.wLive,n={};t.cpThrottle=function(e,t,r){n[e]&&clearTimeout(n[e]),n[e]=setTimeout(function(){r(),delete n[e]},t)}}()}),define("contactlistregister",["contactlistthrottle"],function(){$Do.register("WLXContactListV2")}),define("contactpickernamespaces",["wliveloaded","jquery.views","contactlistregister"],function(){!function(){var e=window.wLive||{},t=e.ContactPickerV2=e.ContactPickerV2||{};t.ViewModels=e.ContactPickerV2.ViewModels||{},t.Controls=e.ContactPickerV2.Controls||{}}()}),define("selectedcontact",["contactpickernamespaces"],function(){!function(e){function t(r,s,c,l){function u(){if(f.model=c||{},f.options=l||{},r&&(f.model.DisplayName=r.name(),f.model.Email=r.email(),s&&f.model.Email||(f.model.SelectionText=r.raw())),s){if(s.displayName()&&(f.displayName(s.displayName()),f.model.SelectionText||f.model.Email||f.selectionText(s.displayName())),s.email()){var t=new o.EmailAddressParser(s.email());(t.email()||s.sourceId())&&f.email(s.email()),s.displayName()&&(t.email()||s.sourceId())||f.displayName(s.email())}f.contact(s)}f.$model=e(f.model),f.model.Error=f.contactRequiresEmail()&&!f.model.Email}function d(t,n){return void 0===n?n=f.model[t]:e.observable(f.model).setProperty(t,n),n}var f=this;f.id=function(e){return d("Id",void 0===e?e:e.toString())},f.displayName=function(e){return 0===arguments.length?f.model.DisplayName?d("DisplayName",e):f.model.Email?d("Email",e):d("SelectionText",e):d("DisplayName",e)},f.hasUserTile=function(){return s&&s.userTile()},f.userTileHtml=function(){var e="",t=f.contact();if(t&&t.userTile()){var n=f.ic=$icm.createICForPerson("CPV2_addressWell",t.id(),{toolTipType:"none",hidePresence:!0});e=n.render()}return e},f.selectionText=function(e){return 0!==arguments.length||f.model.SelectionText?d("SelectionText",e):f.model.Email},f.email=function(e){return d("Email",e)},f.editing=function(e){return!!d("Editing",e)},f.hideDelete=function(){return!!f.options.hideDelete},f.error=function(e){return!!d("Error",e)},f.contact=function(e){return d("Contact",e)},f.isCategory=function(){var e=f.contact();return!(!e||e.type()!==a.ViewModels.ContactType.Category)},f.isGroup=function(){var e=f.contact();return!(!e||e.type()!==a.ViewModels.ContactType.Group)},f.contactRequiresEmail=function(){return!(f.isCategory()||f.isGroup())},f.isSameContact=function(e){var t=f.contact();return!(!t||!t.equals(e&&e.contact()))},f.tooltip=function(){var e;if(f.error())e=n.$Config.ContactPickerV2.InvalidAddress;else{var t=f.displayName(),r=f.email();e=r&&t!==r?t+" <"+r+">":t}return e},f.bindPropertyChange=function(e){f.$model.bind("propertyChange",e)},f.unbindPropertyChange=function(e){f.$model.unbind("propertyChange",e)},f.errorClass=function(){return f.error()?"cp_error":""},f.ctnrDivClass=function(){return f.isCategory()?"cp_ctnrExp":"cp_ctnr"},f.serialize=function(){var e=f.displayName().replace(/"/g,'\\"');if(f.isCategory()||f.isGroup())return'"'+e+'"';var t=f.email();return t?'"'+e+'" <'+t+">":e},f.clone=function(){for(var e,n={},r=0,o=i.length;o>r;r++)e=i[r],n[e]=f.model[e];return new t(null,null,n)},u()}var n=window,r=n.wLive,i=["DisplayName","Email","SelectionText","Error","Contact"],o=r.ContactPickerV2,a=r.ContactList;o.ViewModels.SelectedContact=t}(window.originaljQuery||jQuery)}),define("emailaddressparser",["selectedcontact"],function(){!function(e){function t(t){function n(){i(t)}function r(t,n){return void 0===n?n=s[t]:e.observable(s).setProperty(t,n),n}function i(e){var t;if(a.raw(e),e){e=e.replace(/\u200e|\u200f/g,""),e=e.trim();for(var n,r=new RegExp(o,"gi"),i=d.None,s=d.None;null!=(currMatch=r.exec(e));){var c=currMatch[0],u=c.charAt(0),f=c.charAt(c.length-1);if(s="<"===u&&">"===f?d.Bracketed:'"'===u&&'"'===f?d.Quoted:d.Bare,s>i&&(n=currMatch,i=s,s===d.Bracketed))break}var g=e;if(n){t=n[0];var p=n.index,h=p+t.length,v=p>0?e.substr(0,p).trim():"",m=h<e.length?e.substr(h):"",_=l.exec(t);t=_[1],"'"===t.charAt(0)&&m&&"'"===m.charAt(0)&&(t=t.slice(1),m=m.slice(1).trim()),g=""===v?m:v,a.email(t.trim())}g=g.replace(/^\s*"\s*/,"").trim(),g.length>1&&"/"!==g.charAt(g.length-2)&&(g=g.replace(/\s*"$/,"")),g=g.replace(/\//g,""),""!==g&&g!==t&&a.name(g)}}var a=this,s={};a.email=function(e){return r("Email",e)},a.name=function(e){return r("Name",e)},a.raw=function(e){return r("Raw",e)},n()}function n(e){for(var t=e.split(u),n=t.length-1;n>=0;n--)t[n]=t[n].trim(),0===t[n].length&&t.splice(n,1);return t}var r=window,i=r.wLive||{},o="(?:[<\"]\\s*)?[a-z0-9\\u0080-\\uFFFF!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9\\u0080-\\uFFFF!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9\\u0080-\\uFFFF](?:[a-z0-9\\u0080-\\uFFFF-]*[a-z0-9\\u0080-\\uFFFF])?\\.)+[a-z0-9\\u0080-\\uFFFF](?:[a-z0-9\\u0080-\\uFFFF-]*[a-z0-9\\u0080-\\uFFFF])?(?:\\s*[>\"])?",a=new RegExp(o,"i"),s="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@((?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)",c=new RegExp(s,"i"),l=/^[<"]?([^<>"]*)[>"]?$/,u=/[,;](?=(?:[^"]*"[^"]*")*(?![^"]*"))/,d={None:0,Quoted:1,Bare:2,Bracketed:3},f=i.ContactPickerV2=i.ContactPickerV2||{};wLive.ContactPickerV2.EmailAddressParser=t,f.EmailAddressParser.isValidEmailSyntax=function(e,t){return e?!!(t?c:a).exec(e.trim()):!1},wLive.ContactPickerV2.EmailAddressParser.parse=function(e){if(!e)return[];for(var t=n(e),r=[],i=0,o=t.length;o>i;i++)r.push(new f.EmailAddressParser(t[i]));return r},wLive.ContactPickerV2.EmailAddressParser.endsWithDelimiter=function(e){if(e){var t=e.split(u);return!t[t.length-1].trim()}return!1}}(window.originaljQuery||jQuery)}),define("contactpickermodel",["emailaddressparser"],function(){!function(e){function t(e,t,n){function l(){b=r.extend({},c,t),r.each(n||[],function(e,t){_.selectContacts(t)}),y=b.errorOnDomains.split(";"),C.$.bind(o.ViewModels.FlatContactsDataModel.Events.initialize,d)}function u(e,t){return e?C.getContactByEmail(e):C.getContactByName(t)}function d(){for(var e=0,t=w.length;t>e;e++){var n=w[e];n.contact()||(contact=u(n.email(),n.displayName()),contact&&_.modifySelectedContact(new a.EmailAddressParser(n.selectionText()),n,!0))}_.$.triggerHandler(s.initialize)}function f(e){var t=!1;return r.each(w,function(n,r){return e.isSameContact(r)?(t=!0,!1):void 0}),t}function g(e){var t=e.lastIndexOf("@"),n=e.substring(t+1).trim().toLowerCase();return-1!==r.inArray(n,y)}function p(e){var t=e.email();return e.contactRequiresEmail()&&!t||!e.contact()&&g(t)}function h(e,t){var n=e.target.Id,r=_.getSelectedContactById(n);_.$.triggerHandler(s.editedContact,{model:_,contacts:[r],contact:r,change:t}),$[n]=r,i.cpThrottle("cpRefreshDirty"+I,20,v)}function v(){var e=[];for(var t in $){var n=$[t],i=_.indexOfSelectedContactId(t);r.observable(w).move(i,i,1),e.push(n)}$={},_.$.triggerHandler(s.refreshedContacts,{model:_,contacts:[e]})}function m(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r.isCategory())for(var i=_.getContactsByCategoryContact(r),o=0;o<i.length;o++)t.push(new a.ViewModels.SelectedContact(null,i[o]));else t.push(r)}return t}var _=this;_.$=r(_);var y,C=e,b={},w=[],S=0,$={},I=Math.random().toString();_.getAlphabetHelper=function(){return C.getAlphabetHelper()},_.getContactList=function(){return C.getContacts()},_.getMergedContactList=function(){return C.getMergedContacts()},_.getPicwContactList=function(e,t){return C.getPicwContacts(e,t)},_.selectContacts=function(e,t,n){r.isArray(e)||(e=[e]),t="number"==typeof t?t:w.length;var i=[],o=[],a=[],c=[],l=b.selectionMaximum;return b.autoExpandCategories&&(e=m(e)),r.each(e,function(e,t){b.allowFreeformEntry||t.contact()?!b.allowDuplicateSelection&&f(t)?a.push(t):l>0&&w.length+i.length>=l?c.push(t):(t.id(++S),t.bindPropertyChange(h),i.push(t)):o.push(t)}),i.length>0&&(r.observable(w).insert(t,i),_.$.triggerHandler(s.selectedContacts,{model:_,contacts:i,context:n})),o.length>0&&_.$.triggerHandler(s.freeformContactRejected,{model:_,contacts:o,context:n}),a.length>0&&_.$.triggerHandler(s.duplicateContactRejected,{model:_,contacts:a,context:n}),c.length>0&&_.$.triggerHandler(s.tooManyContactsRejected,{model:_,contacts:c,context:n}),i},_.addSelectedContact=function(e,t,n){return _.addSelectedContacts([e],t,n)},_.addSelectedContacts=function(e,t,n){for(var r=[],i=0;i<e.length;i++){var o=e[i],s=u(o.email(),o.name()),c=new a.ViewModels.SelectedContact(o,s);c.error(c.contactRequiresEmail()&&!c.email()),r.push(c)}return _.selectContacts(r,t,n)},_.modifySelectedContact=function(e,t,n){var r=t.contact();r||(r=u(e.email(),e.name()));var i,o;e&&(i=e.name(),o=e.email(),t.selectionText(e.raw())),
t.displayName(r&&r.displayName()?r.displayName():i),n&&i&&t.displayName(i),t.email(r&&r.email()?r.email():o),t.error(p(t)),t.contact(r)},_.refreshContacts=function(){v()},_.contactExists=function(e){if(!e)return!1;var t=u(e.email(),e.name());return!!t},_.getContactsByCategory=function(e){return C.getContactsByCategory(e)},_.getContactsByCategoryContact=function(e){var t=e.contact(),n=t.id();return _.getContactsByCategory(n)},_.deselectContactByIndex=function(e){var t=null;return e>=0&&(selectedContact=w[e],selectedContact.unbindPropertyChange(h),r.observable(w).remove(e,1),_.$.triggerHandler(s.deselectedContacts,{model:_,contacts:[selectedContact]})),t},_.deselectContactBySelectedContactId=function(e){return _.deselectContactByIndex(_.indexOfSelectedContactId(e))},_.indexOfSelectedContactId=function(e){var t=-1;return r.each(w,function(n,r){return e===r.id()?(t=n,!1):void 0}),t},_.getSelectedContactByIndex=function(e){return w[e]},_.getSelectedContactById=function(e){return _.getSelectedContactByIndex(_.indexOfSelectedContactId(e))},_.selectedContacts=function(e){var t=e?w:w.clone();return t},_.countSelected=function(){return w.length},_.canAddMoreContacts=function(){var e=b.selectionMaximum;return 0===e||_.countSelected()<e},_.serializeSelection=function(){var e=[];return r.each(w,function(t,n){e.push(n.serialize())}),e.join("; ")},_.dispose=function(){if(_){for(var e=0;e<w.length;e++)w[e].unbindPropertyChange(h);_.$.unbind(),C.$.unbind(o.ViewModels.FlatContactsDataModel.Events.initialize,d),w=C=y=b=_=_.$=null}},l()}var n=window,r=e,i=n.wLive,o=i.ContactList,a=i.ContactPickerV2;a.ViewModels.ContactPickerModel=t;var s=t.Events={initialize:"initialize",selectedContacts:"selectedContacts",deselectedContacts:"deselectedContacts",editedContact:"editedContact",refreshedContacts:"refreshedContacts",freeformContactRejected:"freeformContactRejected",duplicateContactRejected:"duplicateContactRejected",tooManyContactsRejected:"tooManyContactsRejected"},c={allowDuplicateSelection:!0,selectionMaximum:0,allowFreeformEntry:!0,autoExpandCategories:!1,errorOnDomains:"home.com;attbi.com;example.com;hotmail.co;yaho.com;hotmai.com;yahoo.co;yahoomail.com;direcway.com;homail.com;ims-ms-daemon;local.transport;ethome.net.tw;ethome.net.tw;hotmil.com;hotmial.com;yhoo.com;collegeclub.com;sbcglobal.com;hotamil.com;yaoo.com;yahoo.net;yhaoo.com;mail.hotmail.com;passport.com;kimo.com.tw;yahooo.com;yahho.com;ol.com;gateway.net;hotmail.com.mx;otmail.com;htomail.com;aol.co;altavista.com;hotmaill.com;taiwan.com;hotmail.con;ahoo.com;hotmail.om;hotmail.net;hormail.com;hotail.com;hotamail.com;yahoo.om;homtail.com;msn.net;sprint.ca;angelfire.com;cm1.ethome.net.tw;yohoo.com;a0l.com;alo.com;msn.de;gmail.co"}}(window.originaljQuery||jQuery)}),define("contactlisttile",["contactpickermodel"],function(){!function(e){function t(e,t,n,r,i){var o=this;o._grid=e,o._contact=t,o.uniqueId=t.clientId(),o._searchQuery=n,o._useListDisplayName=r,o._showRemoveButtons=i}var n=window,r=e,i=n.wLive,o=i.ContactList,a=o.ViewModels,s=i.ContactPickerV2,c=(s.ViewModels,"CL_Hov t_cp_hov"),l="CL_Sel",u=n.$Config.imgsBase+"ic/groupsnmxl.png",d=a.ContactType,f=a.SearchableProperties,g=a.SearchablePropertyTypes;s.Controls.ContactListTile=t,t.prototype={uniqueId:null,_grid:null,_$container:null,_top:-1,_left:-1,_isDirty:!1,_contact:null,_pendingUpdates:null,_propertyChangeProxy:null,render:function(e,t,n,r){var i=this;i._$container?(t===i._top&&n===i._left||(i._$container.css({top:t,left:n}),i._top=t,i._left=n),i._renderUpdates()):(i._onBeforeRender(),i._$container=i._grid.createTile(i.uniqueId,t,n,i._getHtml(),i._getCssClasses(),i._getStyles()),i._top=t,i._left=n,i._ic&&i._ic.activate(i._$container.find(".c_ic")))},_searchQuery:null,_onBeforeRender:function(){var e=this;e._propertyChangeProxy=function(t,n){e.onPropertyChange(t,n)},e._contact.bindPropertyChange(e._propertyChangeProxy)},_makeBold:function(e,t,n){return i.Search.Helpers.makeBold(e,t,n)},_getHtml:function(){var e=this,t=e._contact,n=[],i=e._useListDisplayName?t.listDisplayName():t.displayName(),o=t.email()||"",a={displayName:null,fieldHtml:null};if(i===o&&(o=""),e._searchQuery){i=e._makeBold(i,e._searchQuery,!1);var s=i!==e._makeBold(t.displayName(),"",!1),c=o||"";o=e._makeBold(c,e._searchQuery,!0);var l=o!==e._makeBold(c,"",!0);if(!l&&!s)for(var u=0;u<f.length;u++){var d=f[u],g=d.properties,p=d.type;if(e._findHiddenMatches(g,p,t,a)){i=a.displayName||i;break}}}else i=i.encodeHtml(),o=o.encodeHtml();return n=r.templates("#cp_contactListTileTemplate").render({displayNameHtml:i,hasUserTile:function(){return!0},userTileHtml:e._getUserTileHtml(),emailHtml:o,hidden:a.fieldHtml?a:null,removeButtonEnabled:e._showRemoveButtons})},_findHiddenMatches:function(e,t,r,i){for(var o=this,a=0;a<e.length;a++){var s=e[a],c=r[s]()||"",l=o._makeBold(c,o._searchQuery,t===g.email);if(l!==c.encodeHtml()){if(t===g.name){var u=r.firstName()||"",d=r.lastName()||"",u="firstName"===s?l:u.encodeHtml(),d="lastName"===s?l:d.encodeHtml();i.displayName=n.$pwc.names.formatName(r.nameType(),r.reverseName()?"displayNameReverse":"displayName",null,u,null,d,null)}else i.fieldHtml=l;return!0}}return!1},_getUserTileHtml:function(){var e=this,t=e._contact,n=null;if(t.type()===d.Person)n=$icm.createICForPerson("CPV2_contactList",t.id(),{showICCard:!0});else{var r={};t.type()!==d.Category&&t.type()!==d.Group||(r.userTileUrl=u),n=$icm.createNonContactIC("CPV2_contactList","",r)}return e._ic=n,n&&n.render()||""},_getCssClasses:function(){return this._contact.isSelected()?["CL_Sel"]:void 0},_getStyles:e.noop,_renderUpdates:function(){var e=this;if(e._pendingUpdates){var t=e._pendingUpdates.IsSelected;void 0!==t&&e._$container.toggleClass(l,t),e._pendingUpdates=null}},onPropertyChange:function(e,t){var n=this;n._pendingUpdates=n._pendingUpdates||{},n._pendingUpdates[t.path]=t.value,n._grid.isVisible(n._top)&&n._renderUpdates()},mouseover:function(){this._$container.toggleClass(c,!0)},mouseout:function(e){this._$container.toggleClass(c,!1),this.triggerEvent(e,"mouseoutContact")},mousedown:function(e){this.triggerEvent(e,"mousedownContact")},click:function(e){this.triggerEvent(e,"clickContact")},triggerEvent:function(e,t){var n=this,r={contact:n._contact,tile:n,target:e.target};setTimeout(function(){n._grid&&n._grid.$.triggerHandler(t,r)},0)},remove:function(){var e=this;e._$container&&(e._$container.empty(),e._$container=null),e._ic&&window.$icm&&($icm.removeIC(e._ic),e._ic=null),e.dispose()},dispose:function(){var e=this;e._propertyChangeProxy&&(e._person&&e._person.unbindPropertyChange(e._propertyChangeProxy),e._propertyChangeProxy=null),e._grid=e._contact=e._searchQuery=null},itemEquals:function(e){return this._contact.equals(e)}}}(window.originaljQuery||jQuery)}),define("searchcontrol",["contactlisttile"],function(){!function(e){function t(){}function n(n,r,a){function s(e){v?e():$Do.when("wlxsearchshared",0,function(){$Do.when("$pwc",0,function(){$pwc.callWhenReady(function(){p||(u=new o.Search.Indexer(m),u.initialize(a.getMergedContactList(),!1,function(){v=!0,e()}))})})})}function c(e){o.cpThrottle("SearchControl",100,function(){if(e.keyCode!==f&&e.keyCode!==g){var t=l.getQuery(e.target);l.show(t)}})}var l=this;l.$=e(l);var u,p,h=i(n).delegate(r,d,c),v=!1,m=new wLive.ContactList.ViewModels.ContactsHelper;l.dispose=function(){p||(p=!0,h.undelegate(),l.$.unbind(),l=l.$=h=null)},l.getQuery=function(e){return i(e).val()},l.show=function(e){s(function(){if(!p){var n=new t;if(n.query=e,e&&""!==e){var r=u.getMatches(e,25);n.contacts=r.result}else n.contacts=[];l.$.triggerHandler("search",n)}})}}var r=window,i=e,o=r.wLive,a=o.ContactList,s=(a.Controls,a.ViewModels),c=o.ContactPickerV2,l=c.Controls,u=(c.ViewModels,".SearchControl"),d="keyup"+u,f=9,g=27;s.SearchablePropertyTypes,s.SearchableProperties;l.SearchResults=t,t.prototype={contacts:[],query:""},l.SearchControl=n}(window.originaljQuery||jQuery)}),define("selectedcontact.control",["searchcontrol"],function(){!function(e){"use strict";function t(){function t(e){e.ic&&e.ic.activate()}function n(e){e.ic&&window.$icm&&($icm.removeIC(e.ic),e.ic=null)}var r="cp_inputContactTemplate",i={templateId:r,template:e.templates("#"+r),attr:"html",init:function(e){this.data=e.ctx.selectedContact},render:function(){n(this.data)},onAfterLink:function(){t(this.data)},onDispose:function(){n(this.data)}};e.views.tags({cp_selectedContactControl:i})}$Do.when("CPV2_templates",0,t)}(window.originaljQuery||jQuery)}),define("contactpickerv2",["selectedcontact.control"],function(){!function(e){function t(e){for(var t in te)if(te[t]===e)return!0;return!1}function n(s,c,te){function ce(){le(),Xt=c,Xt.$.bind(se.selectedContacts,Ct),Xt.$.bind(se.refreshedContacts,Ct),Xt.$.bind(se.initialize,Ie),Jt=Xt.getContactList(),en=e(s),tn=en.find("."+N),en.addClass("t_cpv2 cpv2"),en.on("focusin.cpv2",We).on("focusout.cpv2",Oe).on("copy.cpv2",ye),ge(),de(),Zt.assignLegacyAutomationIds&&on.attr("id",en.attr("id")+"$InputBox"),e(r).bind("resize",xt),mn&&yn&&mn.bind("keydown",Ve),Bt()}function le(){pn=I*Zt.maxLinesInAddressWell;var t=Zt.maxHeight;_n="object"==typeof t||"string"==typeof t?e(t):null,e.isPlainObject(Zt.toggleContactListTransitions)||(Zt.toggleContactListTransitions=ne)}function ue(){var t=e(F);if(0==t.length)throw"Expected '"+F+"' on '"+window.location.href+"', but none was found."}function de(){ue(),nn=e("<div/>",{"class":"cp_inputContainer"}).appendTo(en).delegate(j,"click",He).delegate(O,"focusin",Ee).delegate(O,"click",Ae).delegate(W,"click",Ne).delegate(W,"keydown",Ke).delegate(W,"focusin",De).delegate(W,"mousedown",Fe).delegate(W,"mouseout",Be).delegate(W,"focusout",Re).delegate(H,"dblclick",lt).delegate(z,"keyup",be).delegate(z,"paste",Ce).delegate(z,"keydown",Ue).delegate(z,"keypress",Qe).delegate(q,$B.IE&&$B.V<=8?"focus":"focusin",je).link(e.templates(F),{selectedContacts:Xt.selectedContacts(!0),ariaLabel:Zt.ariaLabel}),rn=nn.find(U),un=nn.find(V),on=nn.find(z);var t=Se(tn,!0);on.val(t),0===Xt.selectedContacts(!0).length?wt(on):bt(on),Kt=new Z.Controls.SearchControl(s,z,Xt),Kt.$.bind("search",yt),r.document.activeElement===tn[0]&&zt.setFocus(),tn.hide(),dn=e("<textarea>",{tabIndex:"-1",autocomplete:"off","class":"cliparea"}).appendTo(en)}function fe(t){var n=e(t);Se(n),n.val("")}function ge(){an=e("<div/>",{"class":"cp_clist"}).hide().html(e.templates("#cp_contactListContainerTemplate").render({})).appendTo(en),sutra(an,"$Sutra.Shared.ContactPicker"),cn=an.find(".VirtualizedGrid"),sn=an.find(".GridContainer"),ln=an.find(Q)}function pe(t){Dt(!0),Tt(),Gt=new i.ContactList.Controls.VirtualizedGrid(cn,Jt,zt,{letterHeader:t,alphabetHelper:Xt.getAlphabetHelper(),itemClass:"CL_Row",containerHeight:e(window).height(),supportsHover:!0,maxColumns:1,height:60,fadeBackground:!1},null,an),Gt.render(),Gt.$.bind("clickContact",ke),Gt.$.bind("clickLetter",xe),Gt.$.bind("mousedownContact",Le),Gt.$.bind("mouseoutContact",Te),Ft(!0),setTimeout(function(){$t()},0),ln.toggleClass(T,!!(vn!==J||Yt&&""!==Yt)),Gt.scrollTo(0),ze()}function he(e,t){for(var n=0;e.length;)e.charAt(0)===t&&(n+=1),e=e.slice(1);return n}function ve(t){var n=e(t.target),r=n.val(),i=he(r,'"')%2,o=t.which===a&&!(t.ctrlKey||t.shiftKey),s=!o,c=o;if(n[0]===on[0]&&!Xt.canAddMoreContacts())return setTimeout(function(){on.val(""),zt.$.triggerHandler(ae.maxSelectedContactsReached)},0),!1;if("keypress"===t.type&&!i){c=!1;for(var u=t.charCode||t.keyCode,d=0;d<l.length;d++)if(u===l[d]){c=!0;break}}return c&&_e(t,s),c}function me(e,t){var n=!1;if(!t){var r=e.val();r.length>0&&(0>hn||!Gt||r!==Yt)&&Kt.show(r),$Do.when("wlxsearchshared",0,function(){Sn&&hn>=0&&Gt&&(dt(e,Gt.getTile(hn)._contact),n=!0)})}$Do.when("wlxsearchshared",0,function(){!Sn||!t&&n||(fe(e),setTimeout(function(){Sn&&(zt.setFocus(!1),Pt())},0))})}function _e(t,n){me(e(t.target),n),t.stopPropagation()}function ye(e){Sn.triggerHandler(ae.userAction,{type:ie.copy,input:oe.none})}function Ce(t){setTimeout(function(){fe(t.target),wt(e(t.target)),Sn.triggerHandler(ae.userAction,{type:ie.paste,input:oe.none})},0)}function be(t){wt(e(t.target))}function we(e){var t=(e.hasClass(P),e.val());if(!t||0===t.length)return[];t=t.replace(/[\r\n]+/g,x);var n=Z.EmailAddressParser.parse(t);return e.val(""),bt(e),n}function Se(e,t){var n=e.hasClass(P)||e.hasClass(N),r=(Me(e),we(e)),i="";t&&r.length>0&&!Z.EmailAddressParser.endsWithDelimiter(e.val())&&(i=r.pop().raw());var o;if(!n){var a,s=e.view();do a=s.data,s=s.parent;while(!a&&s);a&&(o=Xt.indexOfSelectedContactId(a.id()))}var c={entryPt:re.freeform},l=Xt.addSelectedContacts(r,o,c);return n||Xt.deselectContactByIndex(o+l.length),i}function $e(e,t){var n=e.data;if(n&&n.editing()!==t){$selectedContactElt=_t(rn,n.id());var r=$selectedContactElt.width();return n.editing(t),setTimeout(function(){if(Xt.refreshContacts(),t){var e=Pe();e.css("min-width",r),wt(e),Kt.show(n.selectionText()),zt.setFocus(!1)}},0),n}}function Ie(){st()&&Pt()}function ke(t,n){if(Gt){var r=n.contact,i=n.tile;if(e(n.target).closest(".CL_Remove").length>0)Sn.triggerHandler(ae.removeContactListEntry,[n]);else{""===on.val()&&(Ge(hn,Gt.getTileCount()),hn=Gt.getTileIndex(i),Xe(hn));var o=Pe();dt(o,r)}}}function xe(e,t){zt.setFocus()}function Le(e,t){var n=t.tile;n._$container.toggleClass(A,!0)}function Te(e,t){if(Gt){var n=t.tile;hn&&Gt.getTile(hn)!==n&&n._$container.toggleClass(A,!1)}}function Pe(){var e=nn.find(X);return 0===e.length&&(e=on),e}function Me(t){return e(t).closest(H)}function Ee(e){gn=!1}function Ae(t){var n=e.view(t.target).data;ft(n.id(),{input:oe.mouse}),zt.setFocus(),t.preventDefault()}function Ne(t){var n=e.view(t.target).data;n&&gt(n,_t(on,n.id())),t.preventDefault()}function De(e){gn=!1}function Fe(t){var n=e.view(t.target).data;if(!fn||n!==fn.contact){var r=Me(t.target);r.addClass(L)}}function Be(t){var n=e.view(t.target).data;if(!fn||n!==fn.contact){var r=Me(t.target);r.removeClass(L)}}function Re(e){var t=Me(e.target);fn.$contactElt&&t[0]===fn.$contactElt[0]&&pt()}function He(t){var n=e.view(t.target).data;if(n.isCategory()){var r=n.id(),i=Xt.getContactsByCategoryContact(n);dt(e(t.target),i,Xt.indexOfSelectedContactId(r)),ft(r,{type:ie.expandCategory,input:oe.mouse}),zt.setFocus()}t.preventDefault()}function je(t){pt(),Cn&&Yt===e(t.target).val()&&Pe()[0]===on[0]||Pt()}function We(){gn&&!rn.hasClass(D)&&setTimeout(zt.setFocus,0),rn.addClass(D),gn=!0,tt(),et()}function Oe(){setTimeout(function(){document.activeElement&&ct()||rn&&rn.removeClass(D)},50),bn=setTimeout(function(){wn&&!ct()&&(tt(),zt.completeUserEntry(),zt.hideContactList()),wn=!0},1e3)}function Ue(t){var n=e(t.target).hasClass(P),r=n?""===e(t.target).val():!1;if(!Je(t))switch(t.keyCode){case y:if(!n)return $e(e.view(t.target),!1),setTimeout(function(){zt.setFocus(!1),Pt()},0),t.stopPropagation(),!1;if(!r)return setTimeout(function(){e(t.target).val("")},0),Pt(),t.stopPropagation(),!1;if(Cn)return zt.hideContactList(),t.stopPropagation(),!1;break;case g:case d:if(r&&ht())return t.stopPropagation(),!1;break;case v:return qe(1,!0),t.stopPropagation(),!1;case h:return qe(-1,!0),t.stopPropagation(),!1;case _:if(Gt)return qe(Gt.getTileCountPerPage(),!0),t.stopPropagation(),!1;break;case m:if(Gt)return qe(-Gt.getTileCountPerPage(),!0),t.stopPropagation(),!1;break;case u:var i=!0;if(r?zt.hideContactList():(_e(t),i=!1),!t.shiftKey&&!i)return setTimeout(function(){zt.setFocus(!1),Pt()},0),t.stopPropagation(),!1;if(t.shiftKey&&mn&&yn)return setTimeout(function(){mn.focus()},0),t.stopPropagation(),!1;break;default:return!ve(t)}}function Qe(e){ve(e)}function Ve(e){return e.keyCode!==u||e.shiftKey?void 0:(zt.setFocus(!1),e.stopPropagation(),!1)}function qe(e,t){if(!Gt)return!1;var n=e/Math.abs(e),r=hn+e,i=Gt.getTileCount(),o=!1;for(hn>0&&0>r?r=Xe(0)||1===hn?0:1:i-1>hn&&r>=i&&(r=i-1);r>=0&&i>r;){if(Xe(r)){o=!0;break}r+=n}return o?(Ge(hn,i),hn=r):t&&(0>n?(Ge(hn,i),hn=Gt.getTileCount(),o=qe(-1,!1)):(Ge(hn,i),hn=-1,o=qe(1,!1))),o}function ze(){if(Gt){var e=nn.find(X);if(0===e.length||r.document.activeElement===on[0])""!==on.val()?(hn=-1,qe(1,!1)):(Ge(hn,Gt.getTileCount()),hn=-1);else{var t=e.view().data.contact();if(t){for(var n=Jt.length-1;n>=0;n-=1)if(Jt[n]===t){hn=n,Xe(n);break}}else hn=-1,qe(1,!1)}}}function Xe(e){if(Gt){var t=!1,n=Gt.getTile(e);if(Gt.isItemVisible(e)||(Gt.scrollTo(e),Gt.render()),n._contact&&n._$container){n._$container.addClass(A);var r=Pe();r.attr("aria-activedescendant",n._$container.prop("id")),t=!0}return t}}function Ge(e,t){if(Gt&&e>=0&&t>e){var n=Gt.getTile(e);n._$container&&n._$container.toggleClass(A,!1)}}function Ke(t){var n=e.view(t.target).data.id(),r={input:oe.key};if(!Je(t))switch(t.keyCode){case d:return ht()||vt()||zt.setFocus(!0),ft(n,r),t.stopPropagation(),!1;case f:vt()||zt.setFocus(!0),ft(n,r);break;case g:ht();break;case p:vt()||(pt(),zt.setFocus(!0));break;case a:ut(t.target,r);break;case y:zt.setFocus(!0),t.stopPropagation();break;case u:if(t.shiftKey&&mn&&yn)return mn.focus(),t.stopPropagation(),!1}}function Je(e){var t=!1;if(e.metaKey||e.ctrlKey){var n=e.keyCode===w,r=Ye();if(!r.hasText||n)switch(e.keyCode){case C:Ze(),t=!0;break;case b:Ze(function(){fn.contact&&(ft(fn.contact.id(),{input:oe.key}),zt.setFocus())}),t=!0}}return t}function Ye(){var e=!1,t=-1,n=-1,i=document.activeElement;if("selectionStart"in i&&(t=i.selectionStart,n=i.selectionEnd,e=n-t>0),!e){var o=r.$f.getSelectedText();if(e=!!o.text,e&&-1===t&&o.parentElement()===i&&"value"in i){var a=o.text.length;o.moveStart("character",-i.value.length),n=o.text.length,t=n-a}}return{hasText:e,start:t,end:n}}function Ze(e){var t=fn.contact;if(t){var n=fn.$contactElt,r=t.serialize();dn.val(r).focus().select(),setTimeout(function(){gt(t,n),e&&e()},0)}}function et(){e(document.body).on("mousedown click dblclick",rt)}function tt(){nt(),e(document.body).off("mousedown click dblclick",rt)}function nt(){bn&&clearTimeout(bn),bn=0,wn=!0}function rt(t){if(t&&t.target){var n=t.target,r=e(n);if(r.closest(".LetterPickerContainer").length>0)return void(wn=!1);if(r.closest(R).length>0)return void(wn=!1);if(mn&&at(mn[0],r[0]))return Pe()[0]===on[0]?zt.completeUserEntry():(it(),setTimeout(function(){zt.setFocus(!1)},0)),void(wn=!1);if(r.hasClass(M)&&ot(r))return void(wn=!1);if(it(),"mousedown"!==t.type&&ct()||"mousedown"===t.type&&t.target===document.activeElement)return void(wn=!1);zt.completeUserEntry(),zt.hideContactList()}}function it(){var e=nn.find(X);0!==e.length&&me(e,!1)}function ot(e){return at(en,e)}function at(t,n){return 1===e(n).closest(t).length}function st(){return Cn||ct()}function ct(){return ot(document.activeElement)}function lt(e){ut(e.target,{input:oe.mouse})}function ut(t,n){$e(e.view(t),!0),n&&Sn.triggerHandler(ae.userAction,e.extend({type:ie.editContact,input:oe.none},n))}function dt(t,n,r){t.hasClass(E)||(t=on);var i,o=t.hasClass(P),a=(Me(t),we(t));a.length>0&&(i=a[0]),bt(on),e.isArray(n)||(n=[n]);var s=0;if(!o){var c=$e(t.view(),!1);c.contact(n[0]),Xt.modifySelectedContact(i,c,!1),s=1}for(var l=[];s<n.length;s++)l.push(new Z.ViewModels.SelectedContact(i,n[s]));var u=Yt?re.autocomplete:vn===Y?re.contactpicker:re.relevancy;Xt.selectContacts(l,r,{entryPt:u});var d=!(t[0]===on[0]&&0===t.val());t.val(""),pt(),setTimeout(function(){Zt.excludeSelectedFromFrequentList&&vn===J&&Pt(!0),zt.setFocus(d),$t()},0)}function ft(t,n){var r=Xt.getSelectedContactById(t);r===fn.contact&&(fn={}),Xt.deselectContactBySelectedContactId(t),Zt.excludeSelectedFromFrequentList&&vn===J&&Cn&&Pt(!0),wt(),setTimeout($t,0),n&&Sn.triggerHandler(ae.userAction,e.extend({type:ie.deleteContact,input:oe.none},n))}function gt(e,t){pt(),e.editing()||(fn={contact:e,$contactElt:t},t.addClass(L),t.find(W).focus(),zt.hideContactList())}function pt(){fn.$contactElt&&(fn.$contactElt.removeClass(L),fn={})}function ht(){var t=!1;if(fn.contact&&fn.$contactElt){var n=Xt.indexOfSelectedContactId(fn.contact.id())-1;if(n>=0){var r=Xt.getSelectedContactByIndex(n),i=e(fn.$contactElt.prevAll(H)[0]);gt(r,i),t=!0}}else{var o=mt();o.contact&&o.$contactElt&&(gt(o.contact,o.$contactElt),t=!0)}return t}function vt(){if(!fn.contact||!fn.$contactElt)return!1;var t=Xt.indexOfSelectedContactId(fn.contact.id());if(t<Xt.selectedContacts(!0).length-1){t+=1;var n=Xt.getSelectedContactByIndex(t),r=e(fn.$contactElt.nextAll(H)[0]);return gt(n,r),!0}return!1}function mt(){var e=Xt.selectedContacts(!0),t=e.length-1,n=null,r=null;return t>=0&&(n=e[t],r=_t(on,n.id()),r[0]||(r=nn.find(X).closest(H))),{contact:n,$contactElt:r}}function _t(t,n){var r=e(t).closest(B);return r.find(H+"[cid='"+n+"']")}function yt(t,n){if(r.document.activeElement&&Pe()[0]===on[0]){var i=e(r.document.activeElement);if(!i.hasClass(E))return}var o=Pe();return o[0]===on[0]||vn!==J&&vn!==K||""!==o.val()?void(Yt===n.query&&Gt&&Cn||(""===n.query?Pt():Et(n.query,n.contacts.sort(ee.ViewModels.SortHelpers.picwComparer)),ze())):void zt.hideContactList()}function Ct(){setTimeout(function(){wt(on)},0)}function bt(e,t){t=t||parseInt(e.css("min-width"),10)||0;var n=Math.max(t,Lt(e.val())),r=rn[0].clientWidth;return 0!==r&&(n=Math.min(n,r-$)),e.width(n),n}function wt(e){if(e&&bt(e),on){var t=rn[0].clientWidth;if(0!==t){var n=rn.position().left,r=n+t-$,i=mt();if(i.$contactElt){var o=i.$contactElt.position().left;$B.rtl?r=o-$:r-=o+i.$contactElt[0].clientWidth}var a=!1;$>r&&(r=t-$,a=!0),on.width(0),r=bt(on,r),rn.css("max-height",pn+"px"),setTimeout(function(){a&&rn[0]&&(r=rn[0].clientWidth-$),on&&(on.width(0),on.width(r),Cn&&Tt(),St())},0)}}}function St(){var t=e(r.document.activeElement).closest(z);t=t.length>0?t:on;var n=t[0],i=rn.scrollTop(),o=0;if(n){for(;n&&n!==rn[0];)o+=n.offsetTop,n=n.offsetParent;(i>o||o>i+rn.height())&&rn.scrollTop(o)}}function $t(){var e=It(),t=Math.max(S,rn.innerWidth());return an.width(t),an.height(e),e=kt(e),Gt&&Gt.resize(),{width:t,height:e}}function It(){var e=Zt.maxHeight;if(_n&&_n.length>0){var t=parseInt(_n.css("padding-bottom"),10),n=en.offset().top+en.outerHeight()-_n.offset().top;e=_n.innerHeight()-n-t}else{var r=an.outerHeight()-an.innerHeight();e=e&&e>0?e-nn.outerHeight()-r:Number.MAX_VALUE;var i=$f.getLocation(nn[0]),o=$f.clientHeight(),a=-1!=i.addScrollTop?$f.scrollTop():0;e=Math.min(o+a-i.bottom-r-Zt.contactListBottomMargin,e)}return e=Math.max(k,e)}function kt(e){return e=Math.min(e,sn.outerHeight()),an.height(e),e}function xt(){var e=Zt.shouldRefreshLayoutCb;e&&!e()||$t()}function Lt(e){un.text(e);var t=un.innerWidth();return un.text(""),t+$}function Tt(){r.$f.dockIt(an[0],nn[0],0,-1,1)}function Pt(e){var t=[],n=!1;if(vn===K)n=!0;else{var r=null;if(Zt.excludeSelectedFromFrequentList&&vn==J){var i=Xt.selectedContacts();r=[];for(var o=0;o<i.length;o++){var a=i[o].contact();a&&r.push(a)}}t=vn===J?Xt.getPicwContactList(Zt.numFrequentContactsShownLimit,r):Xt.getContactList(),Yt="",t.length>0?!e&&Cn&&Mt(t,Jt)||(At(),Jt=t,pe(vn===Y)):n=!0}n&&(At(),Jt=t,zt.hideContactList())}function Mt(e,t){var n=e===t;if(e&&t&&!n&&e.length===t.length){n=!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r]){n=!1;break}}return n}function Et(e,t){At(),Jt=t,Yt=e,Jt.length>0?pe(!1):zt.hideContactList()}function At(){Gt&&Gt.dispose(),Gt=null,Jt=null,hn=-1}function Nt(e){var n=Pe(),r=n.length>0?n.val():on.val(),i=vn;vn="undefined"==typeof e?Zt.toggleContactListTransitions[vn]:e,t(vn)||(vn=Y),""===r||vn===Y?Pt(vn!==i):n.keyup(),Gt&&(Dt(!0),Ft(!0),Tt())}function Dt(e){an.toggle(e).attr("aria-hidden",!e),Cn=e}function Ft(e){if(nn.find(z).attr("aria-expanded","false").removeAttr("aria-owns").removeAttr("aria-activedescendant"),e){var t=Pe();t.attr("aria-owns",Gt.getAriaListId()).attr("aria-expanded","true")}}function Bt(){n._dragDropContext=null,nn.on("dragenter"+G,Qt).on("dragover"+G,Vt).on("drop"+G,qt),Xt.$.on(se.selectedContacts+G,Rt).on(se.refreshedContacts+G,Rt).on(se.editedContact+G,Rt).on(se.initialize+G,Rt),Rt()}function Rt(){var e=nn.find(H).off(G).on("dragstart"+G,Wt).on("dragend"+G,Ot).on("drag"+G,Ut);e.length>0&&e[0].dragDrop&&e.on("mousemove"+G,jt)}function Ht(){nn.off(G),nn.find(H).off(G),Xt.$.off(G)}function jt(e){var t=e.target;t.dragDrop&&1===e.button&&t.dragDrop()}function Wt(t){var r=e.view(t.target).data;Sn.triggerHandler(ae.dragStart),zt.hideContactList();var i=t.originalEvent.dataTransfer;if(i.setData("Text",r.serialize()),!i.setDragImage)var o=e("<div />",{"class":"cpv2_dragtip t_blc"}).text(r.displayName()).css("position","absolute").css("visibility","hidden").css("z-index","10000000").appendTo("body");n._dragDropContext={contact:r,picker:zt,dropped:!1,$dragEffectNode:o}}function Ot(e){setTimeout(function(){var e=n._dragDropContext;n._dragDropContext=null,e.$dragEffectNode&&e.$dragEffectNode.remove(),e.dropped&&Xt.deselectContactBySelectedContactId(e.contact.id())},1)}function Ut(e){var t=n._dragDropContext.$dragEffectNode,r=e.originalEvent;t&&t.css("visibility","visible").offset({top:r.pageY+5,left:r.pageX+5})}function Qt(e){zt.hideContactList()}function Vt(e){n._dragDropContext&&e.preventDefault()}function qt(e){var t=n._dragDropContext;if(t){if(t.picker!==zt){t.dropped=!0;var r=Xt.selectContacts([t.contact.clone()],null,{entryPt:re.freeform});if(r.length>0){var i=r[0];gt(i,_t(on,i.id()))}else zt.setFocus()}e.preventDefault()}}var zt=this,Xt=null,Gt=null,Kt=null,Jt=[],Yt="",Zt=e.extend({},o,te||{}),en=null,tn=null,nn=null,rn=null,on=null,an=null,sn=null,cn=null,ln=null,un=null,dn=null,fn={contact:null,$contactElt:null},gn=!0,pn=105,hn=-1,vn=Zt.showContactListOnFocus,mn=Zt.$toggleButton,_n=null,yn=Zt.handleButtonFocus,Cn=!1,bn=0,wn=!0,Sn=zt.$=e(zt);zt.createTile=function(t,n){return new Z.Controls.ContactListTile(t,n,Yt,vn===Y&&!Yt,e.inArray(vn,Zt.enableRemoveButtonForModes)>=0&&!Yt)},zt.toggleContactList=function(e){Nt(e),zt.setFocus(!1)},zt.hideContactList=function(){Gt&&Gt.closeLetterPicker(),Cn&&(Dt(!1),Ft(!1)),hn=-1,vn=Zt.showContactListOnFocus},zt.addFreeformSelection=function(e){on.val(e),fe(on)},zt.refreshLayout=function(){xt(),wt()},zt.setFocus=function(e){var t=Pe();wt(t);try{t.focus()}catch(n){return}var r=t[0];if(r.createTextRange){var i=r.createTextRange();i.moveStart("character",r.value.length),i.collapse(),i.select()}else{var o=r.value;r.value="",r.value=o}e&&t.keyup()},zt.completeUserEntry=function(){return fe(on)},zt.hasIncompleteUserEntry=function(){return!!on.val()},zt.resetSettings=function(t){var n=Zt;delete t.$toggleButton,Zt=e.extend({},Zt,t||{}),le();var r=Zt.showContactListOnFocus;r!==n.showContactListOnFocus&&r!==vn&&(vn=r,!Yt&&st()&&Pt()),zt.refreshLayout()},zt.dispose=function(){Sn&&(At(),Ht(),Sn.unbind(),nn.unbind(),on.unbind(),an.remove(),Cn=!1,tt(),en.off(".cpv2"),Xt.$.unbind(se.selectedContacts,Ct),Xt.$.unbind(se.refreshedContacts,Ct),Xt.$.unbind(se.initialize,Ie),e(r).unbind("resize",xt),mn&&yn&&mn.unbind("keydown",Ve),Kt&&(Kt.$.unbind("search",yt),Kt.dispose()),en.empty(),fn&&(fn.contact=fn.$contactElt=null),Kt=Zt=s=en=tn=nn=rn=on=an=sn=cn=Sn=ln=un=dn=mn=_n=null)},ce()}var r=window,i=r.wLive,o={maxHeight:400,contactListBottomMargin:60,maxLinesInAddressWell:3,showContactListOnFocus:J,toggleContactListTransitions:null,numFrequentContactsShownLimit:0,excludeSelectedFromFrequentList:!1,handleButtonFocus:!1,$toggleButton:null,shouldRefreshLayoutCb:null,enableRemoveButtonForModes:[],assignLegacyAutomationIds:!1,ariaLabel:r.$Config.ContactPickerV2?r.$Config.ContactPickerV2.DefaultAriaLabel:""},a=13,s=44,c=59,l=[s,c],u=9,d=8,f=46,g=37,p=39,h=38,v=40,m=33,_=34,y=27,C=67,b=88,w=86,S=200,$=35,I=35,k=60,x="; ",L="cp_selected t_bci",T="CL_RelatedHidden",P="cp_primaryInput",M="cp_editInput",E="cp_anyInput",A="CL_Highlight t_bci",N="cp_textarea",D="Focus",F="#cp_inputTemplate",B=".cpv2",R=".cp_clist",H=".cp_Contact",j="a.cp_exp",W="a.cp_ctBtn",O="a.cp_remBtn",U=".cp_inputArea",Q=".CL_Related",V=".cp_textRuler",q="."+P,z="."+E,X="."+M,G=".cpdd",K=0,J=1,Y=2,Z=i.ContactPickerV2,ee=i.ContactList,te=n.ListMode={none:K,related:J,full:Y},ne=n.DefaultTransitions={};ne[K]=J,ne[J]=Y,ne[Y]=J;var re=n.EntryPoints={relevancy:1,autocomplete:2,contactpicker:3,freeform:4},ie=n.UserActionType={deleteContact:1,editContact:2,expandCategory:3,copy:4,paste:5},oe=n.UserActionInput={none:0,mouse:1,key:2},ae=n.Events={userAction:"userAction",removeContactListEntry:"removeContactListEntry",dragStart:"dragStart",maxSelectedContactsReached:"maxSelectedContactsReached"},se=Z.ViewModels.ContactPickerModel.Events;Z.Controls.ContactPicker=n,$Do.register("WLXContactPickerV2")}(window.originaljQuery||jQuery)}),define("Wac2",function(){});